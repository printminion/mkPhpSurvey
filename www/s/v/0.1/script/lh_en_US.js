/* Copyright 2007 Google Inc. All Rights Reserved. */ 
var Dh=Dh||{},E=this,Uq=function(){};var Q=function(a){return typeof a!="undefined"},Ja=function(a){return a instanceof Array||Rb(a)&&typeof a.join=="function"&&typeof a.reverse=="function"},ae=function(a){return Rb(a)&&typeof a.length=="number"},ab=function(a){return typeof a=="string"},ji=function(a){return typeof a=="number"},be=function(a){return typeof a=="function"},Rb=function(a){return a!=null&&typeof a=="object"},$a=function(a){if(a.hasOwnProperty&&a.hasOwnProperty(Re)){return a[Re]}if(!a[Re]){a[Re]=
String(++Lq)}return a[Re]},Re="closure_hashCode_",Lq=0,Kp=function(a){if(Rb(a)){if(a.fa){return a.fa()}var b=Ja(a)?[]:{};for(var c in a){b[c]=Kp(a[c])}return b}return a},da=function(a,b,c){var d=a.LC||[];d=d.concat(Array.prototype.slice.call(arguments,2));if(a.Tv){b=a.Tv}if(a.Sv){a=a.Sv}var e=function(){var f=d.concat(Array.prototype.slice.call(arguments));return a.apply(b,f)};e.LC=d;e.Tv=b;e.Sv=a;return e},pl=function(a,b){for(var c in b){a[c]=b[c]}},ya=function(){return(new Date).getTime()},xe=
function(a,b){var c=b||{};for(var d in c){a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),c[d])}return a},fg=function(a,b){E[a]=b},Tc=function(a,b,c){a[b]=c};if(!Function.prototype.apply){Function.prototype.apply=function(a,b){var c=[],d,e;if(!a)a=E;if(!b)b=[];for(var f=0;f<b.length;f++){c[f]="args["+f+"]"}e="oScope.__applyTemp__.peek().("+c.join(",")+");";if(!a.__applyTemp__){a.__applyTemp__=[]}a.__applyTemp__.push(this);d=eval(e);a.__applyTemp__.pop();return d}}Function.prototype.bind=function(a,
b){return da.apply(null,[this,a].concat(Array.prototype.slice.call(arguments,1)))};Function.prototype.D=function(a){function b(){}b.prototype=a.prototype;this.sa=a.prototype;this.prototype=new b;this.prototype.constructor=this};Function.prototype.yz=function(a){pl(this.prototype,a)};if(!Array.prototype.push){Array.prototype.push=function(){for(var a=0;a<arguments.length;a++){this[this.length]=arguments[a]}return this.length}}if(!Array.prototype.pop){Array.prototype.pop=function(){var a;if(this.length){a=
this[this.length-1];this.length--}return a}}Array.prototype.peek=function(){return this[this.length-1]};if(!Array.prototype.shift){Array.prototype.shift=function(){var a;if(this.length){a=this[0];for(var b=0;b<this.length-1;b++){this[b]=this[b+1]}this.length--}return a}}if(!Array.prototype.unshift){Array.prototype.unshift=function(){var a=arguments.length;for(var b=this.length-1;b>=0;b--){this[b+a]=this[b]}for(var c=0;c<a;c++){this[c]=arguments[c]}return this.length}};var re=function(a,b,c){if(a.indexOf){return a.indexOf(b,c)}if(Array.indexOf){return Array.indexOf(a,b,c)}if(c==null){c=0}else if(c<0){c=Math.max(0,a.length+c)}for(var d=c;d<a.length;d++){if(a[d]===b)return d}return-1},Ue=function(a,b,c){if(a.forEach){a.forEach(b,c)}else if(Array.forEach){Array.forEach(a,b,c)}else{var d=a.length,e=ab(a)?a.split(""):a;for(var f=0;f<d;f++){b.call(c,e[f],f,a)}}},Fp=function(a,b,c){if(a.filter){return a.filter(b,c)}if(Array.filter){return Array.filter(a,b,c)}var d=a.length,
e=[],f=ab(a)?a.split(""):a;for(var g=0;g<d;g++){if(b.call(c,f[g],g,a)){e.push(f[g])}}return e},Hp=function(a,b,c){if(a.map){return a.map(b,c)}if(Array.map){return Array.map(a,b,c)}var d=a.length,e=[],f=ab(a)?a.split(""):a;for(var g=0;g<d;g++){e.push(b.call(c,f[g],g,a))}return e},Jp=function(a,b,c){if(a.some){return a.some(b,c)}if(Array.some){return Array.some(a,b,c)}var d=a.length,e=ab(a)?a.split(""):a;for(var f=0;f<d;f++){if(b.call(c,e[f],f,a)){return true}}return false},Rd=function(a,b){if(a.contains){return a.contains(b)}return re(a,
b)>-1},Hh=function(a,b){if(!Rd(a,b)){a.push(b)}},Gp=function(a,b,c){Ih(a,c,0,b)},od=function(a,b){var c=re(a,b),d;if(d=c!=-1){Ip(a,c)}return d},Ip=function(a,b){return Array.prototype.splice.call(a,b,1).length==1},Ep=function(a){if(Ja(a)){return a.concat()}else{var b=[];for(var c=0;c<a.length;c++){b[c]=a[c]}return b}},Ih=function(a,b,c,d){return Array.prototype.splice.apply(a,Yf(arguments,1))},Yf=function(a,b,c){if(arguments.length<=2){return Array.prototype.slice.call(a,b)}else{return Array.prototype.slice.call(a,
b,c)}};var Xq=function(a,b,c){for(var d in a){b.call(c,a[d],d,a)}},tl=function(a){var b=[];for(var c in a){b.push(a[c])}return b},sl=function(a){var b=[];for(var c in a){b.push(c)}return b},Wq=function(a,b){for(var c in a){if(a[c]==b){return true}}return false},oi=function(a,b){var c;if(c=b in a){delete a[b]}return c},Vq=function(a,b,c){if(b in a){throw Error('The object already contains the key "'+b+'"');}Zq(a,b,c)},Yq=function(a,b,c){if(b in a){return a[b]}return c},Zq=function(a,b,c){a[b]=c};var Vc=function(a,b){return a.indexOf(b)==0},dc=function(a,b){var c=a.length-b.length;return c>=0&&a.lastIndexOf(b,c)==c},cr=function(a){return a.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},ze=function(a){return/^\s*$/.test(a)},wl=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")},fr=function(a){return a.replace(/\xa0|\s/g," ")},Wc=function(a){return a.replace(/^\s+|\s+$/g,"")},kr=function(a){return a.replace(/\s+$/,"")},Bl=/(\.\d+)|(\d+)|(\D+)/g,gr=function(a,b){if(a==b){return 0}if(!a){return-1}if(!b){return 1}var c=
a.toLowerCase().match(Bl),d=b.toLowerCase().match(Bl),e=Math.min(c.length,d.length);for(var f=0;f<e;f++){var g=c[f],h=d[f];if(g!=h){var i=parseInt(g,10);if(!isNaN(i)){var j=parseInt(h,10);if(!isNaN(j)&&i-j){return i-j}}return g<h?-1:1}}if(c.length!=d.length){return c.length-d.length}return a<b?-1:1},Xc=function(a){return encodeURIComponent(a)},ui=function(a){return decodeURIComponent(a.replace(/\+/g," "))},ri=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")},ga=function(a,b){if(b){return a.replace(ul,
vl).replace(zl,Al).replace(xl,yl).replace(Cl,Dl)}else{if(!ar.test(a))return a;if(a.indexOf(br)!=-1){a=a.replace(ul,vl)}if(a.indexOf(er)!=-1){a=a.replace(zl,Al)}if(a.indexOf(dr)!=-1){a=a.replace(xl,yl)}if(a.indexOf(hr)!=-1){a=a.replace(Cl,Dl)}return a}},br="&",er="<",dr=">",hr='"',vl="&amp;",Al="&lt;",yl="&gt;",Dl="&quot;",ul=/&/g,zl=/</g,xl=/>/g,Cl=/\"/g,ar=/[&<>\"]/,Va=function(a){if(a.indexOf("&")>=0){if("document"in E){var b=E["document"]["createElement"]("a");b["innerHTML"]=a;if(b["normalize"]){b["normalize"]()}a=
b["firstChild"]["nodeValue"];b["innerHTML"]=""}else{return a.replace(/&([^;]+);/g,function(c,d){switch(d){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if(d.charAt(0)=="#"){var e=Number("0"+d.substr(1));if(!isNaN(e)){return String.fromCharCode(e)}}return c}})}}return a},vi=function(a,b){return ri(a.replace(/  /g," &#160;"),b)},ti=function(a,b,c){if(c){a=Va(a)}if(a.length>b){var d=Math.floor(b/2),e=a.length-d;d+=b%2;a=a.substring(0,d)+"..."+a.substring(e)}if(c){a=
ga(a)}return a},jr=function(a){var b={};for(var c=0;c<a.length;c++){b[a.charAt(c)]=true}return b},$q=jr("()[]{}+-?*.$^|,:#<!\\"),qi=function(a,b){return a.indexOf(b)!=-1},si=function(a){a=String(a);var b="",c;for(var d=0;d<a.length;d++){c=a.charAt(d);if(c=="\u0008"){c="\\x08"}else if(c in $q){c="\\"+c}b+=c}return b},ir=function(a,b){return(new Array(b+1)).join(a)};var Fc=function(a,b){this.width=Q(a)?Number(a):undefined;this.height=Q(b)?Number(b):undefined};Fc.prototype.fa=function(){return new Fc(this.width,this.height)};Fc.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};var sa=function(a,b){this.x=Q(a)?Number(a):undefined;this.y=Q(b)?Number(b):undefined};sa.prototype.fa=function(){return new sa(this.x,this.y)};sa.prototype.toString=function(){return"("+this.x+", "+this.y+")"};var mi=function(a,b){a=Number(a);b=Number(b);this.start=
a<b?a:b;this.end=a<b?b:a};mi.prototype.fa=function(){return new mi(this.start,this.end)};mi.prototype.toString=function(){return"["+this.start+", "+this.end+"]"};var vd=function(a,b,c,d){this.left=Q(a)?Number(a):undefined;this.top=Q(b)?Number(b):undefined;this.width=Q(c)?Number(c):undefined;this.height=Q(d)?Number(d):undefined};vd.prototype.fa=function(){return new vd(this.left,this.top,this.width,this.height)};vd.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+
this.height+"h)"};var Ua=function(a,b,c,d){this.top=Q(a)?Number(a):undefined;this.right=Q(b)?Number(b):undefined;this.bottom=Q(c)?Number(c):undefined;this.left=Q(d)?Number(d):undefined},ml=function(){var a=new Ua(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x);for(var b=1;b<arguments.length;b++){var c=arguments[b];a.top=Math.min(a.top,c.y);a.right=Math.max(a.right,c.x);a.bottom=Math.max(a.bottom,c.y);a.left=Math.min(a.left,c.x)}return a};Ua.prototype.fa=function(){return new Ua(this.top,
this.right,this.bottom,this.left)};Ua.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};var kf,A,yd,Ml,yr,fc,xr,rg,qg,Hi,Ar,zr;(function(){var a=navigator.userAgent,b=typeof opera!="undefined",c=!b&&a.indexOf("MSIE")!=-1,d=!b&&a.indexOf("Safari")!=-1,e=!b&&navigator.product=="Gecko"&&!d,f=e&&navigator.vendor=="Camino",g=!b&&a.indexOf("Konqueror")!=-1,h=g||d,i,j;if(b){i=opera.version()}else{if(e){j=/rv\:([^\);]+)(\)|;)/}else if(c){j=/MSIE\s+([^\);]+)(\)|;)/}else if(d){j=/AppleWebKit\/(\S+)/}else if(g){j=/Konqueror\/([^\);]+)(\)|;)/}if(j){j.test(a);i=RegExp.$1}}var l=navigator.platform,
p=l.indexOf("Mac")!=-1,s=l.indexOf("Win")!=-1,y=l.indexOf("Linux")!=-1;kf=b;A=c;yd=e;Ml=f;yr=g;fc=d;xr=h;rg=i;qg=navigator.platform;Hi=p;Ar=s;zr=y})();var sg=function(a,b){if(!isNaN(a)&&!isNaN(b)){return a-b}var c=a.split("."),d=b.split("."),e=Math.min(c.length,d.length);for(var f=0;f<e;f++){if(typeof d[f]=="undefined"){return 1}if(typeof c[f]=="undefined"){return-1}if(!isNaN(c[f])&&isNaN(d[f])&&c[f]==parseInt(d[f],10)){return 1}if(isNaN(c[f])&&!isNaN(d[f])&&parseInt(c[f],10)==d[f]){return-1}if(d[f]>
c[f]){return-1}else if(d[f]<c[f]){return 1}}return 0},Ol=function(a){return sg(rg,a)>=0};var Nh,rd=function(){if(!Nh){Nh=new Gb}return Nh},Ph=function(a){return a?new Gb(Mb(a)):rd()},Oh=function(){return rd().wd()},k=function(a){return rd().Va(a)},se=k,Qh=function(a,b,c){return rd().rx(a,b,c)},Wp=Qh,cg=function(a,b){Xq(b,function(c,d){if(d=="style"){a.style.cssText=c}else if(d=="class"){a.className=c}else if(d=="for"){a.htmlFor=c}else{a[d]=c}})},Cc=function(a){var b=a||E||window,c=b.document,d=(fc||c.compatMode=="CSS1Compat")&&!kf?c.documentElement:c.body;return new Fc(d.clientWidth,
d.clientHeight)},Rk=function(a){var b=a||E||window,c=b.document,d,e;if(c.compatMode=="CSS1Compat"){d=c.documentElement.scrollLeft;e=c.documentElement.scrollTop}else{d=c.body.scrollLeft;e=c.body.scrollTop}return new sa(d,e)},bg=function(a){return a.parentWindow||a.defaultView},Ia=function(a){var b=rd();return b.ea.apply(b,arguments)},q=function(a){return rd().createElement(a)},Pk=function(a){return rd().createTextNode(a)},bq=function(a){return rd().xy(a)},C=function(a,b){a.appendChild(b)},te=function(a){var b;
while(b=a.firstChild){a.removeChild(b)}},z=function(a){if(a.parentNode){a.parentNode.removeChild(a)}},aq=function(a){return $p(a.previousSibling,false)},$p=function(a,b){while(a&&a.nodeType!=1){a=b?a.nextSibling:a.previousSibling}return a},Xp=fc&&sg(rg,"521")<=0,Td=function(a,b){if(typeof a.contains!="undefined"&&!Xp){return a==b||a.contains(b)}if(typeof a.compareDocumentPosition!="undefined"){return a==b||Boolean(a.compareDocumentPosition(b)&16)}while(b&&a!=b){b=b.parentNode}return b==a},Mb=function(a){return a.nodeType==
9?a:a.ownerDocument||a.document},W=function(a,b){if("textContent"in a){a.textContent=b}else if(a.firstChild&&a.firstChild.nodeType==3){while(a.lastChild!=a.firstChild){a.removeChild(a.lastChild)}a.firstChild.data=b}else{while(a.hasChildNodes()){a.removeChild(a.lastChild)}var c=Mb(a);a.appendChild(c.createTextNode(b))}},Ve=function(a,b){var c=[];Qk(a,b,c,true);return c[0]},Qk=function(a,b,c,d){if(a!=null){for(var e=0,f;f=a.childNodes[e];e++){if(b(f)){c.push(f);if(d){return}}Qk(f,b,c,d)}}},Yp={SCRIPT:1,
STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Ok={IMG:" ",BR:"\n"},Rh=function(a){if(a.innerText){return wl(a.innerText)}var b=[];Sk(a,b,true);var c=b.join("").replace(/ +/g," ");if(c!=" "){c=c.replace(/^\s*/,"")}return c},Sk=function(a,b,c){if(a.nodeName in Yp){}else if(a.nodeType==3){if(c){b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{b.push(a.nodeValue)}}else if(a.nodeName in Ok){b.push(Ok[a.nodeName])}else{var d=a.firstChild;while(d){Sk(d,b,c);d=d.nextSibling}}},Gb=function(a){this.bd=a||E.document||
document};Gb.prototype.wd=function(){return this.bd};Gb.prototype.Va=function(a){if(ab(a)){return this.bd.getElementById(a)}else{return a}};Gb.prototype.rx=function(a,b,c){var d=a||"*",e=c||this.bd,f=e.getElementsByTagName(d);if(b){return Fp(f,function(g){return Rd(g.className.split(" "),b)})}else{return f}};Gb.prototype.ea=function(a,b){if(A&&b&&b.name){a="<"+a+' name="'+ga(b.name)+'">'}var c=this.createElement(a);if(b){cg(c,b)}if(arguments.length>2){var d=Yf(arguments,2),e=function(g){if(ab(g)){this.appendChild(c,
this.createTextNode(g))}else if(g){this.appendChild(c,g)}};for(var f=0;f<d.length;f++){if(Ja(d[f])){Ue(d[f],e,this)}else{e.call(this,d[f])}}}return c};Gb.prototype.createElement=function(a){return this.bd.createElement(a)};Gb.prototype.createTextNode=function(a){return this.bd.createTextNode(a)};Gb.prototype.xy=function(a){var b=this.bd.createElement("div");b.innerHTML=a;if(b.childNodes.length==1){return b.firstChild}else{var c=this.bd.createDocumentFragment();while(b.firstChild){c.appendChild(b.firstChild)}return c}};
Gb.prototype.appendChild=C;Gb.prototype.DA=te;Gb.prototype.removeNode=z;Gb.prototype.contains=Td;var yi,Ka=function(a,b,c){a.style[qr(b)]=c},ff=function(a,b){var c=Mb(a);if(c.defaultView&&c.defaultView.getComputedStyle){var d=c.defaultView.getComputedStyle(a,"");if(d){return d[b]}}if(a.currentStyle){return a.currentStyle[b]}else{return a.style[b]}},pr=function(a){return ff(a,"backgroundColor")},gf=function(a,b,c){var d,e;if(b instanceof sa){d=b.x;e=b.y}else{d=b;e=c}a.style.left=typeof d=="number"?Math.round(d)+"px":d;a.style.top=typeof e=="number"?Math.round(e)+"px":e},Sb=function(a){var b;if(a){if(a.nodeType==
9){b=a}else{b=Mb(a)}}else{b=Oh()}if(A&&b.compatMode!="CSS1Compat"){return b.body}return b.documentElement},pa=function(a){var b=Mb(a);if(!Q(yi)){yi=Ml&&!Ol("1.8.0.11")}var c=new sa(0,0),d=Sb(b);if(a==d){return c}var e=null,f;if(a.getBoundingClientRect){f=a.getBoundingClientRect();var g=d.scrollTop,h=d.scrollLeft;c.x=f.left+h;c.y=f.top+g}else if(b.getBoxObjectFor&&!yi){f=b.getBoxObjectFor(a);var i=b.getBoxObjectFor(d);c.x=f.screenX-i.screenX;c.y=f.screenY-i.screenY}else{c.x=a.offsetLeft;c.y=a.offsetTop;
e=a.offsetParent;if(e!=a){while(e){c.x+=e.offsetLeft;c.y+=e.offsetTop;e=e.offsetParent}}if(kf||fc&&ff(a,"position")=="absolute"){c.y-=b.body.offsetTop}e=a.parentNode;while(e&&e!=d){c.x-=e.scrollLeft;if(!kf||e.tagName!="TR"){c.y-=e.scrollTop}e=e.parentNode}}return c},mg=function(a){return pa(a).y},xd=function(a,b,c){var d=pa(a);if(b instanceof sa){c=b.y;b=b.x}var e=b-d.x,f=c-d.y;gf(a,a.offsetLeft+e,a.offsetTop+f)},wc=function(a,b,c){var d;if(b instanceof Fc){d=b.height;b=b.width}else{d=c}a.style.width=
typeof b=="number"?Math.round(b)+"px":b;a.style.height=typeof d=="number"?Math.round(d)+"px":d},ta=function(a){if(ff(a,"display")!="none"){return new Fc(a.offsetWidth,a.offsetHeight)}var b=a.style,c=b.visibility,d=b.position;b.visibility="hidden";b.position="absolute";b.display="";var e=a.offsetWidth,f=a.offsetHeight;b.display="none";b.position=d;b.visibility=c;return new Fc(e,f)},qr=function(a){return String(a).replace(/\-([a-z])/g,function(b,c){return c.toUpperCase()})},wd=function(a,b){var c=a.style;
if("opacity"in c){c.opacity=b}else if("MozOpacity"in c){c.MozOpacity=b}else if("KhtmlOpacity"in c){c.KhtmlOpacity=b}else if("filter"in c){c.filter="alpha(opacity="+b*100+")"}},u=function(a,b){a.style.display=b?"":"none"};var Ya=function(a,b){a.className=b},ag=function(a){return a.className.split(" ")},fa=function(a,b){var c=ag(a),d=Yf(arguments,1),e=1;for(var f=0;f<d.length;f++){if(!Rd(c,d[f])){c.push(d[f]);e&=1}else{e&=0}}a.className=c.join(" ");return Boolean(e)},qa=function(a,b){var c=ag(a),d=Yf(arguments,1),e=0;for(var f=0;f<c.length;f++){if(Rd(d,c[f])){Ih(c,f--,1);e++}}a.className=c.join(" ");return e==d.length},Zp=function(a,b,c){var d=ag(a),e=false;for(var f=0;f<d.length;f++){if(d[f]==b){Ih(d,f--,1);e=true}}if(e){d.push(c);
a.className=d.join(" ")}return e},qd=function(a,b){return Rd(ag(a),b)};var lr={},xi=function(a){if(typeof a.$b=="function"){return a.$b()}if(ab(a)){return a.split("")}if(ae(a)){var b=[],c=a.length;for(var d=0;d<c;d++){b.push(a[d])}return b}return tl(a)},Gl=function(a){if(typeof a.Le=="function"){return a.Le()}if(typeof a.$b=="function"){return undefined}if(ae(a)||ab(a)){var b=[],c=a.length;for(var d=0;d<c;d++){b.push(d)}return b}return sl(a)},nr=function(a,b){if(typeof a.contains=="function"){return a.contains(b)}if(ae(a)||ab(a)){return Rd(a,b)}return Wq(a,b)},ec=function(a,
b,c){if(typeof a.forEach=="function"){a.forEach(b,c)}else if(ae(a)||ab(a)){Ue(a,b,c)}else{var d=Gl(a),e=xi(a),f=e.length;for(var g=0;g<f;g++){b.call(c,e[g],d&&d[g],a)}}},or=function(a,b,c){if(typeof a.some=="function"){return a.some(b,c)}if(ae(a)||ab(a)){return Jp(a,b,c)}var d=Gl(a),e=xi(a),f=e.length;for(var g=0;g<f;g++){if(b.call(c,e[g],d&&d[g],a)){return true}}return false};var oa=function(a){this.$={};if(a){this.cj(a)}},Fl=":";oa.prototype.Qa=0;oa.prototype.La=function(){return this.Qa};var El=function(a){return a.charAt(0)==Fl},mr=function(a){return a.substring(1)},lg=function(a){return Fl+a};oa.prototype.$b=function(){var a=[];for(var b in this.$){if(El(b)){a.push(this.$[b])}}return a};oa.prototype.Le=function(){var a=[];for(var b in this.$){if(El(b)){a.push(mr(b))}}return a};oa.prototype.Zc=function(a){return lg(a)in this.$};oa.prototype.isEmpty=function(){return this.Qa==
0};oa.prototype.clear=function(){this.$={};this.Qa=0};oa.prototype.remove=function(a){if(oi(this.$,lg(a))){this.Qa--;return true}return false};oa.prototype.get=function(a,b){var c=lg(a);if(c in this.$){return this.$[c]}return b};oa.prototype.J=function(a,b){var c=lg(a);if(!(c in this.$)){this.Qa++}this.$[c]=b};oa.prototype.cj=function(a){var b,c;if(a instanceof oa){b=a.Le();c=a.$b()}else{b=sl(a);c=tl(a)}for(var d=0;d<b.length;d++){this.J(b[d],c[d])}};oa.prototype.fa=function(){return new oa(this)};var Hc=function(a){this.$=new oa;if(a){this.cj(a)}},wi=function(a){var b=typeof a;if(b=="object"){return"o"+$a(a)}else{return b.substr(0,1)+a}};Hc.prototype.La=function(){return this.$.La()};Hc.prototype.add=function(a){this.$.J(wi(a),a)};Hc.prototype.cj=function(a){var b=xi(a),c=b.length;for(var d=0;d<c;d++){this.add(b[d])}};Hc.prototype.remove=function(a){return this.$.remove(wi(a))};Hc.prototype.clear=function(){this.$.clear()};Hc.prototype.isEmpty=function(){return this.$.isEmpty()};Hc.prototype.contains=
function(a){return this.$.Zc(wi(a))};Hc.prototype.$b=function(){return this.$.$b()};Hc.prototype.fa=function(){return new Hc(this)};var F=function(a){var b;if(a instanceof F){this.Gn(a.Rx());this.Hn(a.Yx());this.vn(a.ox());this.Fn(a.Fq());this.En(a.Lx());this.Pk(a.xm().fa());this.xn(a.vx())}else if(a&&(b=String(a).match(Cp()))){this.Gn(b[1],true);this.Hn(b[2],true);this.vn(b[3],true);this.Fn(b[4]);this.En(b[5],true);this.Pk(b[6]);this.xn(b[7],true)}else{this.Id=new Ra(null,this)}};F.prototype.We="";F.prototype.ze="";F.prototype.Jh="";F.prototype.vi=null;F.prototype.si="";F.prototype.Id=null;F.prototype.Oh="";F.prototype.toString=
function(){if(this.Vb){return this.Vb}var a=[];if(this.We){a.push(Fh(this.We,Ek),":")}if(this.Jh){a.push("//");if(this.ze){a.push(Fh(this.ze,Ek),"@")}a.push(Ck(this.Jh));if(this.vi!=null){a.push(":",String(this.Fq()))}}if(this.si){a.push(Fh(this.si,Dp))}var b=String(this.Id);if(b){a.push("?",b)}if(this.Oh){a.push("#",Ck(this.Oh))}return this.Vb=a.join("")};F.prototype.fa=function(){return new Ap(this.We,this.ze,this.Jh,this.vi,this.si,this.Id.fa(),this.Oh)};F.prototype.Rx=function(){return this.We};
F.prototype.Gn=function(a,b){delete this.Vb;this.We=b?Te(a):a;if(this.We){this.We=this.We.replace(/:$/,"")}return this};F.prototype.Yx=function(){return this.ze};F.prototype.Hn=function(a,b){delete this.Vb;this.ze=b?Te(a):a;return this};F.prototype.ox=function(){return this.Jh};F.prototype.vn=function(a,b){delete this.Vb;this.Jh=b?Te(a):a;return this};F.prototype.Fq=function(){return this.vi};F.prototype.Fn=function(a){delete this.Vb;if(a){a=Number(a);if(isNaN(a)||a<0){throw Error("Bad port number "+
a);}this.vi=a}else{this.vi=null}return this};F.prototype.Lx=function(){return this.si};F.prototype.En=function(a,b){delete this.Vb;this.si=b?Te(a):a;return this};F.prototype.Pk=function(a){delete this.Vb;if(a instanceof Ra){this.Id=a;this.Id.Aa=this}else{this.Id=new Ra(a,this)}return this};F.prototype.xm=function(){return this.Id};F.prototype.ya=function(a,b){delete this.Vb;this.Id.J(a,b);return this};F.prototype.xB=function(a,b){delete this.Vb;if(!Ja(b)){b=[String(b)]}this.Id.OB(a,b);return this};
F.prototype.sb=function(a){return this.Id.get(a)};F.prototype.vx=function(){return this.Oh};F.prototype.xn=function(a,b){delete this.Vb;this.Oh=b?Te(a):a;return this};var Dk=function(a){return a instanceof F?a.fa():new F(a)},Ap=function(a,b,c,d,e,f,g){var h=new F;h.Gn(a);h.Hn(b);h.vn(c);h.Fn(d);h.En(e);h.Pk(f);h.xn(g);return h},Te=function(a){return a?ui(a):""},Ck=function(a){if(ab(a)){return encodeURIComponent(a)}return null},Fh=function(a,b){if(ab(a)){return encodeURI(a).replace(b,Bp)}return null},
Bp=function(a){var b=a.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)},Gh=null,Cp=function(){if(!Gh){Gh=/^(?:([^:\/?#]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/}return Gh},Ek=/[#\/\?@]/g,Dp=/[\#\?]/g,Ra=function(a,b){this.Cb=new oa;this.Aa=b;if(a){var c=a.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");this.add(ui(e[0]),e.length>1?ui(e[1]):"")}}};Ra.prototype.Qa=0;Ra.prototype.La=function(){return this.Qa};Ra.prototype.add=
function(a,b){this.ii();if(!this.Zc(a)){this.Cb.J(a,[b])}else{this.Cb.get(a).push(b)}this.Qa++;return this};Ra.prototype.remove=function(a){if(this.Cb.Zc(a)){this.ii();this.Qa-=this.Cb.get(a).length;return this.Cb.remove(a)}return false};Ra.prototype.clear=function(){this.ii();this.Cb.clear();this.Qa=0};Ra.prototype.isEmpty=function(){return this.Qa==0};Ra.prototype.Zc=function(a){return this.Cb.Zc(a)};Ra.prototype.Le=function(){var a=this.Cb.$b(),b=this.Cb.Le(),c=[];for(var d=0;d<b.length;d++){for(var e=
0;e<a[d].length;e++){c.push(b[d])}}return c};Ra.prototype.$b=function(a){if(a){if(this.Zc(a)){return this.Cb.get(a)}else{return[]}}else{var b=this.Cb.$b();return Array.prototype.concat.apply([],b)}};Ra.prototype.J=function(a,b){this.ii();if(this.Zc(a)){var c=this.Cb.get(a);this.Qa-=c.length}this.Cb.J(a,[b]);this.Qa++;return this};Ra.prototype.get=function(a,b){if(this.Zc(a)){return this.Cb.get(a)[0]}else{return b}};Ra.prototype.OB=function(a,b){this.ii();if(this.Zc(a)){var c=this.Cb.get(a);this.Qa-=
c.length}if(b.length>0){this.Cb.J(a,b);this.Qa+=b.length}};Ra.prototype.toString=function(){if(this.Vb){return this.Vb}var a=[],b=this.Le(),c=this.$b();for(var d=0;d<b.length;d++){a.push(encodeURIComponent(b[d])+"="+encodeURIComponent(c[d]))}return this.Vb=a.join("&")};Ra.prototype.ii=function(){delete this.Vb;if(this.Aa){delete this.Aa.Vb}};Ra.prototype.fa=function(){var a=new Ra;a.Cb=this.Cb.fa();return a};var pi=function(){this.lg=A?[]:"";for(var a=0;a<arguments.length;a++){this.Ev(arguments[a])}};pi.prototype.Ev=function(){if(A){for(var a=0;a<arguments.length;a++){this.lg.push(arguments[a])}}else{for(var a=0;a<arguments.length;a++){this.lg+=arguments[a]}}return this};pi.prototype.clear=function(){if(A){this.lg.length=0}else{this.lg=""}};pi.prototype.toString=function(){if(A){var a=this.lg.join("");this.clear();if(a){this.lg.push(a)}return a}else{return this.lg}};var Qp=function(a){var b=[];for(var c=0;c<a.length;c++){if(Ja(a[c])){b.push(Qp(a[c]))}else{b.push(a[c])}}return"[ "+b.join(", ")+" ]"},Rp=function(a,b){try{var c=Vp(a),d="Message: "+ga(c.message)+'\nUrl: <a href="view-source:'+c.filename+'" target="_new">'+c.fileName+"</a>\nLine: "+c.lineNumber+"\n\nBrowser stack:\n"+ga(c.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ga(Up(b)+"-> ");return d}catch(e){return"Exception trying to expose exception! You win, we lose. "+e}},Vp=function(a){return typeof a==
"string"?{message:a,name:"Unknown error",lineNumber:"Not available",fileName:E.document.location.href,stack:"Not available"}:(!a.lineNumber||!a.fileName||!a.stack?{message:a.message,name:a.name,lineNumber:"Not available",fileName:E.document.location.href,stack:"Not available"}:a)},Up=function(a){return Nk(a||arguments.callee.caller,[])},Nk=function(a,b){var c=[];if(Rd(b,a)){c.push("[...circular reference...]")}else if(a&&b.length<50){c.push(Tp(a)+"(");var d=a.arguments;for(var e=0;e<d.length;e++){if(e>
0){c.push(", ")}var f=typeof d[e]=="object"&&d[e].toSource?d[e].toSource():String(d[e]);if(f.length>40){f=f.substr(0,40)+"..."}c.push(f)}b.push(a);c.push(")\n");try{c.push(Nk(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else if(a){c.push("[...long stack...]")}else{c.push("[end]")}return c.join("")},Tp=function(a){if(!$f[a]){var b=/function ([^\(]+)/.exec(String(a));if(b){var c=b[1],d=/^\$(.+)\$$/.exec(c);if(d){c=d[1].replace(/\${1,2}/g,".")}$f[a]=c}else{$f[a]="[Anonymous]"}}return $f[a]},
Sp=function(a,b,c,d){if(document.all){return""}var e=b||E,f=c||"",g=d||0;if(e==a){return f}for(var h in e){if(h=="Packages"||h=="sun"||h=="netscape"||h=="java"){continue}if(e[h]==a){return f+h}if((typeof e[h]=="function"||typeof e[h]=="object")&&e[h]!=E&&e[h]!=E.document&&e.hasOwnProperty(h)&&g<6){var i=Sp(a,e[h],f+h+".",g+1);if(i)return i}}return""},$f={};var jb=function(a){this.If=a;this.p=null;this.Wb={};this.ly=[]};jb.prototype.Gf=null;var Bc=function(a,b){this.name=a;this.value=b},is=new Bc("OFF",Infinity),Lk=new Bc("SHOUT",1200),Kh=new Bc("SEVERE",1000),Lh=new Bc("WARNING",900),Kk=new Bc("INFO",800),Pp=new Bc("CONFIG",700),Jk=new Bc("FINE",500),gs=new Bc("FINER",400),hs=new Bc("FINEST",300),fs=new Bc("ALL",0),Mk=function(a){return Ik(a)};jb.prototype.getName=function(){return this.If};jb.prototype.he=function(){return this.p};jb.prototype.Bn=
function(a){this.Gf=a};jb.prototype.Th=function(){return this.Gf};jb.prototype.Pm=function(a){if(this.Gf){return a.value>=this.Gf.value}if(this.p){return this.p.Pm(a)}return false};jb.prototype.log=function(a,b,c){if(!this.Pm(a)){return}var d=new Zb(a,String(b),this.If);if(c){d.iB(c);d.jB(Rp(c,arguments.callee.caller))}this.mz(d)};jb.prototype.QB=function(a,b){this.log(Kh,a,b)};jb.prototype.$n=function(a,b){this.log(Lh,a,b)};jb.prototype.info=function(a,b){this.log(Kk,a,b)};jb.prototype.bq=function(a,
b){this.log(Jk,a,b)};jb.prototype.mz=function(a){if(!this.Pm(a.Th())){return}var b=this;while(b){b.Yv(a);b=b.he()}};jb.prototype.Yv=function(a){for(var b=0;b<this.ly.length;b++){this.ly[b](a)}};jb.prototype.zB=function(a){this.p=a};jb.prototype.ov=function(a,b){this.Wb[a]=b};var Jh={},Zf=null,Np=function(){if(!Zf){Zf=new jb("");Jh[""]=Zf;Zf.Bn(Pp)}},Ik=function(a){Np();var b=Jh[a];if(b==null){b=Mp(a)}return b},Mp=function(a){var b=new jb(a),c=a.split("."),d=c[c.length-1];c.length=c.length-1;var e=
c.join("."),f=Ik(e);f.ov(d,b);b.zB(f);Jh[a]=b;return b};var Zb=function(a,b,c){this.GF=Op++;this.JE=ya();this.Gf=a;this.TD=b;this.KD=c};Zb.prototype.Xp=null;Zb.prototype.Wp=null;var Op=0;Zb.prototype.yq=function(){return this.KD};Zb.prototype.sx=function(){return this.Xp};Zb.prototype.iB=function(a){this.Xp=a};Zb.prototype.tx=function(){return this.Wp};Zb.prototype.jB=function(a){this.Wp=a};Zb.prototype.Th=function(){return this.Gf};Zb.prototype.Bn=function(a){this.Gf=a};Zb.prototype.zq=function(){return this.TD};Zb.prototype.Aq=function(){return this.JE};var pd=function(a){this.sA=a||"";this.CA=ya()};pd.prototype.In=true;pd.prototype.Ss=true;pd.prototype.Qs=true;pd.prototype.yg=function(a){throw Error("Must override formatRecord");};var Fk=function(a){var b=new Date(a.Aq());return Sd(b.getFullYear()-2000)+Sd(b.getMonth()+1)+Sd(b.getDate())+" "+Sd(b.getHours())+":"+Sd(b.getMinutes())+":"+Sd(b.getSeconds())+"."+Sd(Math.floor(b.getMilliseconds()/10))},Sd=function(a){if(a<10){return"0"+a}return String(a)},Gk=function(a,b){var c=a.Aq()-b,d=c/1000,e=d.toFixed(3),
f=0;if(d<1){f=2}else{while(d<100){f++;d*=10}}while(f-- >0){e=" "+e}return e},Hk=function(a){pd.call(this,a)};Hk.D(pd);Hk.prototype.yg=function(a){var b;switch(a.Th()){case Lk:b="dbg-sh";break;case Kh:b="dbg-sev";break;case Lh:b="dbg-w";break;case Kk:b="dbg-i";break;case Jk:default:b="dbg-f";break}var c=[];c.push(this.sA);c.push(" ");if(this.In){c.push("["+Fk(a)+"] ")}if(this.Ss){c.push("[");c.push(vi(Gk(a,this.CA)));c.push("s] ")}if(this.Qs){c.push("[");c.push(ga(a.yq()));c.push("] ")}c.push('<span class="'+
b+'">');c.push(ri(vi(ga(a.zq()))));if(a.sx()){c.push("<br>");c.push(ri(vi(a.tx())))}c.push("</span><br>");return c.join("")};var Mh=function(a){pd.call(this,a)};Mh.D(pd);Mh.prototype.yg=function(a){var b=[];b.push(this.sA);b[b.length]=" ";if(this.In){b.push("[");b.push(Fk(a));b.push("] ")}if(this.Ss){b.push("[");b.push(Gk(a,this.CA));b.push("s] ")}if(this.Qs){b.push("["+a.yq()+"] ")}b.push(a.zq());b.push("\n");return b.join("")};var Lp=function(){this.BF=this.Tz.bind(this);this.gq=new Mh;this.gq.In=false;this.jF=false;this.JD=""};Lp.prototype.Tz=function(a){if(window.console&&window.console["firebug"]){var b=this.gq.yg(a);switch(a.Th()){case Lk:window.console["info"](b);break;case Kh:window.console["error"](b);break;case Lh:window.console["warn"](b);break;default:window.console["debug"](b);break}}else if(window.console){window.console.log(b)}else{this.JD+=this.gq.yg(a)}};var $b=function(){};$b.prototype.get=function(){};$b.prototype.J=function(a){};$b.prototype.Ra=function(a){};$b.prototype.pa=function(a){};$b.prototype.Ya=function(a){};$b.prototype.Sc=function(a,b){};$b.prototype.ca=function(){};$b.prototype.Sf=function(a){};$b.prototype.na=function(){};$b.prototype.ua=function(){};$b.prototype.yc=function(){};var Xe="NOT_LOADED",Rc=function(){};Rc.prototype.J=function(a){};Rc.prototype.Ra=function(a){return new sd};Rc.prototype.pa=function(a,b){return null};Rc.prototype.Ya=
function(a){return null};Rc.prototype.na=function(){var a="",b=this.ca();if(this.Wh&&this.Wh()){a=this.Wh().na()+(b.indexOf("[")!=-1?"":"/")}return a+b};Rc.prototype.ua=function(){};Rc.prototype.Wh=null;var ue=function(){};ue.prototype.add=function(a){};ue.prototype.get=function(a){};ue.prototype.fe=function(a){};ue.prototype.La=function(){};ue.prototype.af=function(a,b){};ue.prototype.removeNode=function(a){};var rb=function(a){this.$={};this.Hf=[];this.Af={};if(a){for(var b=0,c;c=a[b];b++){this.add(c)}}};
rb.prototype.add=function(a){this.Hf.push(a);var b=a.ca();if(b!=null){this.$[b]=a;this.Af[b]=this.Hf.length-1}};rb.prototype.get=function(a){return this.$[a]||null};rb.prototype.fe=function(a){return this.Hf[a]||null};rb.prototype.La=function(){return this.Hf.length};rb.prototype.af=function(a,b){if(b==null){this.removeNode(a)}else{var c=this.Af[a];if(c!=null){this.$[a]=b;this.Hf[c]=b}else{this.add(b)}}};rb.prototype.removeNode=function(a){var b=this.Af[a];if(b!=null){this.Hf.splice(b,1);delete this.$[a];
delete this.Af[a];for(var c in this.Af){if(this.Af[c]>b){this.Af[c]--}}}return b!=null};rb.prototype.indexOf=function(a){return this.Af[a]};var sd=function(){rb.call(this)};sd.D(rb);sd.prototype.add=function(a){throw Error("Can't add to EmptyNodeList");};var sb=Mk("goog.ds");var kb=function(){this.Eh=new rb;this.Iv=new oa;this.Fr={};this.kk={};this.Av={};this.mD=0;this.hF={}},Th=null;kb.D($b);var ra=function(){if(!Th){Th=new kb}return Th};kb.prototype.pv=function(a,b,c){var d=!(!b),e=c||a.ca();if(!Vc(e,"$")){e="$"+e}a.Sf(e);this.Eh.add(a);this.Iv.J(e,d)};kb.prototype.tm=function(a){if(this.Av[a]){return this.Av[a].Jj()}else{return this.Eh.get(a)}};kb.prototype.get=function(){return this.Eh};kb.prototype.J=function(a){throw Error("Can't set on DataManager");};kb.prototype.Ra=
function(a){if(a){return new rb([this.pa(a)])}else{return this.Eh}};kb.prototype.pa=function(a){return this.tm(a)};kb.prototype.Ya=function(a){var b=this.tm(a);return b?b.get():null};kb.prototype.ca=function(){return""};kb.prototype.na=function(){return""};kb.prototype.ua=function(){var a=this.Eh.La();for(var b=0;b<a;b++){var c=this.Eh.fe(b),d=this.Iv.get(c.ca());if(d){c.ua()}}};kb.prototype.yc=function(){return false};kb.prototype.addListener=function(a,b,c){var d=0;if(dc(b,"/...")){d=1000;b=b.substring(0,
b.length-4)}else if(dc(b,"/*")){d=1;b=b.substring(0,b.length-2)}c=c||"";var e=b+":"+c+":"+$a(a),f={dataPath:b,id:c,fn:a},g=Sa(b),h=$a(a);if(!this.kk[h]){this.kk[h]={}}this.kk[h][e]={listener:f,items:[]};while(g){var i={listener:f,maxAncestors:d},j=this.Fr[g.Bm()];if(j==null){j={};this.Fr[g.Bm()]=j}j[e]=i;d=0;g=g.he();this.kk[h][e].items.push({key:e,obj:j})}};kb.prototype.EA=function(a,b,c){if(b&&dc(b,"/...")){b=b.substring(0,b.length-4)}else if(b&&dc(b,"/*")){b=b.substring(0,b.length-2)}this.FA(this.kk,
false,a,b,c)};kb.prototype.FA=function(a,b,c,d,e){var f=$a(c),g=a[f];if(g!=null){for(var h in g){var i=g[h],j=i.listener;if((!d||d==j["dataPath"])&&(!e||e==j["id"])){if(b){this.EA(j["fn"],j["dataPath"],j["id"])}if(i.items){for(var l=0;l<i.items.length;l++){var p=i.items[l];delete p.obj[p.key]}}delete g[h]}}}};kb.prototype.hb=function(a){if(this.dF){return}var b=Sa(a),c=0;while(b){var d=this.Fr[b.Bm()];if(d){for(var e in d){var f=d[e],g=f.listener;if(c<=f.maxAncestors){g.fn(a,g.id)}}}c++;b=b.he()}this.mD++};var Da=function(a){if(a){this.Ks(a)}};Da.prototype.Ks=function(a,b,c,d){this.Ys=a;if(!c&&!d){if(dc(a,"?")){this.Zv=true;a=a.substring(0,a.length-1)}if(dc(a,"()")){if(dc(a,"name()")||dc(a,"count()")||dc(a,"position()")){var e=a.lastIndexOf("/");if(e!=-1){this.om=a.substring(e+1);a=a.substring(0,e)}else{this.om=a;a="."}if(this.om=="count()"){this.wD=true}}}}this.Nf=b||a.split("/");this.za=this.Nf.length;this.Cr=this.Nf[this.za-1];this.Y=this.Nf[0];if(this.za==1){this.us=this;this.ck=Vc(a,"$")}else{this.us=
Uh(this.Y,null,this,null);this.ck=this.us.ck;this.Y=this.us.Y}if(this.za==1&&!this.ck){this.Qy=a=="."||a=="";this.Ty=Vc(a,"@");this.Oy=a=="*|text()";this.Ny=a=="@*";this.Py=a=="*"}};Da.prototype.Bm=function(){return this.Ys};Da.prototype.he=function(){if(!this.bE){if(this.za>1){this.cE=Uh(null,this.Nf.slice(0,this.Nf.length-1),this,null)}this.bE=true}return this.cE};Da.prototype.Cq=function(){if(!this.UD){if(this.za>1){this.VD=Uh(null,this.Nf.slice(1),null,this)}this.UD=true}return this.VD};Da.prototype.tb=
function(a){if(a==null){a=ra()}else if(this.ck){a=a.getDataRoot?a.getDataRoot():ra()}if(this.wD){var b=this.Gx(a);return b.La()}if(this.za==1){return a.Ya(this.Y)}else if(this.za==0){return a.get()}var c=a.pa(this.Y);if(c==null){return null}else{return this.Cq().tb(c)}};Da.prototype.Gx=function(a,b){return this.vm(a,false,b)};Da.prototype.Jj=function(a,b){return this.vm(a,true,b)};Da.prototype.vm=function(a,b,c){if(a==null){a=ra()}else if(this.ck){a=a.getDataRoot?a.getDataRoot():ra()}if(this.za==
0&&b){return a}else if(this.za==0&&!b){return new rb([a])}else if(this.za==1){if(b){return a.pa(this.Y,c)}else{var d=a.pa(this.Y);if(d&&d.yc()){return d.Ra()}else{return a.Ra(this.Y)}}}else{var e=a.pa(this.Y,c);if(e==null&&b){return null}else if(e==null&&!b){return new sd}return this.Cq().vm(e,b,c)}};Da.prototype.Zv=false;Da.prototype.Nf=[];Da.prototype.za=null;Da.prototype.Y=null;Da.prototype.Cr=null;Da.prototype.Qy=false;Da.prototype.Ty=false;Da.prototype.Oy=false;Da.prototype.Ny=false;Da.prototype.Py=
false;Da.prototype.om=null;var Sa=function(a){var b=dg[a];if(b==null){b=new Da(a);dg[a]=b}return b},Uh=function(a,b,c,d){var e=a||b.join("/"),f=dg[e];if(f==null){f=new Da;f.Ks(e,b,c,d);dg[e]=f}return f},dg={},ns=Sa("."),ks=Sa("*|text()"),ls=Sa("*"),js=Sa("@*"),os=Sa("name()"),ms=Sa("count()"),ps=Sa("position()");var Qc=function(a,b){if(!a){throw Error("Cannot create a fast data node without a data name");}this["__dataName"]=a;this["__parent"]=b};Qc.prototype.ca=function(){return this["__dataName"]};Qc.prototype.Sf=function(a){this["__dataName"]=a};Qc.prototype.na=function(){var a;if(this["__parent"]){a=this["__parent"].na()+"/"}else{a=""}return a+this.ca()};var Ea=function(a,b,c){Qc.call(this,b,c);this.Zp(a)};Ea.D(Qc);Ea.prototype.Zp=function(a){for(var b in a){this[b]=a[b]}};var We=function(a,b,c){if(Ja(a)){return new Za(a,
b,c)}else if(Rb(a)){return new Ea(a,b,c)}else{return new Dc(a,b,c)}},hq=new sd;Ea.prototype.J=function(a){throw"Not implemented yet";};Ea.prototype.Ra=function(a){if(!a||a=="*"){return this}else if(a.indexOf("*")==-1){throw Error("Getting child nodes with selectors is not supported, yet.");}else{throw Error("Unsupported selector: "+a);}};Ea.prototype.qt=function(a){var b=this[a];if(b!=null&&!b.ca){this[a]=We(this[a],a,this)}};Ea.prototype.pa=function(a,b){this.qt(a);var c=this[a]||null;if(c==null&&
b){c=new Ea({},a,this);this[a]=c}return c};Ea.prototype.Sc=function(a,b){if(b!=null){this[a]=b}else{delete this[a]}ra().hb(this.na()+"/"+a)};Ea.prototype.Ya=function(a){var b=this[a];if(b!=null){return b.ca?b.get():b}else{return null}};Ea.prototype.yc=function(){return false};Ea.prototype.uf=function(){var a={};for(var b in this){if(!Vc(b,"__")&&!be(this[b])){a[b]=this[b]["__dataName"]?this[b].uf():this[b]}}return a};Ea.prototype.fa=function(){return We(this.uf(),this.ca())};Ea.prototype.add=function(a){this.Sc(a.ca(),
a)};Ea.prototype.get=function(a){if(arguments.length==0){return this}else{return this.pa(a)}};Ea.prototype.fe=function(a){var b=0;for(var c in this){if(!Vc(c,"__")&&!be(this[c])){if(b==a){this.qt(c);return this[c]}++b}}return null};Ea.prototype.La=function(){var a=0;for(var b in this){if(!Vc(b,"__")&&!be(this[b])){++a}}return a};Ea.prototype.af=function(a,b){this.Sc(a,b)};Ea.prototype.removeNode=function(a){delete this[a]};var Dc=function(a,b,c){this.Ae=a;Qc.call(this,b,c)};Dc.D(Qc);Dc.prototype.get=
function(){return this.Ae};Dc.prototype.J=function(a){if(Ja(a)||Rb(a)){throw"can only set PrimitiveFastDataNode to primitive values";}this.Ae=a;ra().hb(this.na())};Dc.prototype.Ra=function(){return hq};Dc.prototype.pa=function(a){return null};Dc.prototype.Ya=function(a){return null};Dc.prototype.Sc=function(a,b){throw Error("Cannot set a child node for a PrimitiveFastDataNode");};Dc.prototype.yc=function(){return false};Dc.prototype.uf=function(){return this.Ae};var Za=function(a,b,c){this.mb=[];
for(var d=0;d<a.length;++d){var e=a[d].id||"["+d+"]";this.mb.push(We(a[d],e,this));if(a[d].id){if(!this.$){this.$={}}this.$[a[d].id]=d}}Qc.call(this,b,c)};Za.D(Qc);Za.prototype.J=function(a){throw Error("Cannot set a FastListNode to a new value");};Za.prototype.Ra=function(){return this};Za.prototype.pa=function(a,b){var c=this.Hj(a);if(c==null&&this.$){c=this.$[a]}if(c!=null&&this.mb[c]){return this.mb[c]}else if(b){this.Sc(a,{});return this.pa(a)}else{return null}};Za.prototype.Ya=function(a){var b=
this.pa(a);return b?b.get():null};Za.prototype.Hj=function(a){if(a.charAt(0)=="["&&a.charAt(a.length-1)=="]"){return Number(a.substring(1,a.length-1))}else{return null}};Za.prototype.Sc=function(a,b){var c=this.mb.length;if(b!=null){if(!b.ca){b=We(b,a,this)}var d=this.Hj(a);if(d!=null){if(d<0||d>=this.mb.length){throw Error("List index out of bounds: "+d);}this.mb[a]=b}else{if(!this.$){this.$={}}this.mb.push(b);this.$[a]=this.mb.length-1}}else{this.removeNode(a)}var e=ra();e.hb(this.na()+"/"+a);if(this.mb.length!=
c){this.Xm()}};Za.prototype.Xm=function(){var a=ra();a.hb(this.na());a.hb(this.na()+"/count()")};Za.prototype.yc=function(){return true};Za.prototype.uf=function(){var a=[];for(var b=0;b<this.mb.length;++b){a.push(this.mb[b].uf())}return a};Za.prototype.add=function(a){if(!a.ca){a=We(a,String(this.mb.length),this)}this.mb.push(a);var b=ra();b.hb(this.na()+"/["+(this.mb.length-1)+"]");this.Xm()};Za.prototype.get=function(a){if(arguments.length==0){return this.mb}else{return this.pa(a)}};Za.prototype.fe=
function(a){var b=this.mb[a];return b!=null?b:null};Za.prototype.La=function(){return this.mb.length};Za.prototype.af=function(a,b){throw Error("Setting child nodes of a FastListNode is not implemented, yet");};Za.prototype.removeNode=function(a){var b=this.Hj(a);if(b==null&&this.$){b=this.$[a]}if(b!=null){this.mb.splice(b,1);if(this.$){var c=null;for(var d in this.$){if(this.$[d]==b){c=d}else if(this.$[d]>b){--this.$[d]}}if(c){delete this.$[c]}}var e=ra();e.hb(this.na()+"/["+b+"]");this.Xm()}};Za.prototype.indexOf=
function(a){var b=this.Hj(a);if(b==null&&this.$){b=this.$[a]}if(b==null){throw Error("Cannot determine index for: "+a);}return b};var fq=function(a,b){if(b&&!a){throw Error("Can't create document with namespace and no root tag");}if(document.implementation&&document.implementation.createDocument){return document.implementation.createDocument(b||"",a||"",null)}else if(typeof ActiveXObject!="undefined"){var c=new ActiveXObject("MSXML2.DOMDocument");if(c){if(a){c.appendChild(c.createNode(1,a,b||""))}return c}}throw Error("Your browser does not support creating new documents");},gq=function(a){if(typeof DOMParser!="undefined"){return(new DOMParser).parseFromString(a,
"application/xml")}else{var b=new ActiveXObject("MSXML2.DOMDocument");b.loadXML(a);return b}};var ql=function(){var a=Tq();if(a){return new ActiveXObject(a)}else{return new XMLHttpRequest}},ni=null,Tq=function(){if(!ni&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var b=0;b<a.length;b++){var c=a[b];try{new ActiveXObject(c);ni=c;return c}catch(d){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return ni};var lb=function(a,b,c){this.p=b;this.Jb=c||(a?a.nodeName:null);this.wB(a)};lb.prototype.wB=function(a){this.Dd=a;if(a!=null){switch(a.nodeType){case 2:case 3:this.Ae=a.nodeValue;break;case 1:if(a.childNodes.length==1&&a.firstChild.nodeType==3){this.Ae=a.firstChild.nodeValue}}}};lb.prototype.mf=function(){if(this.zb){return}var a=new rb;if(this.Dd!=null){var b=this.Dd.childNodes;for(var c=0,d;d=b[c];c++){if(d.nodeType!=3||!iq(d.nodeValue)){var e=new lb(d,this,d.nodeName);a.add(e)}}}this.zb=a};lb.prototype.ow=
function(){if(this.Gv){return}var a=new rb;if(this.Dd!=null&&this.Dd.attributes!=null){var b=this.Dd.attributes;for(var c=0,d;d=b[c];c++){var e=new lb(d,this,d.nodeName);a.add(e)}}this.Gv=a};lb.prototype.get=function(){this.mf();return this.Ae!=null?this.Ae:this.zb};lb.prototype.J=function(a){throw Error("Can't set on XmlDataSource yet");};lb.prototype.Ra=function(a){if(a&&a=="@*"){this.ow();return this.Gv}else if(a==null||a=="*"){this.mf();return this.zb}else{throw new Error("Unsupported selector");
}};lb.prototype.pa=function(a){if(Vc(a,"@")){var b=this.Dd.getAttributeNode(a.substring(1));return b?new lb(b,this):null}else{return this.Ra().get(a)}};lb.prototype.Ya=function(a){if(Vc(a,"@")){var b=this.Dd.getAttributeNode(a.substring(1));return b?b.nodeValue:null}else{var b=this.pa(a);return b?b.get():null}};lb.prototype.ca=function(){return this.Jb};lb.prototype.Sf=function(a){this.Jb=a};lb.prototype.na=function(){var a="";if(this.p){a=this.p.na()+(this.Jb.indexOf("[")!=-1?"":"/")}return a+this.Jb};
lb.prototype.ua=function(){};var iq=function(a){return/^[\r\n\t ]*$/.test(a)},Vh=function(){return fq("nothing")},Ye=function(a,b){lb.call(this,null,null,b);if(a){this.Aa=new F(a)}else{this.Aa=null}};Ye.D(lb);Ye.prototype.mc=Xe;Ye.prototype.ua=function(){if(this.Aa){sb.info("Sending XML request for DataSource "+this.ca()+" to "+this.Aa);this.mc="LOADING";this.GD=new Vd(this.Aa,da(this.Xk,this),da(this.Tw,this))}else{this.Dd=Vh();this.mc=Xe}};Ye.prototype.Xk=function(){sb.info("Got data for DataSource "+
this.ca());var a=this.GD.Qx(),b=a.responseXML;if(b&&!b.hasChildNodes()&&Rb(a.responseText)){b=gq(a.responseText)}if(!b||!b.hasChildNodes()){this.mc="FAILED";this.Dd=Vh()}else{this.mc="LOADED";this.Dd=b.documentElement}if(this.ca()){ra().hb(this.ca())}};Ye.prototype.Tw=function(){sb.info("Data retrieve failed for DataSource "+this.ca());this.mc="FAILED";this.Dd=Vh();if(this.ca()){ra().hb(this.ca())}};var Vd=function(a,b,c){this.ah=null;this.ZD=b;this.Qz=c||this.ey;this.Aa=new F(a);this.jz()};Vd.prototype.jz=
function(){this.ah=new ql;if(this.ah){try{this.ah.onreadystatechange=da(this.xk,this);this.ah.open("GET",String(this.Aa),true);this.ah.send(null)}catch(a){this.Qz.call(this)}}};Vd.prototype.xk=function(){var a=this.ah,b=a.readyState;if(b==4){var c=a.status,d;if(c==200||c==0){d=da(this.wk,this)}else{d=da(this.uk,this)}window.setTimeout(d,10)}};Vd.prototype.wk=function(){this.ZD(this)};Vd.prototype.uk=function(){this.Qz(this)};Vd.prototype.ey=function(){throw Error("Error fetching data from URL: "+
this.Aa);};Vd.prototype.Qx=function(){return this.ah};var de="complete";;var rc=function(){};rc.prototype.im=false;rc.prototype.Ab=function(){return this.im};rc.prototype.j=function(){if(!this.im){this.im=true}};var Ec={},Ab={},Yk="on",$e="_",n=function(a,b,c,d,e){if(Ja(b)){for(var f=0;f<b.length;f++){n(a,b[f],c,d,e)}return null}var g=Yd(b),h=Ze(a,g,c,d,e);if(h in Ec){return h}var i=$a(a);if(!(i in Ab)){Ab[i]={};Ab[i].Qa=0}if(!(g in Ab[i])){Ab[i].Qa++;Ab[i][g]=[]}Ab[i][g].push(h);var j=oq(a,h,b);Ec[h]=new Uk(c,j,a,b,d,e);if(b instanceof Xd){b.Jl(Ec[h])}else{if(a.addEventListener){if(a==E||!a.Dp){a.addEventListener(b,j,d)}}else if(a.attachEvent){a.attachEvent(Yk+b,j)}else{throw Error("Object {"+a+"} does not support event listeners.");
}}return h},D=function(a,b,c,d,e){if(Ja(b)){for(var f=0;f<b.length;f++){D(a,b[f],c,d,e)}return null}var g=Ze(a,b,c,d,e);return Bb(g)},Bb=function(a){if(!(a in Ec)){return false}var b=Ec[a],c=b.src,d=b.type,e=b.proxy;if(d instanceof Xd){d.nn(b)}else{if(c.removeEventListener){if(c==E||!c.Dp){c.removeEventListener(d,e,b.capture)}}else if(c.detachEvent){c.detachEvent(Yk+d,e)}}delete Ec[a];var f=Yd(d),g=$a(c),h=Ab[g],i=h[f];od(i,a);if(i.length==0){h.Qa--;delete h[f]}if(h.Qa==0){delete Ab[g]}return true},
Zk=function(a,b,c){var d=0;if(a){var e=nq(a,b,c);for(var f=0;f<e.length;f++){var g=e[f];if(g){Bb(Ze(g.src,g.type,g.listener,g.capture,g.handler));d++}}}else{for(var h in Ec){Bb(h);d++}}return d},nq=function(a,b,c){var d=$a(a),e=[];if(d in Ab){var f=Ab[d];if(b){var g=Yd(b);if(b in f){Xk(e,f[g],c)}}else{for(var h in f){Xk(e,f[h],c)}}}return e},Yd=function(a){return a instanceof Xd?$a(a):a},Xk=function(a,b,c){var d=!Q(c);for(var e=0;e<b.length;e++){var f=b[e],g=Ec[f];if(d||g.capture==c){a.push(g)}}},
pq=function(a,b,c){var d=$a(a);if(d in Ab){var e=Yd(b);if(e in Ab[d]){return Ab[d][e]}}return null},ka="click",na="mousedown",zb="mouseup",Sc="mouseover",Ob="mouseout",ac="mousemove",ud="keypress",sc="keydown",kq=A?"focusin":"DOMFocusIn",jq,lq,qq=function(a,b,c){var d=Ec[a];if(!d){return undefined}if(!d.src.addEventListener&&!sq(d)){return undefined}if(!c&&window.event||c&&tq(c)){var e=new Wd(c||window.event,this);try{e.stopPropagation();e.Pf=false;var f,g=false;if(Yh){f=[]}else{f=uq;f.length=0;g=
true;Yh=true}for(var h=e.currentTarget;h;h=h.parentNode){f.push(h)}var i=true;for(var j=f.length-1;!e.Pf&&j>=0;j--){e.currentTarget=f[j];i&=eg(f[j],b,true,e)}for(var j=0;!e.Pf&&j<f.length;j++){e.currentTarget=f[j];i&=eg(f[j],b,false,e)}if(g){Yh=false}return i}finally{e.j()}}else if(c&&rq(c)){var l=new Wd(c,this);try{return Xh(d,l)}finally{l.j()}}else{return Xh(d,c)}},oq=function(a,b,c){return function(d){return qq.call(a,b,c,d)}},uq=[],Yh=false,sq=function(a){var b=Yd(a.type),c=Ze(a.src,a.type,a.listener,
a.capture,a.handler),d=$a(a.src);return Ab[d][b][0]==c},eg=function(a,b,c,d){var e=1,f=pq(a,b,c);for(var g=0;f&&g<f.length;g++){var h=Ec[f[g]];if(h.capture==c){e&=Xh(h,d)!==false}}return Boolean(e)},Xh=function(a,b){return a.ie.call(a,b)},mq=[],Ze=function(a,b,c,d,e){if(A){var f=mq;f[0]=$a(a);f[1]=Yd(b);f[2]=$a(c);f[3]=d?"1":"0";f[4]=e?$a(e):"";return f.join($e)}else{return $a(a)+$e+Yd(b)+$e+$a(c)+$e+Boolean(d)+$e+(e?$a(e):"")}},rq=function(a){return Rb(a)&&/event/i.test(a)},tq=function(a){return A&&
Rb(a)&&Q(a.srcElement)&&Q(a.cancelBubble)&&Q(a.type)};var Xd=function(){};Xd.prototype.Jl=function(a){throw Error("Not implemented");};Xd.prototype.nn=function(a){throw Error("Not implemented");};var ja=function(a,b){this.type=a;this.target=b;this.currentTarget=this.target};ja.D(rc);ja.prototype.Pf=false;ja.prototype.yi=true;ja.prototype.stopPropagation=function(){this.Pf=true};ja.prototype.preventDefault=function(){this.yi=false};var Wd=function(a,b){this.type=a.type;this.timestamp=new Date;this.target=a.target||a.srcElement;this.currentTarget=b;this.relatedTarget=null;if(Q(a.relatedTarget)){this.relatedTarget=a.relatedTarget}else if(this.type==Sc){this.relatedTarget=a.fromElement}else if(this.type==Ob){this.relatedTarget=a.toElement}this.offsetX=Q(a.layerX)?a.layerX:a.offsetX;this.offsetY=Q(a.layerY)?a.layerY:a.offsetY;this.clientX=Q(a.clientX)?a.clientX:a.pageX;this.clientY=Q(a.clientY)?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(this.type==ud?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.qf=a};Wd.D(ja);Wd.prototype.stopPropagation=function(){this.Pf=true;if(this.qf.stopPropagation){this.qf.stopPropagation()}else{this.qf.cancelBubble=true}};Wd.prototype.preventDefault=function(){this.yi=false;if(!this.qf.preventDefault){this.qf.returnValue=false}else{this.qf.preventDefault()}};
Wd.prototype.ix=function(){return this.qf};Wd.prototype.j=function(){if(!this.Ab()){ja.prototype.j.call(this);this.qf=null}};var Uk=function(a,b,c,d,e,f){if(be(a)){this.Ry=true}else if(a&&typeof a.ie=="function"){this.Ry=false}else{throw Error("Invalid listener argument");}this.listener=a;this.proxy=b;this.src=c;this.type=d;this.capture=!(!e);this.handler=f};Uk.prototype.ie=function(a){if(this.Ry){return this.listener.call(this.handler||this.src,a)}return this.listener.ie.call(this.listener,a)};var O=function(){};O.D(rc);O.prototype.Vh=function(){return null};O.prototype.addEventListener=function(a,b,c,d){n(this,a,b,c,d)};O.prototype.removeEventListener=function(a,b,c,d){D(this,a,b,c,d)};O.prototype.dispatchEvent=function(a){if(ab(a)){a=new ja(a,this)}else if(!(a instanceof ja)){var b=a;a=new ja(a.type,this);pl(a,b)}else{a.target=a.target||this}var c=[];for(var d=this;d;d=d.Vh()){c.push(d)}var e=1;for(var f=c.length-1;!a.Pf&&f>=0;f--){a.currentTarget=c[f];e&=eg(c[f],a.type,true,a)&&a.yi!=
false}for(var f=0;!a.Pf&&f<c.length;f++){a.currentTarget=c[f];e&=eg(c[f],a.type,false,a)&&a.yi!=false}return Boolean(e)};O.prototype.j=function(){if(!this.Ab()){rc.prototype.j.call(this);Zk(this)}};O.prototype.Dp=true;var Mq=function(a){if(a==""){return false}a=a.replace(/"(\\.|[^"\\])*"/g,"");return a==""||!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(a)},Nq=function(a){a=String(a);if(typeof a.parseJSON=="function"){return a.parseJSON()}if(Mq(a)){try{return eval("("+a+")")}catch(b){}}throw Error("Invalid JSON string: "+a);},ll=function(a,b){switch(typeof a){case "string":kl(a,b);break;case "number":Pq(a,b);break;case "boolean":b.push(a);break;case "undefined":b.push("null");break;case "object":if(a==null){b.push("null");
break}if(Ja(a)){Oq(a,b);break}Qq(a,b);break;default:throw Error("Unknown type: "+typeof a);}},ki={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},kl=function(a,b){b.push('"',a.replace(/[\\\"\x00-\x1f\x80-\uffff]/g,function(c){if(c in ki){return ki[c]}var d=c.charCodeAt(0),e="\\u";if(d<16){e+="000"}else if(d<256){e+="00"}else if(d<4096){e+="0"}return ki[c]=e+d.toString(16)}),'"')},Pq=function(a,b){b.push(isFinite(a)&&!isNaN(a)?a:"null")},
Oq=function(a,b){var c=a.length;b.push("[");var d="";for(var e=0;e<c;e++){b.push(d);ll(a[e],b);d=","}b.push("]")},Qq=function(a,b){b.push("{");var c="";for(var d in a){b.push(c);kl(d,b);b.push(":");ll(a[d],b);c=","}b.push("}")};var T=function(){O.call(this);this.headers=new oa;this.Hr=Mk("goog.net.XhrLite");this.headers.J("Content-type","application/x-www-form-urlencoded;charset=utf-8")};T.D(O);var ye=function(a,b,c,d,e){var f=new T;if(b){n(f,de,b)}n(f,"ready",f.j,false,f);f.send(a,c,d,e)};T.prototype.Yc=false;T.prototype.ha=null;T.prototype.ik="";T.prototype.Ar="";T.prototype.li=0;T.prototype.Rm="";T.prototype.Ji=0;T.prototype.fc=null;T.prototype.HB=function(a){this.Ji=Math.max(0,a)};T.prototype.send=function(a,b,c,d){if(this.Yc){throw Error("[goog.net.XhrLite] Object is active with another request");
}var e=b||"GET";this.ik=a;this.Rm="";this.li=0;this.Ar=e;this.Yc=true;this.ha=new ql;this.ha.onreadystatechange=this.xk.bind(this);try{this.vb("Opening Xhr");this.ha.open(e,a,true)}catch(f){this.vb("Error opening Xhr: "+f.message);this.Up(5,f);return}var g=c?String(c):"";if(e=="POST"){this.ha.setRequestHeader("Content-Length",g.length)}var h=this.headers.fa();if(d){ec(d,function(i,j){h.J(j,i)})}ec(h,function(i,j){this.ha.setRequestHeader(j,i)},this);try{if(this.fc){E.clearTimeout(this.fc);this.fc=
null}if(this.Ji>0){this.vb("Will abort after "+this.Ji+"ms if incomplete");this.fc=E.setTimeout(da(this.dl,this),this.Ji)}this.vb("Sending request");this.ha.send(g)}catch(f){this.vb("Send error: "+f.message);this.Up(5,f)}};T.prototype.dl=function(){if(typeof Dh=="undefined"){}else if(this.ha){this.vb("Timed out after "+this.Ji+"ms, aborting");this.li=8;this.dispatchEvent("timeout");this.abort()}};T.prototype.Up=function(a,b){this.Yc=false;this.ha.abort();this.Rm=b;this.li=a;this.dispatchEvent(de);
this.dispatchEvent("error");this.hj()};T.prototype.abort=function(a){if(this.ha){this.vb("Aborting");this.Yc=false;this.ha.abort();this.li=a||7;this.dispatchEvent(de);this.dispatchEvent("abort");this.hj()}};T.prototype.j=function(){if(!this.Ab()){if(this.ha){this.Yc=false;this.ha.abort();this.hj()}T.sa.j.call(this)}};T.prototype.xk=function(){if(!this.Yc){return}if(typeof Dh=="undefined"){}else if(A&&this.Lj()==4&&this.Xh()==2){this.vb("Local request error detected and ignored")}else{this.dispatchEvent("readystatechange");
if(this.xc()){this.vb("Request complete");this.Yc=false;if(this.ji()){this.dispatchEvent(de);this.dispatchEvent("success")}else{this.li=6;this.Rm=this.Kq()+" ["+this.Xh()+"]";this.dispatchEvent(de);this.dispatchEvent("error")}this.hj()}}};T.prototype.hj=function(){if(this.ha){this.ha.onreadystatechange=A?Uq:null;this.ha=null;if(this.fc){E.clearTimeout(this.fc);this.fc=null}this.dispatchEvent("ready")}};T.prototype.Nm=function(){return this.Yc};T.prototype.xc=function(){return this.Lj()==4};T.prototype.ji=
function(){switch(this.Xh()){case 0:case 200:case 304:return true;default:return false}};T.prototype.Lj=function(){return this.ha?this.ha.readyState:0};T.prototype.Xh=function(){try{return this.Lj()>2?this.ha.status:-1}catch(a){this.Hr.$n("Can not get status: "+a.message);return-1}};T.prototype.Kq=function(){try{return this.Lj()>2?this.ha.statusText:""}catch(a){this.Hr.bq("Can not get status: "+a.message);return""}};T.prototype.um=function(){return this.ik};T.prototype.vf=function(){return this.ha?
this.ha.responseText:""};T.prototype.Gq=function(){return this.ha?this.ha.responseXML:null};T.prototype.ym=function(){return this.ha?Nq(this.ha.responseText):undefined};T.prototype.getResponseHeader=function(a){return this.ha&&this.xc()?this.ha.getResponseHeader(a):undefined};T.prototype.um=function(){return this.ik};T.prototype.vb=function(a){this.Hr.bq(a+" ["+this.Ar+" "+this.ik+" "+this.Xh()+"]")};var Ta=function(a,b,c){this.p=c;this.Jb=b;this.Js(a)};Ta.prototype.Js=function(a){this.Y=a;this.zb=null};Ta.prototype.get=function(){return!Rb(this.Y)?this.Y:this.Ra()};Ta.prototype.J=function(a){if(a&&Rb(this.Y)){throw Error("Can't set group nodes to new values yet");}if(this.p){this.p.Y[this.Jb]=a}this.Y=a;this.zb=null;ra().hb(this.na())};Ta.prototype.Ra=function(a){if(!this.Y){return new sd}if(!a||a=="*"){this.mf(false);return this.zb}else if(a.indexOf("*")==-1){if(this.Y[a]!=null){return new rb([this.pa(a)])}else{return new sd}}else{throw new Error("Selector not supported yet ("+
a+")");}};Ta.prototype.mf=function(a){if(this.zb&&!a){return}if(!Rb(this.Y)){this.zb=new sd;return}var b=new rb;if(this.Y!=null){var c;if(Ja(this.Y)){var d=this.Y.length;for(var e=0;e<d;e++){var f=this.Y[e],g=f.id,h=g!=null?String(g):"["+e+"]";c=new Ta(f,h,this);b.add(c)}}else{for(var h in this.Y){var i=this.Y[h];if(i.ca){b.add(i)}else if(!be(i)){c=new Ta(i,h,this);b.add(c)}}}}this.zb=b};Ta.prototype.pa=function(a,b){if(!this.Y){return null}var c=this.Ra().get(a);if(!c&&b){var d={};if(Ja(this.Y)){d["id"]=
a;this.Y.push(d)}else{this.Y[a]=d}c=new Ta(d,a,this);if(this.zb){this.zb.add(c)}}return c};Ta.prototype.Ya=function(a){if(this.zb){var b=this.Ra().get(a);return b?b.get():null}else if(this.Y){return this.Y[a]}else{return null}};Ta.prototype.Sc=function(a,b){var c=null,d=null,e=false;if(b!=null){if(b.ca){d=b;d.p=this}else{if(Ja(b)||Rb(b)){d=new Ta(b,a,this)}else{d=new ve(this.Y,a,this)}}}if(Ja(this.Y)){this.mf();var f=this.zb.indexOf(a);if(b==null){var g=this.zb.get(a);if(g){c=g.na()}this.Y.splice(f,
1)}else{if(f){this.Y[f]=b}else{this.Y.push(b)}}if(f==null){e=true}this.zb.af(a,d)}else if(Rb(this.Y)){if(b==null){this.mf();var g=this.zb.get(a);if(g){c=g.na()}delete this.Y[a]}else{if(!this.Y[a]){e=true}this.Y[a]=b}if(this.zb){this.zb.af(a,d)}}var h=ra();if(d){h.hb(d.na());if(e&&this.yc()){h.hb(this.na());h.hb(this.na()+"/count()")}}else if(c){h.hb(c);if(this.yc()){h.hb(this.na());h.hb(this.na()+"/count()")}}return d};Ta.prototype.ca=function(){return this.Jb};Ta.prototype.Sf=function(a){this.Jb=
a};Ta.prototype.na=function(){var a="";if(this.p){a=this.p.na()+"/"}return a+this.Jb};Ta.prototype.ua=function(){};Ta.prototype.yc=function(){return this.xD!=null?this.xD:Ja(this.Y)};var ve=function(a,b,c){Rc.call(this);this.Jb=b;this.p=a;this.aE=c||this.p};ve.D(Rc);ve.prototype.get=function(){return this.p[this.Jb]};ve.prototype.J=function(a){var b=this.p[this.Jb];this.p[this.Jb]=a;if(b!=a){ra().hb(this.na())}};ve.prototype.ca=function(){return this.Jb};ve.prototype.Wh=function(){return this.aE};
var td=function(a,b){Ta.call(this,null,b,null);if(a){this.Aa=new F(a)}else{this.Aa=null}};td.D(Ta);td.prototype.mc=Xe;td["dataSources"]={};td.prototype.ua=function(){if(this.Aa){td["dataSources"][this.Jb]=this;sb.info("Sending JS request for DataSource "+this.ca()+" to "+this.Aa);this.mc="LOADING";var a=new F(this.Aa);a.xB("callback","JsonReceive."+this.Jb);E["JsonReceive"][this.Jb]=da(this.BA,this);var b=q("script");b.src=a;b.onload=da(this.wk,this);b.onreadystatechange=da(this.Uz,this);Wp("head")[0].appendChild(b)}else{this.Y=
{};this.mc=Xe}};td.prototype.Uz=function(a){};td.prototype.wk=function(a){};td.prototype.BA=function(a){this.Js(a);this.mc="LOADED";ra().hb(this.ca())};E["JsonReceive"]={};var Ud=function(a,b,c,d,e){Ea.call(this,{},b,null);if(a){this.Aa=new F(a);this.ha=new T;this.PE=!(!e);n(this.ha,de,this.kw,false,this)}else{this.Aa=null}this.Wk=c;this.mm=d};Ud.D(Ea);Ud.prototype.Wk=null;Ud.prototype.mm=null;Ud.prototype.ua=function(){sb.info("Sending JS request for DataSource "+this.ca()+" to "+this.Aa);if(this.Aa){if(this.PE){var a=this.Aa.xm(),b=this.Aa.fa();b.Pk(null);this.ha.send(b,"POST",a)}else{this.ha.send(this.Aa)}}else{this.mc=Xe}};Ud.prototype.Xk=function(){ra().hb(this.ca())};
Ud.prototype.kw=function(a){if(this.ha.ji()){sb.info("Got data for DataSource "+this.ca());var b=this.ha.vf();if(this.Wk){var c=b.indexOf(this.Wk);b=b.substring(c+this.Wk.length)}if(this.mm){var d=b.lastIndexOf(this.mm);b=b.substring(0,d)}try{var e=eval("["+b+"][0]");this.Zp(e);this.mc="LOADED"}catch(f){this.mc="FAILED";sb.QB("Failed to parse data: "+f.message)}E.setTimeout(da(this.Xk,this),0)}else{sb.info("Data retrieve failed for DataSource "+this.ca());this.mc="FAILED"}};;var Qb=function(a,b,c,d){O.call(this);if(!Ja(a)||!Ja(b)){throw Error("Start and end parameters must be arrays");return}if(a.length!=b.length){throw Error("Start and end points must be the same length");return}this.Vk=a;this.jD=b;this.Qp=c;this.kv=d;this.og=[]};Qb.D(O);Qb.prototype.qe=0;Qb.prototype.hq=0;Qb.prototype.Qc=0;Qb.prototype.jh=null;Qb.prototype.Tp=null;Qb.prototype.Sm=null;Qb.prototype.pc=null;Qb.prototype.play=function(a){if(a||this.qe==0){this.Qc=0;this.og=this.Vk}else if(this.qe==1){return false}E.clearTimeout(this.pc);
this.jh=(new Date).valueOf();if(this.qe==-1){this.jh-=this.Qp*this.Qc}this.Tp=this.jh+this.Qp;this.Sm=this.jh;if(this.Qc==0){this.Ge("begin")}this.Ge("play");if(this.qe==-1){this.Ge("resume")}this.qe=1;this.Ep();return true};Qb.prototype.stop=function(a){E.clearTimeout(this.pc);this.qe=0;if(a)this.Qc=1;this.Vn(this.Qc);this.Ge("stop");this.Ge("end")};Qb.prototype.Ep=function(){E.clearTimeout(this.pc);var a=(new Date).valueOf();this.Qc=(a-this.jh)/(this.Tp-this.jh);if(this.Qc>=1)this.Qc=1;this.hq=
1000/(a-this.Sm);this.Sm=a;if(be(this.kv)){this.Vn(this.kv(this.Qc))}else{this.Vn(this.Qc)}if(this.Qc==1){this.qe=0;this.Ge("finish");this.Ge("end")}else if(this.qe==1){this.Ge("animate");var b=this.Ep.bind(this);this.pc=E.setTimeout(b,20)}};Qb.prototype.Vn=function(a){this.og=new Array(this.Vk.length);for(var b=0;b<this.Vk.length;b++){this.og[b]=(this.jD[b]-this.Vk[b])*a+this.Vk[b]}};Qb.prototype.Ge=function(a){this.dispatchEvent(new il(a,this))};var il=function(a,b){ja.call(this,a);this.coords=
b.og;this.x=b.og[0];this.y=b.og[1];this.z=b.og[2];this.duration=b.Qp;this.progress=b.Qc;this.fps=b.hq;this.state=b.qe;this.anim=b};il.D(ja);var I=function(a){O.call(this);this.V=a||Ph()};I.D(O);var tr=0,og="Component already rendered",Hl="Unable to set parent component";I.prototype.Da=null;I.prototype.V=null;I.prototype.Mc=false;I.prototype.b=null;I.prototype.Nb=null;I.prototype.p=null;I.prototype.Wb=null;I.prototype.kf=null;I.prototype.ot=null;I.prototype.dd=function(){return this.Da||(this.Da=this.Fx())};I.prototype.ge=function(){return"goog.ui.Component"};I.prototype.Va=function(){return this.b};I.prototype.Gs=function(a){if(this==
a){throw Error(Hl);}if(a&&this.p&&this.p.kq(this.Da)){throw Error(Hl);}this.p=a};I.prototype.he=function(){return this.p};I.prototype.Vh=function(){return this.p};I.prototype.Ef=function(){return this.Mc};I.prototype.ea=function(){this.b=this.V.createElement("div")};I.prototype.Ec=function(a){this.Rc(a)};I.prototype.Rc=function(a,b){if(this.Mc){throw Error(og);}if(!this.b){this.ea()}if(a){a.insertBefore(this.b,b||null)}else{this.V.wd().body.appendChild(this.b)}if(!this.p||this.p.Ef()){this.Mb()}};
I.prototype.Gh=function(a){if(this.Mc){throw Error(og);}else if(a&&this.gj(a)){this.ot=true;this.Lc(a);this.Mb()}else{throw Error("Invalid element to decorate");}};I.prototype.gj=function(a){return true};I.prototype.Lc=function(a){this.b=a};I.prototype.Mb=function(){this.Mc=true;this.qm(function(a){if(a.Va()){a.Mb()}})};I.prototype.Zb=function(){this.qm(function(a){if(a.Ef()){a.Zb()}});this.Mc=false};I.prototype.j=function(){if(!this.Ab()){I.sa.j.call(this);if(this.Mc){this.Zb()}this.qm(function(a){a.j()});
if(!this.ot&&this.b){z(this.b)}this.Wb=null;this.kf=null;this.b=null;this.Nb=null;this.p=null}};I.prototype.tB=function(a){this.Nb=a};I.prototype.Fx=function(){return this.ge()+"."+tr++};I.prototype.Xo=function(a,b){this.nv(a,this.Fj(),b)};I.prototype.nv=function(a,b,c){if(a.Mc&&(c||!this.Mc)){throw Error(og);}if(b<0||b>this.Fj()){throw Error("Child component index out of bounds");}a.Gs(this);if(!this.kf||!this.Wb){this.kf={};this.Wb=[]}Vq(this.kf,a.dd(),a);Gp(this.Wb,a,b);if(c){var d=this.Bg(b+1);
a.Rc(this.b,d?d.b:null)}else{if(this.Mc&&!a.Mc&&a.b){a.Mb()}}};I.prototype.Fj=function(){return this.Wb?this.Wb.length:0};I.prototype.kq=function(a){return this.kf?Yq(this.kf,a)||null:null};I.prototype.Bg=function(a){return this.Wb?this.Wb[a]||null:null};I.prototype.qm=function(a,b){if(this.Wb){Ue(this.Wb,a,b)}};I.prototype.gr=function(a){return this.Wb?re(this.Wb,a):-1};I.prototype.removeChild=function(a,b){if(a){var c=ab(a)?a:a.dd();a=this.kq(c);if(c&&a){oi(this.kf,c);od(this.Wb,a);a.Gs(null);if(b){a.Zb();
if(a.b){z(a.b)}}}}if(!a){throw Error("Child is not in parent component");}return a};var uc=function(a,b,c){this.target=a;this.handle=b||a;this.Ke=true;this.uj=false;this.limits=c||new vd;this.bd=this.target.ownerDocument||this.target.document;this.screenX=0;this.screenY=0;this.deltaX=0;this.deltaY=0;n(this.handle,na,this.Gb,true,this);n(this.bd,ac,this.Rg,false,this);n(this.bd,zb,this.vg,false,this)};uc.D(O);uc.prototype.Rh=function(){return this.Ke};uc.prototype.j=function(){if(this.Ab())return;O.prototype.j.call(this);D(this.handle,na,this.Gb,true,this);D(this.bd,ac,this.Rg,false,
this);D(this.bd,zb,this.vg,false,this);delete this.target;delete this.handle};uc.prototype.Gb=function(a){if(this.Ke&&!this.uj){var b=this.dispatchEvent(new df("start",this,a.clientX,a.clientY));if(b!==false){this.screenX=a.screenX;this.screenY=a.screenY;this.deltaX=this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.uj=true;a.preventDefault()}}};uc.prototype.vg=function(a){if(this.uj){this.uj=false;var b=this.Dr(this.deltaX),c=this.Er(this.deltaY);this.dispatchEvent(new df("end",this,a.clientX,
a.clientY,b,c))}};uc.prototype.Rg=function(a){if(this.uj&&this.Ke){var b=a.screenX-this.screenX,c=a.screenY-this.screenY;this.deltaX+=b;this.deltaY+=c;var d=this.Dr(this.deltaX),e=this.Er(this.deltaY);this.screenX=a.screenX;this.screenY=a.screenY;var f=this.dispatchEvent(new df("beforedrag",this,a.clientX,a.clientY,d,e));if(f!==false){this.Bw(d,e);this.dispatchEvent(new df("drag",this,a.clientX,a.clientY,d,e));a.preventDefault()}}};uc.prototype.Dr=function(a){var b=this.limits,c=typeof b.left!="undefined"?
b.left:null,d=typeof b.width!="undefined"?b.width:0,e=c!=null?c+d:Infinity,f=c!=null?c:-Infinity;return Math.min(e,Math.max(f,a))};uc.prototype.Er=function(a){var b=this.limits,c=typeof b.top!="undefined"?b.top:null,d=typeof b.height!="undefined"?b.height:0,e=c!=null?c+d:Infinity,f=c!=null?c:-Infinity;return Math.min(e,Math.max(f,a))};uc.prototype.Bw=function(a,b){this.target.style.left=a+"px";this.target.style.top=b+"px"};var df=function(a,b,c,d,e,f){ja.call(this,a);this.type=a;this.clientX=c;this.clientY=
d;this.left=Q(e)?e:b.deltaX;this.top=Q(f)?f:b.deltaY;this.dragger=b};df.D(ja);var J=function(a,b,c){I.call(this,c);this.ba=a||"modal-dialog";this.lt=!(!b);this.od=Il};J.D(I);J.prototype.ba=null;J.prototype.lt=false;J.prototype.Lf=0.3;J.prototype.Vf="";J.prototype.ng="";J.prototype.od=null;J.prototype.la=false;J.prototype.nd=null;J.prototype.Jc=null;J.prototype.Uc=null;J.prototype.Md=null;J.prototype.ve=null;J.prototype.ic=null;J.prototype.Ub=null;J.prototype.ge=function(){return"goog.ui.Dialog"};J.prototype.IB=function(a){this.Vf=a;if(this.Md){W(this.Md,a)}};J.prototype.dB=
function(a){this.ng=a;if(this.ic){this.ic.innerHTML=a}};J.prototype.nq=function(){if(!this.Ef()){this.Ec()}return this.ic};J.prototype.ea=function(){if(this.lt){this.Jc=this.V.ea("iframe",{frameborder:0,style:"border: 0",className:this.ba+"-bg"});u(this.Jc,false);wd(this.Jc,0)}this.nd=this.V.ea("div",{className:this.ba+"-bg"});wd(this.nd,this.Lf);u(this.nd,false);this.b=this.V.ea("div",{className:this.ba},this.Uc=this.V.ea("div",{className:this.ba+"-title"},this.Md=this.V.ea("span",{className:this.ba+
"-title-text"},this.Vf),this.ve=this.V.ea("span",{className:this.ba+"-title-close"})),this.ic=this.V.ea("div",{className:this.ba+"-content"}),this.Ub=this.V.ea("div",{className:this.ba+"-buttons"}));if(this.ng){this.ic.innerHTML=this.ng}u(this.b,false);if(this.od){this.od.Ql(this.Ub)}};J.prototype.Ec=function(a){if(this.Ef()){throw Error(og);}if(!this.b){this.ea()}var b=a||this.V.wd().body;if(this.Jc){b.appendChild(this.Jc)}b.appendChild(this.nd);J.sa.Ec.call(this,b)};J.prototype.gj=function(a){return a&&
a.tagName&&a.tagName=="DIV"&&J.sa.gj.call(this,a)};J.prototype.Lc=function(a){this.b=a;fa(this.b,this.ba);var b=this.ba+"-content";this.ic=Ve(this.b,function(g){return g.nodeType==1&&qd(g,b)});if(this.ic){this.ng=this.ic.innerHTML}else{this.ic=this.V.ea("div",{className:b});if(this.ng){this.ic.innerHTML=this.ng}this.b.appendChild(this.ic)}var c=this.ba+"-title",d=this.ba+"-title-text",e=this.ba+"-title-close";this.Uc=Ve(this.b,function(g){return g.nodeType==1&&qd(g,c)});if(this.Uc){this.Md=Ve(this.Uc,
function(g){return g.nodeType==1&&qd(g,d)});this.ve=Ve(this.Uc,function(g){return g.nodeType==1&&qd(g,e)})}else{this.Uc=this.V.ea("div",{className:c});this.b.insertBefore(this.Uc,this.ic)}if(this.Md){this.Vf=Rh(this.Md)}else{this.Md=this.V.ea("span",{className:d},this.Vf);this.Uc.appendChild(this.Md)}if(!this.ve){this.ve=this.V.ea("span",{className:e},this.Vf);this.Uc.appendChild(this.ve)}var f=this.ba+"-buttons";this.Ub=Ve(this.b,function(g){return g.nodeType==1&&qd(g,f)});if(this.Ub){this.od=new bb(this.V);
this.od.Gh(this.Ub)}else{this.Ub=this.V.ea("div",{className:f});this.b.appendChild(this.Ub);if(this.od){this.od.Ql(this.Ub)}}};J.prototype.Mb=function(){J.sa.Mb.call(this);this.cd=new uc(this.b,this.Uc);n(this.ve,ka,this.Wr,false,this);n(this.Ub,ka,this.Rr,false,this)};J.prototype.Zb=function(){D(this.ve,ka,this.Wr,this);D(this.Ub,ka,this.Rr,this);if(this.$a()){this.da(false)}if(this.cd){this.cd.j();this.cd=null}J.sa.Zb.call(this)};J.prototype.da=function(a){if(a==this.la){return}var b=this.V.wd(),
c=fc?window:bg(b)||window;if(!this.Ef()){this.Ec(b.body)}if(a){this.qs();this.kb();n(b,sc,this.Ob,true,this);n(c,"resize",this.qi,true,this)}else{D(b,sc,this.Ob,true,this);D(c,"resize",this.qi,true,this)}if(this.Jc){u(this.Jc,a)}u(this.nd,a);u(this.b,a);if(a&&this.Ph().rq()){var d=this.Ub.getElementsByTagName("button");for(var e=0,f;f=d[e];e++){if(f.name==this.Ph().rq()){f.focus();break}}}this.la=a};J.prototype.$a=function(){return this.la};J.prototype.qs=function(){if(this.Jc){u(this.Jc,false)}u(this.nd,
false);var a=this.V.wd(),b=bg(a)||window,c=Cc(b),d=a.body.scrollWidth,e=Math.max(a.body.scrollHeight,c.height);if(this.Jc){u(this.Jc,true);wc(this.Jc,d,e)}u(this.nd,true);wc(this.nd,d,e);var f=ta(this.b);this.cd.limits=new vd(0,0,d-f.width,e-f.height)};J.prototype.kb=function(){var a=this.V.wd(),b=bg(a)||window,c=Rk(b),d=c.x,e=c.y,f=ta(this.b),g=Cc(b),h=Math.max(d+g.width/2-f.width/2,0),i=Math.max(e+g.height/2-f.height/2,0);gf(this.b,h,i)};J.prototype.Wr=function(a){var b=this.Ph(),c=b.Ej();if(c){var d=
b.get(c);if(this.dispatchEvent(new pg(c,d))){this.da(false)}}else{this.da(false)}};J.prototype.j=function(){if(!this.Ab()){J.sa.j.call(this);z(this.Ub);z(this.ic);z(this.ve);z(this.Md);z(this.Uc);z(this.nd);this.nd=null;this.b=null;this.Uc=null;this.Md=null;this.ve=null;this.ic=null;this.Ub=null}};J.prototype.tn=function(a){this.od=a;if(this.Ub){this.od.Ql(this.Ub)}};J.prototype.Ph=function(){return this.od};J.prototype.Rr=function(a){if(a.target.tagName=="BUTTON"){var b=a.target.name,c=this.Ph().get(b);
if(this.dispatchEvent(new pg(b,c))){this.da(false)}}};J.prototype.Ob=function(a){if(a.keyCode==27){var b=this.Ph();if(b.Ej()){var c=b.get(b.Ej());if(this.dispatchEvent(new pg(b.Ej(),c))){this.da(false)}}else{this.da(false)}}};J.prototype.qi=function(a){this.qs()};var pg=function(a,b){this.type="dialogselect";this.key=a;this.caption=b};pg.D(ja);var bb=function(a){this.V=a||Ph();oa.call(this)},Il,vr,wr,ur;bb.D(oa);bb.prototype.Gp=null;bb.prototype.b=null;bb.prototype.jp=null;bb.prototype.J=function(a,
b,c,d){oa.prototype.J.call(this,a,b);if(c){this.Gp=a}if(d){this.jp=a}};bb.prototype.Ql=function(a){this.b=a;this.Ec()};bb.prototype.Ec=function(){if(this.b){this.b.innerHTML="";ec(this,function(a,b){this.b.appendChild(this.V.ea("button",{name:b},a))},this)}};bb.prototype.Gh=function(a){if(!a||a.nodeType!=1){return}this.b=a;var b=this.b.getElementsByTagName("button");for(var c=0,d,e,f;d=b[c];c++){e=d.name||d.id;f=Rh(d)||d.value;if(e){this.J(e,f,c==0,d.name=="cancel")}}};bb.prototype.rq=function(){return this.Gp};
bb.prototype.Ej=function(){return this.jp};(function(){var a=xe("OK"),b=xe("Cancel"),c=xe("Yes"),d=xe("No"),e=xe("Save"),f=xe("Continue"),g=new bb;g.J("ok",a,true);g.J("cancel",b,false,true);Il=g;var h=new bb;h.J("yes",c,true);h.J("no",d,false,true);vr=h;var i=new bb;i.J("yes",c);i.J("no",d,true);i.J("cancel",b,false,true);wr=i;var j=new bb;j.J("continue",f);j.J("save",e);j.J("cancel",b,true,true);ur=j})();var ce=function(a,b){if(a instanceof ce){this.Vd=a.gC()}else if(ae(a)&&Sq(a)){this.Vd=Ep(a)}else if(a instanceof Fc){this.Vd=ol(a.width,a.height)}else if(ji(a)&&ji(b)&&a>0&&b>0){this.Vd=ol(a,b)}else{throw Error("Invalid argument(s) for Matrix contructor");}this.za=new Fc(this.Vd.length,this.Vd[0].length)},ol=function(a,b){var c=[];for(var d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++){c[d][e]=0}}return c},Sq=function(a){var b=0;for(var c=0;c<a.length;c++){if(!ae(a[c])||b>0&&a[c].length!=b){return false}for(var d=
0;d<a[c].length;d++){if(!ji(a[c][d])){return false}}if(b==0){b=a[c].length}}return b!=0},Rq=function(a,b,c){for(var d=0;d<a.getSize().width;d++){for(var e=0;e<a.getSize().height;e++){b.call(c,a.Zx(d,e),d,e,a)}}};ce.prototype.Vd=null;ce.prototype.za=null;ce.prototype.getSize=function(){return this.za};ce.prototype.Zx=function(a,b){if(a<0||a>=this.za.width||b<0||b>this.za.height){return null}return this.Vd[a][b]};ce.prototype.gC=function(){return this.Vd};ce.prototype.toString=function(){var a=0;Rq(this,
function(c){var d=String(c).length;if(d>a){a=d}});var b=[];Ue(this.Vd,function(c,d){b.push("[ ");Ue(c,function(e,f){e=String(e);b.push(ir(" ",a-e.length)+e+" ")});b.push("]\n")});return b.join("")};var hc=function(a,b){var c=b||window;if(a==Tl){this.bt="ParentStub"+Number(new Date);this.Yg="ChildStub"}else{this.bt="ChildStub";this.Yg=this.Kx();this.Mf=c.opener||c.parent;if(this.Yg&&!this.Mf[this.Yg]){var d=0;while(this.Mf&&!this.Mf[this.Yg]&&d<10){this.Mf=this.Mf.parent;d++}}c[Oi]=this}c[this.bt]=this.ZB.bind(this);this.Pa=a};hc.D(O);var Pr=function(a){var b=a||window;return b[Oi]};hc.prototype.bB=function(a){this.Mf=a};var Tl="Parent",Sl="Child",Oi="__topLevelProxy__";hc.prototype.type=null;
hc.prototype.Kx=function(){var a=new F(document.location.href);return a.sb("eventCallback")};hc.prototype.Lq=function(){return this.bt};hc.prototype.sj=function(a){return this.yA(a)};hc.prototype.yA=function(a){if(this.Mf[this.Yg]){return this.Mf[this.Yg](a)}else{return true}};hc.prototype.ZB=function(a){var b=O.prototype.dispatchEvent.call(this,a);return b};var Pi=function(){};Pi.D(O);Pi.prototype.Hs=function(a){this.jE=a};Pi.prototype.dispatchEvent=function(a){if(this.jE.sj(a)){O.prototype.dispatchEvent.call(this,a)}};var Ib=function(a){hc.call(this,Tl,a||window)};Ib.D(hc);var Ul=null,Sr=function(a){switch(a){case "NONE":return"0";case "THIN":return"1px solid black";case "OUTSET":return"2px outset black"}};Ib.prototype.Zd=function(a,b,c){};Ib.prototype.show=function(){};Ib.prototype.hide=function(){};Ib.prototype.j=function(){};var Wr=function(a,b){var c=new F(Ur()+"/ui/"+a),d=new F(document.location.href);if(d.sb("js")){c.ya("js",d.sb("js"))}c.ya("js","RAW");if(b){ec(b,function(e,f){if(e!=null){c.ya(f,e)}})}return c},
Ur=function(){if(Ul){return Ul}else if(E["manifest"]){return E["manifest"]["serverBase"]}else{return""}},Tr=0,Vr=function(){return"hosted-"+Tr++ +"-"+Number(new Date)};var Jc=function(a){Ib.call(this,a)};Jc.D(Ib);var Rr=function(a,b,c,d){var e=Vr(),f=se(e);if(!f){var g=new Gb(d?Mb(d):document);f=g.ea("iframe",{id:e});if(d){Ka(d,"overflow","hidden")}Ka(f,"display","block");Ka(f,"backgroundColor","#FFF");Ka(f,"border",Sr(c));Ka(f,"margin","0");Ka(f,"padding","0");Ka(f,"overflow","hidden");wc(f,a,b)}return f};Jc.prototype.Zd=function(a,b,c){this.Aa=Wr(a,b);this.KC=b["border"];this.la=!(b["hide"]=="true");this.zz=b["mock"];this.Zf=b["x"]||20;this.$f=b["y"]||20;this.Vc=
b["width"]||600;this.yd=b["height"]||480;this.ND=b["maximize"]=="true";this.Bk=c;var d=Rr(this.Vc,this.yd,this.KC,this.Bk);if(!this.zz){this.Aa.ya("eventCallback",this.Lq());this.Aa.ya("js","RAW");d.src=this.Aa.toString()}this.nm(d);if(this.zz){new hc(Sl,d.contentWindow);d.contentWindow[Oi].Yg=this.Lq()}this.bB(d.contentWindow)};Jc.prototype.nm=function(a){this.Ne=a;if(this.Bk){this.Bk.appendChild(a);this.tC()}else{a.style.position="absolute";document.body.appendChild(a);xd(a,this.Zf,this.$f)}if(!this.la){a.style.display=
"none"}};Jc.prototype.tC=function(){if(this.Bk&&this.ND){var a=ta(this.Bk);wc(this.Ne,a)}};Jc.prototype.show=function(){this.sj("PRESHOW");this.Ne.style.display="block";this.sj("SHOW")};Jc.prototype.hide=function(){this.Ne.style.display="none"};Jc.prototype.j=function(){if(this.Ne!=null){this.Ne.parentNode.removeChild(this.Ne);this.Ne=null}Ib.prototype.j.call(this)};var nf=function(a){Jc.call(this,a)};nf.D(Jc);nf.prototype.nm=function(a){if(yd){fa(document.body,"background")}var b=new J;b.nq().appendChild(a);b.tn(new bb);b.da(this.la);this.fm=b;this.Ne=a};nf.prototype.show=function(){this.fm.da(true)};nf.prototype.hide=function(){this.fm.da(false)};nf.prototype.j=function(){this.fm.j();qa(document.body,"background");this.fm=null;this.Ne=null;Jc.prototype.j.call(this)};var Db=function(){this.Ap={}};Db.prototype.Ap=null;var Ni=null,Or=function(){if(!Ni){Ni=new Db}return Ni};Db.prototype.pq=function(a){return this.Ap[a]};Db.prototype.create=function(a,b,c){var d=this.pq(a);if(d){if(b){b=k(b)}return d(b,c,a)}};Db.prototype.yp=function(a){var b=this.pq(a);if(b){var c={},d=(new F(document.location.href)).xm();ec(d,function(g,h){c[h]=g});var e=new hc(Sl),f=b(document.body,c,a);if(f.Hs){f.Hs(e)}}};Db.prototype.Tl=function(a){var b=a||document.body,c=b.getAttribute("g:type");
if(c){var d={},e=b.attributes;for(var f=0;f<e.length;f++){var g=e[f].name;if(Vc(g,"g:")){d[g.substring(2)]=e[f].value}}this.create(c,b,d)}var h=b.childNodes.length;for(var f=0;f<h;f++){var i=b.childNodes[f];if(i.nodeType==1){this.Tl(i)}}};Db.prototype.cq=function(a){var b=Pr();if(b){if(ab(a)){a=new ja(a)}return b.sj(a)}else{return true}};var Qr=function(){fg("Xuit",Or());Tc(Db.prototype,"buildUi",Db.prototype.Tl);Tc(Db.prototype,"create",Db.prototype.create);Tc(Db.prototype,"createAsFullPage",Db.prototype.yp);Tc(Db.prototype,"fireHostedEvent",Db.prototype.cq);Tc(Ib.prototype,"hide",Ib.prototype.hide);Tc(Ib.prototype,"show",Ib.prototype.show);Tc(Ib.prototype,"dispose",Ib.prototype.j)};Qr();var tb={},Pb=function(){this.Kv="..";this.ss={};this.pt={};this.Pi={};this.jr={};this.oD={};this.TE={}},bc=function(){if(!di){di=new Pb}return di},di=null;Pb.prototype.FB=function(a,b,c){a=new F(a);if(b&&c){if(!this.Pi[b]){this.Pi[b]={}}this.Pi[b][c]=a}else if(b){this.pt[b]=a}else if(c){this.ss[c]=a}else{this.Kv=a}};Pb.prototype.Oj=function(a,b){if(this.Pi[a]&&this.Pi[a][b]){return this.Pi[a][b]}else if(this.pt[a]){return this.pt[a]}else if(this.ss[b]){return this.ss[b]}else{return this.Kv}};Pb.prototype.ep=
function(a,b,c){var d=this.jr[a];if(d&&d.Wd){d.Wd(b,c);return true}var e=this.oD[a];if(e&&e.Wd){e.Wd(b,c);return true}return false};Pb.prototype.Ie=function(a,b,c){var d=this.jr[a];if(d&&d.Ie){d.Ie(b,c);return true}return false};Pb.prototype.ug=function(a,b,c){var d=this.jr[a];if(d&&d.ug){d.ug(b,c);return true}return false};var Fq=0;Pb.prototype.rw=function(a,b,c,d){if(Hi&&yd){fa(document.body,"background")}var e=this.sw(a,b),f=new J;f.nq().appendChild(e);f.tn(new bb);f.da(true);e.src=this.uw(a,c,
d);this.TE[a]=f;return e.contentWindow};Pb.prototype.sw=function(a,b){var c=a+"-iframe",d=se(c);if(!d){d=Ia("iframe",{id:c});Ka(d,"display","block");Ka(d,"backgroundColor","#FFF");Ka(d,"border","2px outset black");wc(d,b.width,b.height)}return d};Pb.prototype.uw=function(a,b,c){var d=new F(this.Oj()+"/ui/"+a);if(c){var e="UiWidgetCallback"+Fq++;E[e]=c;d.ya("done",e)}d.ya("js","RAW");d.ya("pop","TRUE");if(b){ec(b,function(f,g){if(f!=null){d.ya(g,f)}})}return d};Pb.prototype.bp=function(a){var b=a||
document;for(var c=b.firstChild;c;c=c.nextSibling){this.bp(c)}if(b.getAttribute){var d=b.getAttribute("gtype");if(d){var e={};for(var f=0;f<b.attributes.length;f++){var g=b.attributes[f];e[g.name]=g.value}var h=this.ep(d,b,e);if(!h){this.Ie(d,b,e)}}}};var gl=0;Pb.prototype.hm=function(a,b,c,d,e){var f=e||document,g=f.createElement("div");g.style.position="absolute";g.style.zIndex=40;g.id="UiWidget"+gl++;f.body.appendChild(g);xd(g,b.x,b.y);if(c){wc(g,c.width,c.height)}this.Ie(a,g,d);return g.id};Pb.prototype.hm=
function(a,b,c,d,e){var f=e||document,g=f.createElement("div");g.style.position="absolute";g.style.zIndex=40;g.id="UiWidget"+gl++;f.body.appendChild(g);xd(g,b.x,b.y);if(c){wc(g,c.width,c.height)}this.Ie(a,g,d);return g.id};Pb.prototype.Qw=function(a,b){var c=b||document,d=c.getElementById(a);if(d){d.parentNode.removeChild(d)}};window["UI_setServerBase"]=function(a,b,c){bc().FB(a,b,c)};window["UI_getServerBase"]=function(a,b){bc().Oj(a,b)};window["UI_attachAndDisplayAllWidgets"]=function(a){bc().bp(a)};
window["UI_attachWidget"]=function(a,b,c){bc().ep(a,b,c)};window["UI_displayInline"]=function(a,b,c){bc().Ie(a,b,c)};window["UI_displayIframe"]=function(a,b){bc().ug(a,b)};var $d=function(a){this.P=a;this.BE=100;this.fE=1000;n(a,["input","propertychange"],this.Xq,false,this);n(a,ud,this.hy,false,this);n(a,sc,this.gy,false,this);var b=["focus",ka,"blur"];n(a,b,this.iy,false,this)};$d.yz(O.prototype);$d.prototype.hy=function(a){E.setTimeout(this.Xq.bind(this),0);if(!this.dispatchEvent(a)){a.preventDefault()}};$d.prototype.gy=function(a){var b=a.keyCode,c=null;if(b==40){c="DOWN_ARROW"}else if(b==38){c="UP_ARROW"}else if(b==13){c="ENTER"}else if(b==27){c="ESCAPE"}else if(b==
9){c="TAB"}if(c){var d=this.dispatchEvent(c);if(!d){a.preventDefault()}}};$d.prototype.iy=function(a){this.dispatchEvent(a)};$d.prototype.Xq=function(a){var b=this.P.defaulted?"":this.P.value;if(b!=this.CD){this.Lp("VALUE",b);if(this.VB){E.clearTimeout(this.VB)}this.VB=E.setTimeout(this.op.bind(this,"STABLE_VALUE",b),this.BE);if(this.bA){E.clearTimeout(this.bA)}this.bA=E.setTimeout(this.op.bind(this,"PAUSED_VALUE",b),this.fE);this.CD=b}};$d.prototype.op=function(a,b){var c=this.P.defaulted?"":this.P.value;
if(c==b){this.Lp(a,b)}};$d.prototype.Lp=function(a,b){var c=new ja(a);c.value=b;this.dispatchEvent(c)};var ei=function(a,b,c,d){var e=a.split("."),f=d||E,g=f,h=e.length;for(var i=0;i<h-1;i++){if(!g[e[i]]){g[e[i]]={}}g=g[e[i]]}g[e[h-1]]=b;if(c){f[c]=b}},Zh=function(a){this.je=a;this.Jz=-1};Zh.prototype.show=function(a,b){this.Jz=a;this.bk();if(!b){this.Rc()}};Zh.prototype.bk=function(){if(!this.Df){E.setTimeout(da(this.Rc,this),0)}this.Df=true};Zh.prototype.Rc=function(a){if(this.Df){for(var b=0;b<
this.je.length;b++){var c=this.je[b],d=se(c);if(this.Jz==c){this.OF=c;d.style.display="block"}else{d.style.display="none"}}this.Df=false}};var Hq=function(a,b){if(a.value==""||a.value==b||a.value==a.defaultText){a.defaulted=true;a.value=b;fa(a,"input-default")}a.defaultText=b;n(a,"focus",function(){if(a.defaulted){a.value="";qa(a,"input-default");a.defaulted=false}});n(a,"blur",Gq.bind(null,a));n(a,ud,function(c){if(c.keyCode==27){a.value=""}})},Gq=function(a){if(a.value==""&&!a.defaulted){a.defaulted=
true;a.value=a.defaultText;fa(a,"input-default")}},Aq=function(a,b,c){if(a){this.Cf=a;this.By=b||a.getAttribute("icon");if(this.By){this.g=Ia("div",{className:this.Cf.className});this.Cf.className="inner";this.I=q("img");this.I.src=this.By;this.I.style.verticalAlign="bottom";this.g.appendChild(this.I);this.I.style.display="none";if(A){this.I.style.verticalAlign="top"}a.parentNode.replaceChild(this.g,a);this.g.appendChild(a);this.Cf.style.border="0px";this.Cf.style.padding="0px";this.Cf.style.paddingLeft=
"4px";this.g.style.verticalAlign="top";this.Cf.style.whiteSpace="nowrap";this.Cf.style.width="80%";var d=A?0:gi(this.g)-4;this.g.style.height=ta(this.g).height-d+"px";this.g.style.overflow="hidden";n(this.I,"load",this.Ay,false,this)}this.Hh=c||a.getAttribute("defaultText");if(this.Hh){Hq(this.Cf,this.Hh)}}};Aq.prototype.Ay=function(){this.I.style.display="inline"};var af=function(a,b){this.P=a;if(a==null){return}this.lm=b?tb.BooleanExpr.create(b):null;if(this.lm){var c=da(this.ct,this);ec(this.lm.getDataDeps(),
function(h){ra().addListener(c,h.Ys)});this.ct()}if(A){var d=ta(a);a.style.width=String(d.width*0.77)+"px";var e=Number(a.currentStyle.paddingTop.split("px")[0]),f=Number(a.currentStyle.paddingBottom.split("px")[0]);a.style.paddingTop=String(e+2)+"px";var g=f>=2?f-2:0;a.style.paddingBottom=String(g)+"px"}n(a,na,da(this.qA,this));n(a,zb,da(this.hs,this));n(a,Ob,da(this.sz,this));n(a,Sc,da(this.rC,this));n(a,ka,da(this.hs,this))};af.prototype.qA=function(a){fa(a.target,"presubmit");a.target.rA=true};
af.prototype.hs=function(a){qa(a.target,"presubmit");a.target.rA=false};af.prototype.sz=function(a){qa(a.target,"presubmit")};af.prototype.rC=function(a){if(a.target.rA){fa(a.target,"presubmit")}};af.prototype.ct=function(){if(this.lm){this.P.disabled=!this.lm.tb()}};var ii=function(a,b){this.ac=a;this.Fp=b||"$LastMessage";this.PD=Sa(this.Fp+"/Message");this.NE=Sa(this.Fp+"/Level");ra().addListener(da(this.bk,this),this.Fp+"/...");this.Df=false};ii.prototype.bk=function(){if(!this.Df){E.setTimeout(da(this.Rc,
this),0)}this.Df=true};ii.prototype.Rc=function(){if(this.Df){var a=this.PD.tb();if(a==null){qa(this.ac,"error");qa(this.ac,"info");this.ac.innerHTML=""}else{var b=this.NE.tb();if(b==tb.UserMessages.Level.INFO){fa(this.ac,"info");qa(this.ac,"error")}else{fa(this.ac,"error");qa(this.ac,"info")}fa(this.ac,"hilite");if(a.length<150){this.ac.innerHTML=ga(a)}else{var c=Ia("div",{style:"display:none; position:absolute; background-color:white;padding:8px; border:1px dashed #AAA;text-decoration: none"});
c.innerHTML=ga(a).replace(/\n/g,"<br/>");var d=Ia("a",{href:"#"});n(d,ka,function(){if(c.style.display=="block"){c.style.display="none"}else{c.style.display="block"}});d.innerHTML="Details";this.ac.innerHTML="";this.ac.appendChild(document.createTextNode("Operation failed. Please try again in a moment. "));this.ac.appendChild(d);this.ac.appendChild(c);var e=pa(this.ac),f=ta(this.ac),g=ta(c);gf(c,e.x+f.width-g.width,e.y+f.height)}E.setTimeout(da(this.pA,this),1000)}this.Df=false}};ii.prototype.pA=
function(){qa(this.ac,"hilite")};var kg=function(a,b,c,d,e){this.P=k(a);this.nf=Sa(b);this.XC=c;this.Hh=d||this.P.getAttribute("defaultText");this.vz=e;if(this.vz){this.P["maxLength"]=this.vz}ra().addListener(da(this.nj,this),b);n(this.P,"change",this.Kh,false,this);if(this.XC){n(this.P,"keyup",this.Kh,false,this)}var f=this.nf.tb();if(f){this.P.value=f}if(this.Hh){n(this.P,"blur",this.Wl,false,this);n(this.P,"focus",this.Rz,false,this);this.Wl()}};kg.prototype.nj=function(){if(!this.$j){var a=this.nf.tb();
this.Yj=true;this.P.value=a?a:"";this.Yj=false;this.rj=false;if(this.Hh){this.Wl()}}};kg.prototype.Kh=function(){if(!this.Yj){var a=this.P.value||null;this.$j=true;var b=this.nf.he().Jj(null,true);b.Sc(this.nf.Cr,a);this.$j=false}};kg.prototype.Wl=function(){if(this.P.value==""&&!this.rj){this.rj=true;fa(this.P,"input-default");this.P.value=this.Hh}else{qa(this.P,"input-default");this.rj=false}};kg.prototype.Rz=function(){if(this.rj){this.P.value="";qa(this.P,"input-default");this.rj=false}};var el=
function(a,b,c){this.P=k(a);this.nf=Sa(b);var d=this.nf.tb();if(c){this.cF=c;ec(c.$b(),function(g,h){var i=q("option");i.value=h;i.text=g;this.P.options[this.P.options.length++]=i})}for(var e=0;e<this.P.options.length;e++){var f=this.P.options[e];if(d==f.value){f.selected=true}}ra().addListener(da(this.nj,this),b);n(this.P,"change",this.Kh,false,this)};el.prototype.nj=function(){if(!this.$j){var a=this.nf.tb();this.Yj=true;this.P.value=a?a:"";this.Yj=false}};el.prototype.Kh=function(){if(!this.Yj){var a=
this.P.value||null;this.$j=true;tb.ContactUtil.setData(this.nf.Ys,a);this.$j=false}};var yq=function(a,b){this.Da=a;this.mF=b};yq.prototype.dd=function(){return this.id};var xq=function(a){this.mb=a||{};this.SE=new oa(this.mb)};xq.prototype.$b=function(){return this.SE};var Dq=function(a){for(var b=a.firstChild;b;b=b.nextSibling){Dq(b)}if(a.nodeType==1&&a.getAttribute("maximize")=="true"){a.style.width="1px";a.style.height="1px"}},Eq=function(a){var b;if(a.nodeType==1&&a.getAttribute("maximize")==
"true"&&a.nodeName!="TR"){var c,d;if(a.parentNode.nodeName=="BODY"){var e=Cc();c=e.width;d=e.height}else{var f=a.parentNode;c=a.parentNode.offsetWidth-fi(f);if(!A){c-=fi(a)}d=a.parentNode.offsetHeight-gi(f)}Iq(a,c);hi(a,d);if(a.offsetHeight>d){hi(a,2*d-a.offsetHeight)}if(a.nodeName=="TABLE"){var g=null,h=0,i;for(var i=0;i<a.rows.length;i++){var j=a.rows[i];if(j.getAttribute("maximize")=="true"){g=j;g.style.height="100%"}}if(g){for(var i=0;i<a.rows.length;i++){var j=a.rows[i];if(j!=g){h+=j.offsetHeight}}hi(g,
d-h-2);g.style.width=""}}}for(b=a.firstChild;b;b=b.nextSibling){Eq(b)}},hi=function(a,b){b=b<0?0:b;a.style.height=b+"px"},Iq=function(a,b){b=b<0?0:b;a.style.width=b+"px"},fi=function(a){return cc(a,"paddingLeft")+cc(a,"paddingRight")+cc(a,"marginLeft")+cc(a,"marginRight")+cc(a,"borderLeftWidth")+cc(a,"borderRightWidth")},gi=function(a){return cc(a,"paddingTop")+cc(a,"paddingBottom")+cc(a,"marginTop")+cc(a,"marginBottom")+cc(a,"borderTopWidth")+cc(a,"borderBottomWidth")},cc=function(a,b){var c=Mb(a),
d;if(c.defaultView&&c.defaultView.getComputedStyle){var e=c.defaultView.getComputedStyle(a,"");if(e){d=e[b]}}if(!d){d=a.currentStyle?a.currentStyle[b]:a.style[b]}if(dc(d,"px")){return Number(d.substring(0,d.length-2))}else{return 0}};var eq=function(a,b){if(typeof a.selectionStart=="number"){a.selectionStart=b}else if(A){var c=Sh(a),d=c[0],e=c[1];if(!d.inRange(e)){return}var f=a.value,g=0,h=b;while(g!=-1&&g<h){g=f.indexOf("\r\n",g);if(g!=-1&&g<h){b--;g++}}d.collapse(true);d.move("character",b);d.select()}else{throw Error("Cannot set the selection start");}},Tk=function(a){if(typeof a.selectionStart=="number"){return a.selectionStart}if(A){var b=Sh(a),c=b[0],d=b[1];if(!c.inRange(d)){return-1}c.setEndPoint("EndToStart",d);return c.text.length}return-1},
dq=function(a,b){if(typeof a.selectionEnd=="number"){a.selectionEnd=b}else if(A){var c=Sh(a),d=c[0],e=c[1];if(!d.inRange(e)){return}e.collapse();e.moveEnd("character",b-Tk(a));e.select()}else{throw Error("Cannot set the selection end");}},cq=function(a,b){var c=a.ownerDocument||a.document;if(typeof a.selectionEnd=="number"&&typeof a.selectionStart=="number"){a.selectionStart=b;a.selectionEnd=b}else if(c.selection&&a.createTextRange){var d=a.createTextRange();d.collapse(true);d.move("character",b);
d.select()}},Sh=function(a){var b=a.ownerDocument||a.document,c=b.selection.createRange(),d;if(a.type=="textarea"){d=c.duplicate();d.moveToElementText(a)}else{d=a.createTextRange()}return[d,c]};var La=function(a,b,c){rc.call(this);this.uz=a;this.YA=c;this.Fk=b;n(b,["hilite","select",zi,"dismiss"],this);this.xe=null;this.aa=[];this.yf=-1;this.sf=0;this.wb=null;this.rg=null};La.D(rc);La.prototype.wz=10;var zi="canceldismiss";La.prototype.ie=function(a){if(a.target==this.Fk){switch(a.type){case "hilite":this.xf(a.row);break;case "select":this.Ik();break;case zi:this.Vl();break;case "dismiss":this.Kp();break}}};La.prototype.JB=function(a){if(this.xe==a){return}this.xe=a;this.uz.pn(this.xe,this.wz,
this.tz.bind(this));this.Vl()};La.prototype.GB=function(a){this.wb=a};La.prototype.sy=function(){if(this.yf>=this.sf&&this.yf<this.sf+this.aa.length-1){this.xf(this.yf+1);return true}return false};La.prototype.ty=function(){if(this.yf>this.sf){this.xf(this.yf-1);return true}return false};La.prototype.xf=function(a){if(this.uq(a)!=-1){this.yf=a;this.Fk.xf(a);return true}return false};La.prototype.Ik=function(){var a=this.uq(this.yf);if(a!=-1){this.YA.Jk(this.aa[a]);this.pf();return true}return false};
La.prototype.pf=function(){this.yf=-1;this.xe=null;this.sf+=this.aa.length;this.aa.length=0;window.clearTimeout(this.rg);this.rg=null;this.Fk.pf()};La.prototype.Kp=function(){if(!this.rg){this.rg=window.setTimeout(this.pf.bind(this),50)}};La.prototype.Vl=function(){window.setTimeout((function(){if(this.rg){window.clearTimeout(this.rg);this.rg=null}}).bind(this),10)};La.prototype.j=function(){if(!this.Ab()){La.sa.j.call(this);this.Fk.j();this.YA.j();this.uz=null}};La.prototype.tz=function(a,b){if(this.xe!=
a){return}this.sf+=this.aa.length;this.aa=b;var c=[];for(var d=0;d<b.length;++d){c.push({id:this.yx(d),data:b[d]})}this.Fk.IA(c,this.xe,this.wb);if(c.length!=0){this.xf(this.sf)}};La.prototype.uq=function(a){var b=a-this.sf;if(b<0||b>=this.aa.length){return-1}return b};La.prototype.yx=function(a){return this.sf+a};var ng=function(a,b){this.aa=a;this.QE=!b};ng.prototype.pn=function(a,b,c){var d=this.Px(a,b);if(d.length==0&&this.QE){d=this.Tx(a,b)}c(a,d)};ng.prototype.Px=function(a,b){var c=[];if(a!=""){var d=si(a),e=new RegExp("(^|\\W+)"+d,"i");or(this.aa,function(f){if(String(f).match(e)){c.push(f)}return c.length>=b})}return c};ng.prototype.Tx=function(a,b){var c=[];ec(this.aa,function(f){var g=a.toLowerCase(),h=String(f).toLowerCase(),i=0;if(h.indexOf(g)!=-1){i=parseInt(h.indexOf(g)/4,10)}else{var j=g.split(""),
l=-1,i=0,p=10;for(var s=0,y;y=j[s];s++){var t=h.indexOf(y);if(t>l){var B=t-l-1;if(B>p-5){B=p-5}i+=B;l=t}else{i+=p;p+=5}}}if(i<g.length*6){c.push({str:f,score:i})}});c.sort(function(f,g){return f.score-g.score});var d=[];for(var e=0;e<b&&e<c.length;e++){d.push(c[e].str)}return d};var Ma=function(a,b,c){this.eb=null;this.Sp=[];this.Ci=a||",;";this.eD=this.Ci.substring(0,1);this.ME=new RegExp("^[\\s"+this.Ci+"]+|[\\s"+this.Ci+"]+$","g");this.sE=new RegExp("s*["+this.Ci+"]$");this.fz=b||"";this.GE=50;this.ur=null;this.Cp=null;this.xw=0;this.tk=c!=null?c:true};Ma.D(rc);Ma.prototype.j=function(){if(!this.Ab()){Ma.sa.j.call(this);this.Gw.apply(this,this.Sp)}};Ma.prototype.Ol=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];this.Sp.push(b);n(b,ud,this.tr,false,this);
n(b,sc,this.sr,false,this);var c=["focus",ka];n(b,c,this.eq,false,this);n(b,"blur",this.hp,false,this)}};Ma.prototype.Gw=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];D(b,ud,this.tr,false,this);D(b,sc,this.sr,false,this);var c=["focus",ka];D(b,c,this.eq,false,this);D(b,"blur",this.hp,false,this);od(this.Sp,b)}};Ma.prototype.cp=function(a){this.eb=a};Ma.prototype.Jk=function(a){if(this.tk){var b=this.Cp,c=this.xw,d=this.Ln(b.value),e=d[c].replace(this.gt(d[c]),a.toString());if(!this.sE.test(e)){e=
kr(e)+this.eD+" "}d[c]=e;if(c!=0){d[c]=" "+e}b.value=d.join("");var f=0;for(var g=0;g<=c;g++){f+=d[g].length}b.focus();eq(b,f);dq(b,f)}else{this.Cp.value=a.toString()}};Ma.prototype.tr=function(a){var b=a.keyCode;if(this.Ci.indexOf(String.fromCharCode(a.charCode))!=-1){if(this.eb&&this.eb.Ik()&&this.tk){a.preventDefault()}}else if(b==13){if(this.eb&&this.eb.Ik()&&this.tk){a.preventDefault()}}else if(b!=40&&b!=38&&b!=27&&b!=9){this.Vr(a)}};Ma.prototype.sr=function(a){var b=a.keyCode;if(b==40){if(this.eb&&
this.eb.sy()){a.preventDefault()}}else if(b==38){if(this.eb&&this.eb.ty()){a.preventDefault()}}else if(b==9){E.clearTimeout(this.ur);this.Ul(a.currentTarget);if(this.eb&&this.eb.Ik()&&this.tk){a.preventDefault()}}else if(b==27){if(this.eb){this.eb.pf()}}else if(A&&(b==8||b==46)){this.Vr(a)}};Ma.prototype.Vr=function(a){E.clearTimeout(this.ur);this.ur=E.setTimeout(this.Ul.bind(this,a.currentTarget),this.GE)};Ma.prototype.eq=function(a){if(this.eb){this.eb.Vl()}this.Ul(a.currentTarget)};Ma.prototype.hp=
function(a){if(this.eb){this.eb.Kp()}};Ma.prototype.Ul=function(a){var b=Tk(a),c=this.aA(a.value,b);this.Cp=a;this.xw=this.Mq(a.value,b);if(this.eb){this.eb.GB(a);this.eb.JB(c)}};Ma.prototype.aA=function(a,b){return this.gt(this.Ln(a)[this.Mq(a,b)])};Ma.prototype.gt=function(a){return String(a).replace(this.ME,"")};Ma.prototype.Mq=function(a,b){var c=this.Ln(a),d=0;for(var e=0,f=0;e<c.length&&f<b;e++){f+=c[e].length;d=e}return d};Ma.prototype.Ln=function(a){if(!this.tk){return[a]}var b=String(a).split(""),
c=[],d=[];for(var e=0,f=false;e<b.length;e++){if(this.fz&&this.fz.indexOf(b[e])!=-1){if(!f){c.push(d.join(""));d.length=0}d.push(b[e]);f=!f}else if(!f&&this.Ci.indexOf(b[e])!=-1){d.push(b[e]);c.push(d.join(""));d.length=0}else{d.push(b[e])}}c.push(d.join(""));return c};var za=function(a,b,c){this.p=a||Oh().body;this.V=Ph(this.p);this.Ve=!a;this.b=null;this.xe="";this.aa=[];this.Hm=-1;this.la=false;this.className="ac-renderer";this.rowClassName="ac-row";this.activeClassName="active";this.Dh=b;this.oE=c!=null?c:false;this.qr=null;this.LE=false};za.D(O);za.prototype.IA=function(a,b,c){this.xe=b;this.aa=a;this.Hm=0;this.wb=c;this.Gk=[];this.redraw()};za.prototype.pf=function(){if(this.la){this.la=false;u(this.b,false)}};za.prototype.show=function(){if(!this.la){this.la=
true;u(this.b,true)}};za.prototype.$a=function(){return this.la};za.prototype.uy=function(a){if(a>=0&&a<this.b.childNodes.length){if(this.Hm>=0){qa(this.Gk[this.Hm],this.activeClassName)}fa(this.Gk[a],this.activeClassName);this.Hm=a}};za.prototype.xf=function(a){for(var b=0;b<this.aa.length;b++){if(this.aa[b].id==a){this.uy(b);return}}};za.prototype.sB=function(a){fa(a,this.className)};za.prototype.redraw=function(){if(!this.b){this.b=this.V.ea("div",{style:"display: none"});this.sB(this.b);this.V.appendChild(this.p,
this.b);n(this.b,ka,this.Pq,false,this);n(this.b,na,this.Tq,false,this);n(this.V.wd(),ka,this.Qq,false,this);n(this.b,Sc,this.Uq,false,this)}this.Gk.length=0;this.V.DA(this.b);if(this.Dh&&this.Dh.Ec){this.Dh.Ec(this,this.b,this.aa,this.xe)}else{ec(this.aa,function(e){this.V.appendChild(this.b,this.HA(e,this.xe))},this)}if(this.aa.length==0){this.pf();return}else{this.show()}this.vA(this.b);if(this.wb&&this.Ve){var a=pa(this.wb),b=ta(this.wb),c=ta(Sb()),d=ta(this.b);a.y=this.LE?a.y-d.height:a.y+b.height;
if((this.oE||a.x+d.width>c.width)&&this.qr!="LEFT"){a.x=a.x+b.width-d.width;this.qr="RIGHT"}else{this.qr="LEFT"}xd(this.b,a)}};za.prototype.j=function(){if(!this.Ab()){za.sa.j.call(this);if(this.b){D(this.b,ka,this.Pq,false,this);D(this.b,na,this.Tq,false,this);D(this.V.wd(),ka,this.Qq,false,this);D(this.b,Sc,this.Uq,false,this);this.V.removeNode(this.b);this.b=null}this.p=null}};za.prototype.vA=function(a){if(yd&&Hi){a.style.width="";a.style.overflow="visible";a.style.width=a.offsetWidth;a.style.overflow=
"auto"}};za.prototype.GA=function(a,b,c){c.innerHTML=ga(a.data.toString())};za.prototype.cr=function(a,b){if(a.nodeType==3){var c=a.nodeValue;b=si(b);var d=new RegExp("(.*?)(^|\\W+)("+b+")","gi"),e=[],f=0,g=d.exec(c);while(g){e.push(g[1]);e.push(g[2]);e.push(g[3]);f=d.lastIndex;g=d.exec(c)}e.push(c.substring(f));if(e.length>1){a.nodeValue=e[0]+e[1];var h=this.V.createElement("b");this.V.appendChild(h,this.V.createTextNode(e[2]));h=a.parentNode.insertBefore(h,a.nextSibling);for(var i=e.length-1;i>=
3;i--){a.parentNode.insertBefore(this.V.createTextNode(e[i]),h.nextSibling)}}}else{var j=a.firstChild;while(j){var l=j.nextSibling;this.cr(j,b);j=l}}};za.prototype.HA=function(a,b){var c=this.V.ea("div",{className:this.rowClassName});if(this.Dh&&this.Dh.os){this.Dh.os(a,b,c)}else{this.GA(a,b,c)}if(b){this.cr(c,b)}fa(c,this.rowClassName);this.Gk.push(c);return c};za.prototype.Hq=function(a){while(a&&a!=this.b&&!qd(a,this.rowClassName)){a=a.parentNode}return a?re(this.Gk,a):-1};za.prototype.Pq=function(a){var b=
this.Hq(a.target);if(b>=0){this.dispatchEvent({type:"select",row:this.aa[b].id})}a.stopPropagation()};za.prototype.Tq=function(a){this.dispatchEvent(zi);a.stopPropagation()};za.prototype.Qq=function(a){this.dispatchEvent("dismiss")};za.prototype.Uq=function(a){var b=this.Hq(a.target);if(b>=0){this.dispatchEvent({type:"hilite",row:this.aa[b].id})}};var sr=function(){};sr.prototype.Ec=function(a,b,c,d){};var rr=function(a,b,c,d){var e=new ng(a,!d),f=new za,g=new Ma(null,null,!(!c));La.call(this,e,f,g);g.cp(this);g.Ol(b)};rr.D(La);var bf=function(){this.hr=false;this.Yl=[];this.bF=[];this.Jg=null;this.ak=[];this.ay=[]},al=function(a){return Sa("Emails/[0]/Address").tb(a)||Sa("Email").tb(a)};bf.prototype.Bf=function(a,b,c,d,e){if(this.hr){sb.$n("Init already called");return}this.hr=true;var f=new F(b);f.ya("jsx","true");f.ya("out","js");var g=new Ud(f,"Contacts","&&&START&&&","&&&END&&&"),h=ra();h.pv(g,true);h.addListener(da(this.$x,this),"$Contacts");h.ua();var i=e?new fl:null,j=new za(null,i,d);this.Jg=new hg(",;",'"');var l=
new La(this,j,this.Jg);this.Jg.cp(l);if(a){this.rv(a)}};bf.prototype.rv=function(a){if(!this.hr){sb.$n("Init should be called first");return}if(Ja(a)){this.ak=this.ak.concat(a);for(var b=0;b<a.length;b++){this.Jg.Ol.call(this.Jg,a[b])}}else{this.ak.push(a);this.Jg.Ol.call(this.Jg,a)}};bf.prototype.pn=function(a,b,c){var d=[];if(a!=""){var e=si(a),f=f=new RegExp('(^|<| |")'+e,"i"),g=this.ay;for(var h=0;h<g.length&&d.length<b;++h){var i=g[h];if(i.getName().match(f)){d.push(i)}}g=this.Yl;for(var h=0;h<
g.length&&d.length<b;++h){var i=g[h];if(i.toString().match(f)){d.push(i)}}}c(a,d)};bf.prototype.$x=function(a,b){var c=ra().tm("$Contacts");sb.info("Got contacts");var d=c.pa("Body");if(!d){sb.info("No response body");return}var e=d.pa("Contacts");if(!e){sb.info("No contacts");return}var f=e.Ra(),g=f.La();sb.info("Got "+g+" contacts");if(g>0){for(var h=0;h<this.ak.length;h++){this.ak[h].setAttribute("autocomplete","off")}}var i=new oa;for(var h=0;h<g;h++){var j=f.fe(h),l=al(j);if(!l){continue}var p=
j.Ya("Name"),s=j.Ya("Groups");if(s!=null){var y=s.length;for(var t=0;t<y;t++){var B=i.get(s[t].id);if(B==null){B=[];i.J(s[t].id,B)}B.push($k(p,s[t].value))}}var e={};e.contactData=j;var S=$k(p,l);e.formattedValue=S;e.toString=function(){return this.formattedValue};this.Yl.push(e)}sb.info("Created contact array");var M=c.pa("Body").pa("Groups");if(M!=null){var s=M.Ra();g=s.La();sb.info("Got "+g+" groups");for(var h=0;h<g;h++){var kc=s.fe(h),Lc=kc.Ya("id"),p=kc.Ya("Name");if(Lc.charAt(0)!="^"){var Aa=
i.get(Lc);if(Aa!=null){this.ay.push(new gg(p,Aa))}}}}};var fl=function(){};fl.prototype.os=function(a,b,c){var d=a.data.contactData.Ya("Name"),e=al(a.data.contactData),f="";if(d&&e){f=ga(d)+"<br/>"+ga(e)}else if(d&&ab(d)){f=ga(d)}else if(e&&ab(e)){f=ga(e)}c.innerHTML=f};var _emailAutocomplete=E["_emailAutocomplete"]=new bf;E["_initEmailAutocomplete"]=da(E["_emailAutocomplete"].Bf,E["_emailAutocomplete"]);var _initEmailAutocomplete=E["_initEmailAutocomplete"],$k=function(a,b){if(a==null||a.length==
0){return" <"+b+">"}else{return'"'+a+'" <'+b+">"}},hg=function(a,b,c){Ma.call(this,a,b,c)};hg.D(Ma);hg.prototype.Jk=function(a){if(a.mq){a=a.mq().join(", ")}hg.sa.Jk.call(this,a)};var gg=function(a,b){this.If=a;this.Yl=b};gg.prototype.toString=function(){return this.If+" (Group)"};gg.prototype.getName=function(){return this.If};gg.prototype.mq=function(){return this.Yl};var ai,bi,jg="/ui/",zq=function(a){jg=a};E["HtmlUtil_setServerBase"]=zq;var cl=function(a,b){var c=307,d;if(a){var e=document.getElementById(a);d=pa(e);var f=ta(e);d.y+=f.height}else{d=new sa(0,0)}var g=f.width>c?f.width:c,h=554,i=313,j=600;if(b){d.x+=b.screenX-b.clientX;d.y+=b.screenY-b.clientY}if(d.x+i>screen.width){d.x=screen.width-i}if(d.y+j>screen.height){d.y=screen.height-j}var l=new vd(d.x,d.y,g,h);return l},Cq=function(a,b,c){var d=cl(a,b),e="toolbar=no,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,width="+
d.width+",height="+d.height+",top="+d.top+",left="+d.left,f=ci(a,c);window.open(f.toString(),"_picker",e)},ci=function(a,b){var c=new F(jg+"ContactPicker");if(a){c.ya("inputId",a)}if(b){c.ya("dm","goog")}c.ya("js","RAW");return c},Bq=function(a,b,c){if(ai){dl()}var d=cl(a,null),e=ci(a,c);window["iframeDone"]=dl;e.ya("done","iframeDone");var f=se("picker-iframe-div");if(f==null){var f=Ia("div",{id:"picker-iframe-div",style:"position: absolute; background-color; #FFF",zIndex:10});document.body.appendChild(f);
f.innerHTML='<iframe id="picker-iframe" style="display:none; background-color; #FFF; border: 0"></iframe>'}var g=se("picker-iframe");g.style.display="block";xd(f,d.left,d.top);wc(g,d.width,d.height);g.src=e;bi=f;ai=g},dl=function(){z(bi);bi=null;ai=null},vq=function(a){var b=new F(jg+"ContactManager"),c=a||"THREE";b.ya("style",c);b.ya("js","RAW");b.ya("pop","TRUE");return b},wq=function(a,b){var c=b=="TWO"?502:750,d=new vd(0,0,c,500),e="toolbar=no,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,width="+
d.width+",height="+d.height+",top="+d.top+",left="+d.left,f=vq(b).toString();window.open(f,"_manager",e)},$h=function(){},cf={};$h.prototype.dd=function(){return"photopicker.PhotoPicker"};$h.prototype.Wd=function(a,b){for(var c in cf){var d=cf[c];if(!d.P||!Td(document,d.P)){d.j();delete cf[c]}}if(a&&!cf[a.id]){var e=new Cb(a,b);cf[a.id]=e}};$h.prototype.ug=function(a,b){var c=new Fc(546,376);if(A){c.width+=1;c.height-=14}var d=bc().rw(this.dd(),c,a,b);tb.ViewManager.get().fireEvent("DISABLE_WINDOW")};
var Cb=function(a,b){this.P=a;this.ao=b;this.bs=b["exists"]=="true";this.Lh=[];this.Pl(a);if(!this.bs){this.zp("Add a picture",false,true)}this.Lh.push(n(E,"resize",this.gs.bind(this)))};Cb.prototype.j=function(){for(var a=0;a<this.Lh.length;a++){Bb(this.Lh[a])}if(this.te&&this.te.parentNode){this.te.parentNode.removeChild(this.te)}if(this.Xd&&this.te.Xd){this.Xd.parentNode.removeChild(this.te)}};Cb.prototype.Pl=function(a){this.Lh.push(n(a,Sc,this.Qb,false,this));this.Lh.push(n(a,Ob,this.Ea,false,
this));this.Lh.push(n(a,ka,this.Yz,false,this))};Cb.prototype.g=null;Cb.prototype.Tj=null;Cb.prototype.Qb=function(a){if(this.Xd){this.kp();return}this.Xd=this.pw();if(this.bs){this.zp("Change picture",true)}};Cb.prototype.pw=function(){var a=ta(this.P);a.width-=fi(this.P);a.height-=gi(this.P);if(A){a.width+=4;a.height+=4}a.width+=2;a.height+=2;var b=Ia("div");this.Pl(b);b.style.position="absolute";b.style.zIndex=20;wc(b,a);b.style.border="2px solid blue";var c=pa(this.P);c.x-=3;c.y-=3;b=this.P.parentNode.insertBefore(b,
this.P);xd(b,c);return b};Cb.prototype.zp=function(a,b,c){if(!this.P.parentNode){return}var d=Ia("div");this.Pl(d);var e=b?"background-color: white;":"";d.innerHTML='<div style="text-align: center; '+e+'font-family: Arial; font-size: 12px; padding: 2px"><a href="javascript:void(0)">'+a+"</a></div>";d.style.position="absolute";d.style.zIndex=20;d=this.P.parentNode.insertBefore(d,this.P);this.te=d;this.RC=c;this.gs()};Cb.prototype.gs=function(){var a=this.te;if(a){var b=ta(this.P);a.style.width=b.width+
"px";var c=ta(a),d=pa(this.P);if(this.RC){d.y+=(b.height-c.height)/2-4}xd(a,d)}};Cb.prototype.Ea=function(a){if(this.Xd){var b=a.relatedTarget;if(!b||b!=this.P&&!Td(this.Xd,b)){this.Gm(true)}}};Cb.prototype.Jx=function(a){var b={dn:a.getDisplayName()},c=a.getPictureUrl(true);if(c){b["eUrl"]=c}var d=Sa("$UserData/IsPicasaUser").tb(),e=Sa("$UserData/Email").tb(),f=d&&e&&(dc(e,"gmail.com")||dc(e,"googlemail.com"));b["userId"]=f?e.substring(0,e.indexOf("@")):null;b["dpUrl"]=bc().Oj().toString()+"/static/images/NoPicture.gif";
var g=Sa("$AuthToken/Value").Jj().get();b["extraUploadParams"]="out=hjs;tok="+g;return b};Cb.prototype.Yz=function(){this.Gm(false);var a=Sa("$Contacts/"+this.ao.contactid).Jj(),b=this.Jx(a);bc().ug("photopicker.PhotoPicker",b,this.ky.bind(this))};Cb.prototype.Gm=function(a){this.kp();if(a){var b=da(this.Gm,this,false);this.Tj=E.setTimeout(b,20);return}if(this.P&&this.Xd){this.Xd.parentNode.removeChild(this.Xd);this.Xd=null;if(this.bs){this.te.parentNode.removeChild(this.te);this.te=null}}};Cb.prototype.kp=
function(){if(this.Tj){E.clearTimeout(this.Tj);this.Tj=null}};Cb.prototype.ky=function(a){var b=this.ao.contactid;if(a.type=="PHOTO_PICKED"){if(a.evergreen){tb.ContactData.get().chooseEvergreen(b)}else if(a.noPhoto){tb.ContactData.get().deletePhoto(b)}else{tb.ContactData.get().savePhoto(b,a.imageUrl,a.cropString)}}else if(a.type=="SUGGEST_DONE"&&a.suggestMessage){tb.ContactData.get().sendPhotoSuggestion(b,a.suggestMessage)}else{tb.ContactData.get().$E()}};var Zd=function(){};Zd.prototype.Bf=function(){tb.ContactUtil.installShortcuts();
var a=tb.ContactData.get();a.setUseGroups(true);a.setGetAllFields(true);a.setUseThumbs(true);a.ua()};Zd.prototype.dd=function(){return"goog.focus.Hovercard"};Zd.prototype.Bf=function(){var a=bc().Oj("CONTACTS");tb.ContactUtil.installShortcuts();tb.ViewManager.get().addXmlView(a+"/ui/view/Hovercard.xml");var b=tb.ContactData.get();b.setUseGroups(true);b.setGetAllFields(true);b.setUseThumbs(true);b.setMaxContacts(100);b.ua();n(tb.ViewManager.get(),"WidgetEvent",this.cy,false)};Zd.prototype.cy=function(a){};
Zd.prototype.dd=function(){return"goog.focus.Hovercard"};Zd.prototype.Wd=function(a,b){a.style.color="green";var c=new ig(a,b);n(a,Sc,c.vy,false,c)};Zd.prototype.Ie=function(a,b){tb.ViewManager.get().renderView("Hovercard",a,null,{Email:b["email"]})};var ig=function(a,b){this.P=a;this.ao=b};ig.prototype.Rg=function(a){var b=new sa(a.clientX,a.clientY),c=bl(b,this.P)||bl(b,this.iD);if(!c){this.YB()}};var bl=function(a,b){var c=pa(b),d=ta(b);c.x-=10;c.y-=10;d.width+=20;d.height+=20;return c.x<a.x&&
a.x<c.x+d.width&&c.y<a.y&&a.y<c.y+d.height};ig.prototype.vy=function(a){if(this.P.wy)return;this.P.style.textDecoration="underline";this.P.style.cursor="pointer";var b=new sa(a.offsetX+5,a.offsetY+5);this.Mw=bc().hm("goog.focus.Hovercard",b,null,this.ao);this.iD=se(this.Mw);n(document,ac,this.Rg,false,this);this.P.wy=true};ig.prototype.YB=function(){D(document,ac,this.Rg,false,this);this.P.style.color="green";this.P.style.textDecoration="";bc().Qw(this.Mw);this.P.wy=false};ei("goog.focus.ContactManagerLauncher.popManager",
wq);ei("goog.focus.PickerLauncher.popPicker",Cq);ei("goog.focus.PickerLauncher.popIframe",Bq);var nd=function(a,b){O.call(this);this.My=a||1;this.Sn=b||Eh};nd.D(O);nd.prototype.vj=false;var Eh=E["window"];nd.prototype.pc=null;nd.prototype.setInterval=function(a){this.My=a;if(this.pc&&this.vj){this.stop();this.start()}else if(this.pc){this.Sn.clearInterval(this.pc);this.pc=null}};nd.prototype.cC=function(){if(this.vj){this.dispatchEvent("tick")}};nd.prototype.start=function(){this.vj=true;if(!this.pc){this.pc=this.Sn.setInterval(this.cC.bind(this),this.My)}};nd.prototype.stop=function(){this.vj=
false;this.Sn.clearInterval(this.pc);this.pc=null};nd.prototype.j=function(){if(!this.Ab()){O.prototype.j.call(this);this.stop();this.Sn=null}};var Se=function(a,b,c){if(be(a)){if(c){a=a.bind(c)}}else if(a&&typeof a.ie=="function"){a=a.ie.bind(a)}else{throw Error("Invalid listener argument");}return Eh.setTimeout(a,b||0)},Bk=function(a){Eh.clearTimeout(a)};var Bi=function(a,b,c){ja.call(this,a,b);this.item=c};Bi.D(ja);var Z=function(a,b){this.Bc=[];this.hB(a);if(b){this.LB(b)}};Z.D(O);var Gi="toggle_display";Z.prototype.b=null;Z.prototype.Hv=true;Z.prototype.Bb=false;Z.prototype.Br=-1;Z.prototype.gk=-1;Z.prototype.Pa=Gi;Z.prototype.LB=function(a){this.Pa=a};Z.prototype.Va=function(){return this.b};Z.prototype.hB=function(a){this.Pw();this.b=a};Z.prototype.Pw=function(){if(this.Bb){throw Error("Can not change this state of the popup while showing.");}};Z.prototype.$a=function(){return this.Bb};Z.prototype.mr=function(){return this.Bb||
ya()-this.gk<150};Z.prototype.da=function(a){if(a){if(!this.b){throw Error("Caller must call setElement before trying to show thepopup");}this.Ve();this.Ld()}else{this.Uj()}};Z.prototype.Ve=function(){};Z.prototype.Ld=function(){if(this.Bb){return}if(!this.Pz()){return}if(this.Hv){var a=Mb(this.b);this.Bc.push(n(a,na,this.jn,true,this));if(A){this.Bc.push(n(a,kq,this.hn,true,this))}}if(this.Pa==Gi){this.b.style.visibility="visible";u(this.b,true)}else if(this.Pa=="move_offscreen"){this.Ve()}this.Bb=
true;this.Fd()};Z.prototype.Uj=function(a){if(this.Bb){if(!this.Oz(a)){return}this.ns();if(this.Pa==Gi){this.b.style.visibility="hidden";u(this.b,false)}else if(this.Pa=="move_offscreen"){this.Ez()}this.Bb=false;this.vk()}};Z.prototype.Ez=function(){this.b.style.left="-200px";this.b.style.top="-200px"};Z.prototype.Pz=function(){return this.dispatchEvent("beforeshow")};Z.prototype.Fd=function(){this.Br=ya();this.gk=-1;this.dispatchEvent("show")};Z.prototype.Oz=function(a){return this.dispatchEvent({type:"beforehide",
target:a})};Z.prototype.vk=function(){this.gk=ya();this.dispatchEvent("hide")};Z.prototype.jn=function(a){if(!Td(this.b,a.target)){this.Uj(a.target)}};Z.prototype.hn=function(a){if(!Td(this.b,a.target)){if(ya()-this.Br<150){return}this.Uj()}};Z.prototype.ns=function(){for(var a=0;a<this.Bc.length;a++){Bb(this.Bc[a])}this.Bc.length=0};Z.prototype.j=function(){this.ns();O.prototype.j.call(this);this.b=null};var ee=function(a){this.mA=1;this.MD=new Ua(0,0,0,0);this.oA=new Di(0,0);Z.call(this,a)};ee.D(Z);var hf=function(){};hf.prototype.kb=function(a,b,c){};var jf=function(a,b){this.element=a;this.corner=b};jf.D(hf);jf.prototype.kb=function(a,b,c){Ae(this.element,this.corner,a,b,new sa(0,0),c)};var Ei=function(a,b){jf.call(this,a,b)};Ei.D(jf);Ei.prototype.kb=function(a,b,c){var d=Ae(this.element,this.corner,a,b,new sa(0,0),c,10);if(!d){d=Ae(this.element,b,a,this.corner,new sa(0,0),c,10);if(!d){Ae(this.element,
this.corner,a,b,new sa(0,0),c,0)}}};var Di=function(a,b){if(a instanceof sa){this.coordinate=a}else{this.coordinate=new sa(a,b)}};Di.D(hf);Di.prototype.kb=function(a,b,c){Ll(this.coordinate,a,b,c)};var Fi=function(a,b){if(a instanceof sa){this.coordinate=a}else{this.coordinate=new sa(a,b)}};Fi.D(hf);Fi.prototype.kb=function(a,b,c){var d=Sb(a);Ae(d,1,a,b,this.coordinate,c)};var Kl=function(a,b){if(a instanceof sa){this.coordinate=a}else{this.coordinate=new sa(a,b)}};Fi.D(hf);Kl.prototype.kb=function(a,
b,c){var d=Sb(a),e=new sa(this.coordinate.x+d.scrollLeft,this.coordinate.y+d.scrollTop);Ae(d,1,a,b,e,c)};ee.prototype.Ox=function(){return this.mA};ee.prototype.setPosition=function(a){this.oA=a;if(this.Bb){this.Ve()}};ee.prototype.Ve=function(){if(!this.Bb){this.b.style.visibility="hidden";u(this.b,true)}this.oA.kb(this.b,this.mA,this.MD);if(!this.Bb){u(this.b,false)}};ee.prototype.kb=function(){this.Ve()};var Ae=function(a,b,c,d,e,f,g){gf(c,0,0);var h=pa(c),i=pa(a),j=new sa(i.x-h.x,i.y-h.y),l=1,
p=1,s=ta(a);switch(b){case 1:break;case 2:j.x+=s.width;l=-1;break;case 3:j.y+=s.height;p=-1;break;case 4:j.x+=s.width;j.y+=s.height;l=-1;p=-1;break}if(e){j.x+=l*e.x;j.y+=p*e.y}return Ll(j,c,d,f,g)},Ll=function(a,b,c,d,e){var f=d?d:new Ua(0,0,0,0),g=e||0,h=ta(b);switch(c){case 1:a.x+=f.left;a.y+=f.top;break;case 2:a.x-=h.width;a.x-=f.right;a.y+=f.top;break;case 3:a.y-=h.height;a.x+=f.left;a.y-=f.bottom;break;case 4:a.x-=h.width;a.y-=h.height;a.x-=f.right;a.y-=f.bottom;break}if(g!=0){var i=Mb(b),j=
bg(i)||window,l=ta(b),p=Cc(j),s=Rk(j);if(a.x+l.width-s.x>p.width){if(g&1){a.x-=a.x+l.width-s.x-p.width}else if(g&2){return false}}if(a.y+l.height-s.y>p.height){if(g&4){a.y-=a.y+l.height-s.y-p.height}else if(g&8){return false}}if(a.y-s.y<0){if(g&4){a.y-=s.y}else if(g&8){return false}}if(a.x-s.x<0){if(g&1){a.x-=s.x}else if(g&2){return false}}}gf(b,a);return true};var Tb=function(a){ee.call(this,a);this.Bc=[]};Tb.D(ee);var Ci="itemaction";Tb.prototype.Fd=function(){Tb.sa.Fd.call(this);this.Bc.push(n(this.b,Sc,this.Qb,false,this));this.Bc.push(n(this.b,Ob,this.Ea,false,this));this.Bc.push(n(this.b,na,this.Pb,false,this));this.Bc.push(n(this.b,zb,this.ra,false,this));this.Bc.push(n(this.b,A?sc:ud,this.Ob,false,this))};Tb.prototype.vk=function(a){Tb.sa.vk.call(this);for(var b=0;b<this.Bc.length;b++){Bb(this.Bc[b])}this.Bc.length=0};Tb.prototype.Fb=function(a){};
Tb.prototype.Qb=function(a){};Tb.prototype.Ea=function(a){};Tb.prototype.Pb=function(a){};Tb.prototype.ra=function(a){};Tb.prototype.Ob=function(a){};var ua=function(a){Tb.call(this,a)};ua.D(Tb);ua.prototype.Eb=null;ua.prototype.nr="menu-item";ua.prototype.xs="menu-item-selected";ua.prototype.hk=ya();ua.prototype.vq=function(){return this.nr};ua.prototype.Fb=function(a){if(this.Eb){qa(this.Eb,this.xs)}this.Eb=a;if(this.Eb){fa(this.Eb,this.xs);var b=this.Eb.offsetTop,c=this.Eb.offsetHeight,d=this.b.scrollTop,e=this.b.offsetHeight;if(b<d){this.b.scrollTop=b}else if(b+c>d+e){this.b.scrollTop=b+c-e}}};ua.prototype.Fd=function(){ua.sa.Fd.call(this);
this.b.focus()};ua.prototype.Ij=function(a){var b=this.b.getElementsByTagName("*"),c=b.length,d;if(this.Eb){for(var e=0;e<c;e++){if(b[e]==this.Eb){d=a?e-1:e+1;break}}}if(!Q(d)){d=a?c-1:0}for(var e=0;e<c;e++){var f=a?-1:1,g=d+f*e%c;if(g<0){g+=c}else if(g>=c){g-=c}if(this.lr(b[g])){return b[g]}}return null};ua.prototype.Qb=function(a){var b=this.Ag(a.target);if(b==null){return}if(ya()-this.hk>150){this.Fb(b)}};ua.prototype.Ea=function(a){var b=this.Ag(a.target);if(b==null){return}if(ya()-this.hk>150){this.Fb(null)}};
ua.prototype.Pb=function(a){a.preventDefault()};ua.prototype.ra=function(a){var b=this.Ag(a.target);if(b==null){return}this.da(false);this.Tr(b)};ua.prototype.Ob=function(a){switch(a.keyCode){case 40:this.Fb(this.Ij(false));this.hk=ya();break;case 38:this.Fb(this.Ij(true));this.hk=ya();break;case 13:if(this.Eb){this.Tr();this.da(false)}break;case 27:this.da(false);break}a.preventDefault()};ua.prototype.Tr=function(a){this.dispatchEvent(new Bi(Ci,this,a||this.Eb))};ua.prototype.lr=function(a){return qd(a,
this.nr)};ua.prototype.Ag=function(a){var b=Mb(a).body;while(a!=null&&a!=b){if(this.lr(a)){return a}a=a.parentNode}return null};var U=function(a,b){var c=a||"menu",d=b||Oh().body;this.b=Ia("div",{tabIndex:0,className:c});d.appendChild(this.b);ua.call(this,this.b);this.Cc=null;this.ke=[]};U.D(ua);U.prototype.wg=null;U.prototype.rs=null;U.prototype.kl=10;U.prototype.Vh=function(){return this.Cc};U.prototype.getZIndex=function(){return this.kl};U.prototype.add=function(a){var b=this.Va();if(!b){throw Error("setElement() called before create()");}if(a.Dx()){throw Error("Menu item already added to a menu");}a.Es(this);this.ke.push(a);
b.appendChild(a.Zd())};U.prototype.remove=function(a){a.remove();a.Es(null);od(this.ke,a)};U.prototype.focus=function(){this.b.focus()};U.prototype.yB=function(a){this.Cc=a};U.prototype.zs=function(a,b,c){if(this.wg){Bb(this.wg)}if(this.dj!=a){this.rp=false;this.gk=-1}var d=c||ka;this.wg=n(a,d,this.Wg,false,this);this.rs=n(window,"resize",this.qi,false,this);this.setPosition(new jf(a,b||3));this.dj=a};U.prototype.j=function(){if(!this.Ab()){for(var a=0;a<this.ke.length;a++){this.ke[a].j()}O.prototype.j.call(this);
Bb(this.wg);Bb(this.rs);z(this.b);this.b=null;this.dj=null}U.sa.j.call(this)};U.prototype.da=function(a,b){if(this.mr()&&a){return}if(a==false){if(this.xa){this.xa.ij();ua.prototype.Fb.call(this,null)}if(this.Cc&&!b){this.Cc.focus()}}else{if(this.Cc){this.kl=this.Cc.getZIndex()+1}this.b.style.zIndex=this.kl}if(b&&this.Cc){this.Cc.da(a,b)}if(this.Ce){window.clearTimeout(this.Ce);this.Ce=null}this.xa=null;Z.prototype.da.call(this,a)};U.prototype.DB=function(a){this.Fb(a==-1?null:this.b.childNodes[a])};
U.prototype.ek=function(a,b){if(a||!this.xa||!this.xa.Yq()){ua.prototype.Fb.call(this,a)}var c=a?this.Cg(a):null;if(c&&c!=this.xa){if(b&&this.xa){this.xa.ij();this.xa=null}if(this.Ce){window.clearTimeout(this.Ce);this.Ce=null}if(!b){this.Ce=window.setTimeout(this.UA.bind(this,c),300)}if(this.Cc){this.Cc.Fb(this.dj);this.b.focus()}}};U.prototype.Fb=function(a){var b,c;if(!a){b=null;c=null}else if(typeof a.nodeType!="undefined"){b=a;c=this.Cg(b)}else{c=a;b=c.b}if(b||!this.xa||!this.xa.Yq()){ua.prototype.Fb.call(this,
b)}if(c==this.xa){return}if(this.xa&&b){this.xa.ij()}if(b){var c=this.Cg(b);if(c.Gg()){c.kn();c.Yh().focus()}this.xa=c}};U.prototype.UA=function(a){if(this.Ce){window.clearTimeout(this.Ce);this.Ce=null}var b=this.Cg(this.Eb);if(b!=a){return}if(this.xa&&a){this.xa.ij()}if(a.Gg()){a.kn();a.Yh().focus()}else{this.b.focus()}this.xa=a};U.prototype.El=function(a){var b=this.Cg(a);if(b.Gg()){b.kn();var c=b.Yh();c.focus();this.xa=b}else{this.da(false,true);this.dispatchEvent(new Bi(Ci,this,b))}};U.prototype.Wg=
function(){if(!this.rp){this.da(true)}this.rp=false};U.prototype.vp=function(a){if(Td(this.b,a)){return true}if(this.xa&&this.xa.Gg()){return this.xa.Yh().vp(a)}return false};U.prototype.jn=function(a){if(this.dj==a.target||Td(this.dj,a.target)){this.rp=true}var b=this;while(b.Cc){b=b.Cc}if(!b.vp(a.target)){this.Uj()}};U.prototype.Qb=function(a){var b=this.Ag(a.target);if(b==null){return}this.ek(b)};U.prototype.Ea=function(a){var b=this.Ag(a.target);if(b==null){return}this.ek(null)};U.prototype.hn=
function(a){};U.prototype.ra=function(a){var b=this.Ag(a.target);if(b==null){return}this.El(b)};U.prototype.qi=function(){if(!this.Ab()&&this.$a()){this.kb()}};U.prototype.Ob=function(a){var b=false;switch(a.keyCode){case 37:if(this.Cc){this.da(false)}b=true;break;case 39:var c=this.Cg(this.Eb);if(this.Eb&&c.Gg()){this.El(this.Eb);c.Yh().DB(0)}b=true;break;case 40:this.ek(this.Ij(false),true);b=true;break;case 38:this.ek(this.Ij(true),true);b=true;break;case 13:if(this.Eb){this.El(this.Eb)}b=true;
break;case 27:this.da(false);b=true;break}if(b){a.preventDefault()}};U.prototype.Fd=function(){U.sa.Fd.call(this);this.Fb(null);if(!this.Cc){this.b.focus()}};U.prototype.Cg=function(a){var b=-1;for(var c=a;c;c=aq(c)){b++}return b==-1?null:this.ke[b]};var ub=function(a,b,c){this.Ha=String(a);this.Ae=b||a;this.Tc=c||null;this.Cd=null;this.b=null};ub.prototype.tb=function(){return this.Ae};ub.prototype.bf=function(a){this.Ae=a};ub.prototype.j=function(){this.remove();if(this.Tc){this.Tc.j()}};ub.prototype.Es=
function(a){this.Cd=a;if(this.Tc){this.Tc.yB(a)}};ub.prototype.Dx=function(){return this.Cd};ub.prototype.Zd=function(){if(!this.Cd){throw Error("MenuItem is not attached to a menu");}this.b=Ia("div",{className:this.Cd.vq()},this.Ha,this.Tc?Ia("span",null,"\u25b6"):null);return this.b};ub.prototype.remove=function(){z(this.b);this.b=null};ub.prototype.Gg=function(){return this.Tc!=null};ub.prototype.Yq=function(){return this.Gg()?this.Tc.mr():false};ub.prototype.Yh=function(){return this.Tc};ub.prototype.kn=
function(){if(this.Tc){var a=this.Tc,b=a.Ox()==2?1:2;a.zs(this.b,b);a.da(true)}};ub.prototype.ij=function(){if(this.Tc){this.Tc.da(false)}};var Ai=function(){ub.call(this,null)};Ai.D(ub);Ai.prototype.Zd=function(){if(!this.Cd){throw Error("MenuSeparator is not attached to a menu");}this.b=q("hr");return this.b};var Nb=function(a){this.oa=a};Nb.D(rc);Nb.prototype.ta=function(a,b,c,d,e){if(Ja(b)){for(var f=0;f<b.length;f++){this.ta(a,b[f],c,d,e)}return}var g=n(a,b,c||this,d||false,e||this.oa||this);if(this.Oe){this.Oe[g]=true}else if(this.Ff){this.Oe={};this.Oe[this.Ff]=true;this.Ff=null;this.Oe[g]=true}else{this.Ff=g}};Nb.prototype.Od=function(a,b,c,d,e){if(!this.Ff&&!this.Oe){return}if(Ja(b)){for(var f=0;f<b.length;f++){this.Od(a,b[f],c,d,e)}return}var g=Ze(a,b,c||this,d||false,e||this.oa||this);Bb(g);if(this.Oe){oi(this.Oe,
g)}else if(this.Ff==g){this.Ff=null}};Nb.prototype.Ek=function(){if(this.Oe){for(var a in this.Oe){Bb(a)}}else if(this.Ff){Bb(this.Ff)}};Nb.prototype.j=function(){if(!this.Ab()){rc.prototype.j.call(this);this.Ek()}};Nb.prototype.ie=function(a){throw Error("EventHandler.handleEvent not impemented");};var bj=false;function Mg(a){try{throw a;}catch(b){Zm(b)}}function Zm(a,b){var c="Javascript exception: "+(b?b:"")+" "+a;if(ge()){c+=" "+a.name+": "+a.message+" ("+a.number+")"}var d="";if(typeof a=="string"){d=a+"\n"}else{for(var e in a){try{d+=e+": "+a[e]+"\n"}catch(f){}}}d+=$i($m);hm(c+"\n"+d,1)}var $m;var wp=/function (\w+)/;function fm(a){var b=wp.exec(String(a));if(b){return b[1]}return""}function $i(a){try{if(!ge()&&!(rf("safari")||rf("konqueror"))&&rf("mozilla")){return Error().stack}if(!a)return"";
var b="- "+fm(a)+"(";for(var c=0;c<a.arguments.length;c++){if(c>0)b+=", ";var d=String(a.arguments[c]);if(d.length>40){d=d.substr(0,40)+"..."}b+=d}b+=")\n";b+=$i(a.caller);return b}catch(e){return"[Cannot get stack trace]: "+e+"\n"}}var im;var bd=null,Gg=false;function gm(){if((bd==null||bd.closed)&&!Gg){try{Gg=true;bd=window.open("","debug","width=700,height=500,toolbar=no,resizable=yes,scrollbars=yes,left=16,top=16,screenx=16,screeny=16");bd.blur();bd.document.open();Gg=false;var a="<font color=#ff0000><b>To turn off this debugging window,hit 'D' inside the main caribou window, then close this window.</b></font><br>";
aj(a)}catch(b){}}}function hm(a,b){if(!bj){if(typeof Rl!="undefined"){Rl(Og(a))}return}try{var c=ek()-im,d="["+c+"] "+Og(a).replace(/\n/g,"<br>")+"<br>";if(b==1){d="<font color=#ff0000><b>Error: "+d+"</b></font>";bd.focus()}}catch(e){}aj(d)}function aj(a){if(!bj){return}try{gm();bd.document.write(a);bd.scrollTo(0,1000000)}catch(b){}};function rf(a){if(a in Dg){return Dg[a]}return Dg[a]=navigator.userAgent.toLowerCase().indexOf(a)!=-1}var Dg={};function ge(){return rf("msie")&&!window.opera}function Li(a){if(typeof Error!="undefined"){throw new Error(a||"Assertion Failed");}else{throw a;}}function He(a){if(a===undefined)a="Assertion failed";if(Ie(Mg))Mg(a+"\n");Li(a)}function Na(a,b){if(!a){if(b===undefined)b="Assertion failed";He(b)}}function Wi(a,b,c){if(a!=b){if(c===undefined){c="AssertEquals failed: <"+a+"> != <"+b+">"}He(c)}}
function ad(a,b,c){if(typeof a==b)return;if(a||a==""){try{if(b==Xl[typeof a]||a instanceof b)return}catch(d){}}if(c===undefined){if(typeof b=="function"){var e=b.toString().match(/^\s*function\s+([^\s\{]+)/);if(e)b=e[1]}c="AssertType failed: <"+a+"> not typeof "+b}He(c)}var Xl={string:String,number:Number,"boolean":Boolean};function ap(a,b,c,d,e){b=""+b;Na(typeof a=="string"&&typeof b=="string"&&!a.match(/[\s;]/)&&!b.match(/[\s;]/),"trying to set an invalid cookie");if(!Ie(c))c=-1;if(!Ie(d))d="/";
if(!Ie(e))e=null;var f=e==null?"":";domain="+e,g=d==null?"":";path="+d,h;if(c<0){h=""}else if(c==0){var i=new Date(1970,1,1);h=";expires="+i.toUTCString()}else{var j=new Date(ek()+c*1000);h=";expires="+j.toUTCString()}document.cookie=a+"="+b+f+g+h};function ek(){return(new Date).getTime()}function dn(a){try{return a.parentNode}catch(b){return a}}function hn(a,b){do{if(a===b)return true;b=dn(b)}while(b&&b!==document.body);return false}function rj(a){return sj(a,zp)}var zp={yy:function(a){return a.document.body.scrollTop},
zy:function(a){return a.document.documentElement.scrollTop},V:function(a){return a.pageYOffset}};function qj(a){return sj(a,yp)}var yp={yy:function(a){return a.document.body.scrollLeft},zy:function(a){return a.document.documentElement.scrollLeft},V:function(a){return a.pageXOffset}};function sj(a,b){try{if(!window.opera&&"compatMode"in a.document&&a.document.compatMode=="CSS1Compat"){return b.zy(a)}else if(ge()){return b.yy(a)}}catch(c){}return b.V(a)}var np=/&/g,Hr=/</g,Fr=/>/g;function Og(a){if(!a)return"";
return a.replace(np,"&amp;").replace(Hr,"&lt;").replace(Fr,"&gt;").replace(Lr,"&quot;")}var Lr=/\"/g;function jn(a){return Ug[a]}var Ug;function xh(a){if(!Ug){var b={};b["\\"]="\\\\";b["'"]="\\047";b["\u0008"]="\\b";b['"']="\\042";b["<"]="\\074";b[">"]="\\076";b["&"]="\\046";b["\n"]="\\n";b["\r"]="\\r";b["\u0085"]="\\205";b["\u2028"]="\\u2028";b["\u2029"]="\\u2029";Ug=b}return"'"+a.toString().replace(/[\'\\\r\n\b\"<>&\u0085\u2028\u2029]/g,jn)+"'"}var as=/\s+/g,op=/^ /,sp=/ $/;function Zi(a){if(!a)return"";
return a.replace(as," ").replace(op,"").replace(sp,"")}function Yi(a){var b={};b.clientX=a.clientX;b.clientY=a.clientY;b.pageX=a.pageX;b.pageY=a.pageY;b.type=a.type;b.srcElement=a.srcElement;b.target=a.target;b.cancelBubble=a.cancelBubble;b.explicitOriginalTarget=a.explicitOriginalTarget;b.button=a.button;b.shiftKey=a.shiftKey;b.ctrlKey=a.ctrlKey;return b}function hk(a){var b="",c="";for(var d=0;d<a.length;){var e=pj(a,d);if(e.charAt(0)=="<"){var f=e.indexOf(">");c=e.substring(1,f!=-1?f:e.length)}else if(c==
""){b+=e}d+=e.length}if(c==""&&b.indexOf("@")!=-1){c=b;b=""}b=Zi(b);b=rk(b,"'");b=rk(b,'"');c=Zi(c);return[b,c]}function rk(a,b){var c=a.length;if(a.charAt(0)==b&&a.charAt(c-1)==b){return a.substring(1,c-1)}return a}function bn(a){var b=[],c="",d;for(var e=0;e<a.length;){d=pj(a,e);if(d==","){Ui(b,c);c="";e++;continue}c+=d;e+=d.length}if(c!=""||d==","){Ui(b,c)}return b}var Jr='"<([',qp='">)]';function pj(a,b){var c=a.charAt(b),d=Jr.indexOf(c);if(d==-1)return c;var e=a.indexOf(qp.charAt(d),b+1),f=e>=
0?a.substring(b,e+1):a.substr(b);return f}function Ui(a,b){b=em(b);a[a.length]=b}var bs=/[()<>@,;:\\\".\[\]]/;function em(a){var b=hk(a),c=b[0],d=b[1];if(c.indexOf('"')==-1){var e=bs.test(c);if(e){c='"'+c+'"'}}if(c=="")return d;else if(d=="")return c;else return c+" <"+d+">"}function Ie(a){return typeof a!="undefined"}function tp(a){return document.getElementById(a)}function up(a){return document.all[a]}var hb=document.getElementById?tp:up;function Ng(a){Na(a,"func passed to GetFnName() is undefined");
var b;if(!("name"in a)){var c=/\W*function\s+([\w\$]+)\(/.exec(a);if(!c){throw new Error("Cannot extract name from function: "+a);}b=c[1];a.name=b}else{b=a.name}if(!b||b=="anonymous"){throw new Error("Anonymous function has no name: "+a);}return a.name}function Rl(a){try{if(window.parent!=window&&window.parent.log){window.parent.log(window.name+"::"+a);return}}catch(b){}var c=hb("log");if(c){var d="<p class=logentry><span class=logdate>"+new Date+"</span><span class=logmsg>"+a+"</span></p>";c.innerHTML=
d+c.innerHTML}else{window.status=a}};;function Nd(a,b,c){this.x=a;this.y=b;this.coordinateFrame=c||null}Nd.prototype.toString=function(){return"[P "+this.x+","+this.y+"]"};Nd.prototype.fa=function(){return new Nd(this.x,this.y,this.coordinateFrame)};function ie(a,b){this.dx=a;this.dy=b}ie.prototype.toString=function(){return"[D "+this.dx+","+this.dy+"]"};function Oc(a,b,c,d,e){this.x=a;this.y=b;this.w=c;this.h=d;this.coordinateFrame=e||null}Oc.prototype.contains=function(a){return this.x<=a.x&&a.x<this.x+this.w&&this.y<=a.y&&a.y<this.y+
this.h};Oc.prototype.intersects=function(a){var b=function(c,d){return new Nd(c,d,null)};return this.contains(b(a.x,a.y))||this.contains(b(a.x+a.w,a.y))||this.contains(b(a.x+a.w,a.y+a.h))||this.contains(b(a.x,a.y+a.h))||a.contains(b(this.x,this.y))||a.contains(b(this.x+this.w,this.y))||a.contains(b(this.x+this.w,this.y+this.h))||a.contains(b(this.x,this.y+this.h))};Oc.prototype.toString=function(){return"[R "+this.w+"x"+this.h+"+"+this.x+"+"+this.y+"]"};Oc.prototype.fa=function(){return new Oc(this.x,
this.y,this.w,this.h,this.coordinateFrame)};function gc(a){function b(j){for(var l=a.offsetParent;l&&l.offsetParent;l=l.offsetParent){if(l.scrollLeft){j.x-=l.scrollLeft}if(l.scrollTop){j.y-=l.scrollTop}}}var c;if(a.ownerDocument&&a.ownerDocument.parentWindow){c=a.ownerDocument.parentWindow}else{c=window}if(a.ownerDocument&&a.ownerDocument.getBoxObjectFor){var d=a.ownerDocument.getBoxObjectFor(a),e=new Oc(d.x,d.y,d.width,d.height,c);b(e);return e}if(a.getBoundingClientRect){var f=a.getBoundingClientRect();return new Oc(f.left+qj(c),f.top+rj(c),
f.right-f.left,f.bottom-f.top,c)}var g=0,h=0;for(var i=a;i.offsetParent;i=i.offsetParent){g+=i.offsetLeft;h+=i.offsetTop}var e=new Oc(g,h,a.offsetWidth,a.offsetHeight,c);b(e);return e}function Ki(a){var b=gc(a);return new Nd(b.x,b.y,b.coordinateFrame)}function Ym(a,b){Na(a,"p1 passed to Distance is undefined");Na(b,"p2 passed to Distance is undefined");Na(a.coordinateFrame==b.coordinateFrame);var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function dd(a){var b=0,c=0;if(a.pageX||a.pageY){b=a.pageX;
c=a.pageY}else if(a.clientX||a.clientY){var d=a.target?a.target:a.srcElement,e;if(d.ownerDocument&&d.ownerDocument.parentWindow){e=d.ownerDocument.parentWindow}else{e=window}b=a.clientX+qj(e);c=a.clientY+rj(e)}return new Nd(b,c,window)};function je(a){return a<0?-1:1}function Cf(a){return a|0}function wj(a){Mg(a);throw a;}function ca(a,b){var c=a.toString();while(c.length<b){c="0"+c}return c}var Sg=[undefined,31,undefined,31,30,31,30,31,31,30,31,30,31];function fd(a,b){if(2!==b){return Sg[b]}var c=a<<4,d=Sg[c];if(!d){d=Math.round((Date.UTC(a,2,1)-Date.UTC(a,1,1))/86400000);Sg[c]=d}return d}var xj={};function gn(a,b){var c=a<<4|b,d=xj[c];if(!d){d=(new Date(a,b-1,1,0,0,0,0)).getDay();xj[c]=d}return d}function Tg(a){return(a.A-1+gn(a.q,
a.o))%7}function uj(a,b,c,d,e,f){var g;if(a===d){if((g=b-e)===0){return c-f}else if(g<0){g=c-f;do{g-=fd(a,b++)}while(b<e);return g}else{g=c-f;do{g+=fd(d,e++)}while(e<b);return g}}else{return Math.round((Date.UTC(a,b-1,c)-Date.UTC(d,e-1,f))/86400000)}}function vj(a,b){return uj(a.q,a.o,a.A,b.q,b.o,b.A)}function cb(a,b,c,d,e,f){if(!isNaN(a)){this.q=a}if(!isNaN(b)){this.o=b}if(!isNaN(c)){this.A=c}if(!isNaN(d)){this.O=d}if(!isNaN(e)){this.R=e}if(!isNaN(f)){this.T=f}}cb.prototype.q=NaN;cb.prototype.o=
NaN;cb.prototype.A=NaN;cb.prototype.O=NaN;cb.prototype.R=NaN;cb.prototype.T=NaN;cb.prototype.mx=function(){return Tg(this)};cb.prototype.toString=function(){if(this.se!==undefined)return this.se;this.se=this.Ic();return this.se};function Dd(){}Dd.prototype=new cb;Dd.prototype.constructor=Dd;function wb(a,b,c){Na(b&&c,"invalid date params: "+b+" "+c);cb.call(this,a,b,c,NaN,NaN,NaN)}wb.prototype=new Dd;wb.prototype.constructor=wb;var fn=function(){var a=new Date;return xb(a.getFullYear(),a.getMonth()+
1,a.getDate())};wb.prototype.type="Date";wb.prototype.Tb=function(){return this};wb.prototype.we=function(){return new Ga(this.q,this.o,this.A,0,0,0)};wb.prototype.X=function(){if(undefined===this.hc){this.hc=Pg(this.q,this.o,this.A)}return this.hc};function Pg(a,b,c){return(((a-1970)*12+b<<5)+c)*86400}wb.prototype.xc=function(){return true};wb.prototype.Ic=function(){return ca(this.q,4)+ca(this.o,2)+ca(this.A,2)};wb.prototype.equals=function(a){return this.constructor===a.constructor&&this.A===a.A&&
this.o===a.o&&this.q===a.q};var Qg={},en=0,xb=function(a,b,c){var d=Pg(a,b,c);if(d in Qg){return Qg[d]}else{var e=new wb(a,b,c);e.hc=d;if(en<200){Qg[d]=e}return e}};function Ga(a,b,c,d,e,f){cb.call(this,a,b,c,d,e,f)}Ga.prototype=new Dd;Ga.prototype.constructor=Ga;Ga.prototype.type="DateTime";Ga.prototype.Tb=function(){return xb(this.q,this.o,this.A)};Ga.prototype.we=function(){return this};Ga.prototype.X=function(){if(undefined===this.hc){this.hc=(((((this.q-1970)*12+this.o<<5)+this.A)*24+this.O)*
60+this.R)*60+this.T}return this.hc};Ga.prototype.xc=function(){return true};Ga.prototype.Ic=function(){return ca(this.q,4)+ca(this.o,2)+ca(this.A,2)+"T"+ca(this.O,2)+ca(this.R,2)+ca(this.T,2)};Ga.prototype.equals=function(a){return this.constructor===a.constructor&&this.A===a.A&&this.o===a.o&&this.q===a.q&&this.O===a.O&&this.R===a.R&&this.T===a.T};Ga.prototype.fa=function(){var a=new Ga(this.q,this.o,this.A,this.O,this.R,this.T);if(this.se!==undefined)a.se=this.se;return a};function Ed(a,b,c){cb.call(this,
NaN,NaN,NaN,a,b,c)}Ed.prototype=new cb;Ed.prototype.constructor=Ed;Ed.prototype.type="Time";Ed.prototype.Ic=function(){return"T"+ca(this.O,2)+ca(this.R,2)+ca(this.T,2)};Ed.prototype.equals=function(a){return this.constructor===a.constructor&&this.O===a.O&&this.R===a.R&&this.T===a.T};Ed.prototype.X=function(){return(this.O*60+this.R)*60+this.T};function Kc(a,b,c,d){var e=d+60*(c+60*(b+24*a)),f=Cf(e/86400);e-=f*86400;var g=Cf(e/3600);e-=g*3600;var h=Cf(e/60);e-=h*60;var i=Cf(e);cb.call(this,NaN,NaN,
f,g,h,i)}Kc.prototype=new cb;Kc.prototype.constructor=Kc;Kc.prototype.type="Duration";Kc.prototype.X=function(){if(undefined===this.hc){this.hc=((this.A*24+this.O)*60+this.R)*60+this.T}return this.hc};Kc.prototype.Ic=function(){var a=this.q?je(this.q):(this.o?je(this.o):(this.A?je(this.A):(this.O?je(this.O):(this.R?je(this.R):(this.T?je(this.T):0))))),b=a<0?"-P":"P";if(this.q){b+=a*this.q+"Y"}if(this.o){b+=a*this.o+"N"}if(this.A){b+=this.A%7?a*this.A+"D":a*this.A/7+"W"}if(this.O||this.R||this.T){b+=
"T"}if(this.O){b+=a*this.O+"H"}if(this.R){b+=a*this.R+"M"}if(this.T){b+=a*this.T+"S"}if(!a){b+="0D"}return b};Kc.prototype.equals=function(a){return this.constructor===a.constructor&&this.A===a.A&&this.O===a.O&&this.R===a.R&&this.T===a.T};function mf(a){ad(a,cb);var b=new wa;b.q=a.q||0;b.o=a.o||0;b.A=a.A||0;b.O=a.O||0;b.R=a.R||0;b.T=a.T||0;return b}function xg(a,b,c){Na(!(isNaN(a)|isNaN(b)|isNaN(c)));var d=new wa;d.q=a||0;d.o=b||0;d.A=c||0;return d}function wa(){}wa.prototype=new cb;wa.prototype.constructor=
wa;wa.prototype.type="DTBuilder";wa.prototype.q=(wa.prototype.o=(wa.prototype.A=(wa.prototype.O=(wa.prototype.R=(wa.prototype.T=0)))));wa.prototype.X=function(){this.normalize();var a;if(isNaN(this.O)){a=Pg(this.q,this.o,this.A)}else{a=(((((this.q-1970)*12+this.o<<5)+this.A)*24+this.O)*60+this.R)*60+this.T}return a};wa.prototype.yv=function(a){if(a.A){this.A+=a.A}if(a.O){this.O+=a.O}if(a.R){this.R+=a.R}if(a.T){this.T+=a.T}};wa.prototype.normalize=function(){this.Mz();this.en();var a=fd(this.q,this.o);
while(this.A<1){this.o-=1;this.en();a=fd(this.q,this.o);this.A+=a}while(this.A>a){this.A-=a;this.o+=1;this.en();a=fd(this.q,this.o)}};wa.prototype.Mz=function(){var a;if(this.T<0){a=Math.ceil(this.T/-60);this.T+=60*a;this.R-=a}else if(this.T>=60){a=Math.floor(this.T/60);this.T-=60*a;this.R+=a}if(this.R<0){a=Math.ceil(this.R/-60);this.R+=60*a;this.O-=a}else if(this.R>=60){a=Math.floor(this.R/60);this.R-=60*a;this.O+=a}if(this.O<0){a=Math.ceil(this.O/-24);this.O+=24*a;this.A-=a}else if(this.O>=24){a=
Math.floor(this.O/24);this.O-=24*a;this.A+=a}};wa.prototype.en=function(){var a;if(this.o<1){a=Math.ceil((this.o-1)/-12);this.o+=12*a;this.q-=a}else if(this.o>12){a=Math.floor((this.o-1)/12);this.o-=12*a;this.q+=a}};wa.prototype.Tb=function(){this.normalize();return xb(this.q,this.o,this.A)};wa.prototype.we=function(){this.normalize();return new Ga(this.q,this.o,this.A,this.O,this.R,this.T)};wa.prototype.hC=function(){if(this.q||this.o){wj("Can't convert months or years to ICAL_Duration");return undefined}else{return new Kc(this.A,
this.O,this.R,this.T)}};wa.prototype.toString=function(){return"["+(undefined!==this.q?ca(this.q,4):"????")+"/"+(undefined!==this.o?ca(this.o,2):"??")+"/"+(undefined!==this.A?ca(this.A,2):"??")+" "+(undefined!==this.O?ca(this.O,2):"??")+" "+(undefined!==this.R?ca(this.R,2):"??")+" "+(undefined!==this.T?ca(this.T,2):"??")+"]"};wa.prototype.equals=function(a){return this.constructor===a.constructor&&this.A===a.A&&this.o===a.o&&this.q===a.q&&this.O===a.O&&this.R===a.R&&this.T===a.T};function Af(a,b){Na(a instanceof
Ga||a instanceof wb);this.start=a;if(b.constructor==Kc){var c=mf(a);c.yv(b);this.end=this.start instanceof Ga?c.we():c.Tb()}else{Wi(b.constructor,a.constructor);this.end=b}this.duration=tj(this.end,this.start)}Af.prototype.type="PeriodOfTime";Af.prototype.toString=function(){if(this.se!==undefined)return this.se;this.se=this.start+"/"+this.end;return this.se};Af.prototype.equals=function(a){return this.constructor===a.constructor&&this.start.equals(a.start)&&this.end.equals(a.end)};Af.prototype.contains=
function(a){return this.start.X()<=a.start.X()&&this.end.X()>=a.end.X()};function Rg(a,b){Na(a instanceof jc||a instanceof ic);this.start=a;Wi(b.constructor,a.constructor);this.end=b;try{this.duration=tj(this.end,this.start)}catch(c){this.duration=null}}Rg.prototype.type="PartialPeriodOfTime";Rg.prototype.Ic=function(){return this.start+"/"+this.end};Rg.prototype.equals=function(a){return this.constructor===a.constructor&&this.start.equals(a.start)&&this.end.equals(a.end)};function tj(a,b){if(isNaN(a.q)!=
isNaN(b.q)||isNaN(a.O)!=isNaN(b.O)){wj("diff("+a+", "+b+")");return undefined}var c=mf(a);if(isNaN(a.q)){c.O-=b.O;c.R-=b.R;c.T-=b.T}else{c.q=NaN;c.o=NaN;c.A=uj(a.q,a.o,a.A,b.q,b.o,b.A);if(!isNaN(a.O)){c.O-=b.O;c.R-=b.R;c.T-=b.T}}return c.hC()}function ic(a,b,c){this.q=a;this.o=b;this.A=c}ic.prototype=new Dd;ic.prototype.constructor=ic;ic.prototype.type="PartialDate";ic.prototype.Tb=function(){return xb(this.q||0,this.o||1,this.A||1)};ic.prototype.we=function(){return new Ga(this.q||0,this.o||1,this.A||
1,0,0,0)};ic.prototype.xc=function(){return!isNaN(this.X())};ic.prototype.X=function(){if(undefined===this.hc){this.hc=(((this.q-1970)*12+this.o<<5)+this.A)*86400}return this.hc};ic.prototype.equals=function(a){return this.constructor===a.constructor&&(this.A===a.A||isNaN(this.A)&&isNaN(a.A))&&(this.o===a.o||isNaN(this.o)&&isNaN(a.o))&&(this.q===a.q||isNaN(this.q)&&isNaN(a.q))};ic.prototype.Ic=function(){return(undefined!==this.q?ca(this.q,4):"????")+(undefined!==this.o?ca(this.o,2):"??")+(undefined!==
this.A?ca(this.A,2):"??")};function jc(a,b,c,d,e,f){this.q=a;this.o=b;this.A=c;this.O=d;this.R=e;this.T=f}jc.prototype=new Dd;jc.prototype.constructor=jc;jc.prototype.type="PartialDateTime";jc.prototype.Tb=function(){return xb(this.q||0,this.o||1,this.A||1)};jc.prototype.we=function(){return new Ga(this.q||0,this.o||1,this.A||1,this.O||0,this.R||0,this.T||0)};jc.prototype.xc=function(){return!isNaN(this.X())};jc.prototype.X=function(){if(undefined===this.hc){this.hc=(((((this.q-1970)*12+this.o<<5)+
this.A)*24+this.O)*60+this.R)*60+this.T}return this.hc};jc.prototype.equals=function(a){return this.constructor===a.constructor&&(this.A===a.A||isNaN(this.A)&&isNaN(a.A))&&(this.o===a.o||isNaN(this.o)&&isNaN(a.o))&&(this.q===a.q||isNaN(this.q)&&isNaN(a.q))&&(this.O===a.O||isNaN(this.O)&&isNaN(a.O))&&(this.R===a.R||isNaN(this.R)&&isNaN(a.R))&&(this.T===a.T||isNaN(this.T)&&isNaN(a.T))};jc.prototype.Ic=function(){return(undefined!==this.q?ca(this.q,4):"????")+(undefined!==this.o?ca(this.o,2):"??")+(undefined!==
this.A?ca(this.A,2):"??")+"T"+(undefined!==this.O?ca(this.O,2):"??")+(undefined!==this.R?ca(this.R,2):"??")+(undefined!==this.T?ca(this.T,2):"??")};var Bf=undefined,yj=[];function Wl(){var a=new Date,b=Bf;Bf=xb(a.getFullYear(),a.getMonth()+1,a.getDate());if(b&&!b.equals(Bf)){for(var c=0;c<yj.length;++c){var d=yj[c];try{d(Bf)}catch(e){}}}var f=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);f.setDate(f.getDate()+1);var g=f.getTime()-a.getTime();if(g<0||g>=1800000){g=1800000}window.setTimeout(Wl,
g)}Wl();Function.prototype.bind=function(a,b){if(typeof this!="function"){throw new Error("Bind must be called as a method of a function object.");}var c=this,d=Array.prototype.splice.call(arguments,1,arguments.length);return function(){var e=d.concat();for(var f=0;f<arguments.length;f++){e.push(arguments[f])}return c.apply(a,e)}};var $c,fe,Vl;(function(){var a={},b=0;function c(f){if(f.ez==null){f.ez=++b}return f.ez}function d(f,g,h,i){var j=c(f),l=c(h);i=!(!i);var p=j+"_"+g+"_"+l+"_"+i;return p}$c=function(f,g,h,i){var j=d(f,g,h,i);if(j in a){return j}var l=e.bind(null,j);a[j]={listener:h,proxy:l,event:g,node:f,useCapture:i};if(f.addEventListener){f.addEventListener(g,l,i)}else if(f.attachEvent){f.attachEvent("on"+g,l)}else{throw new Error("Node {"+f+"} does not support event listeners.");}return j};fe=function(f,g,h,i){var j=
d(f,g,h,i);return Vl(j)};Vl=function(f){if(!(f in a)){return false}var g=a[f],h=g.proxy,i=g.event,j=g.node,l=g.useCapture;if(j.removeEventListener){j.removeEventListener(i,h,l)}else if(j.detachEvent){j.detachEvent("on"+i,h)}delete a[f];return true};function e(f){var g=Array.prototype.splice.call(arguments,1,arguments.length);return a[f].listener.apply(null,g)}})();function jm(a){return function(b,c,d,e){var f=gc(c),g=Ki(c.offsetParent),h;switch(d){case 1:if(undefined!==e){if(ba&1){f.x+=e.dx}if(ba&2){f.y+=e.dy}}h=a(f);if(!h){return false}if(ba&1){if(undefined!==e){e.dx+=h.x-f.x+g.x}else{c.style.left=h.x+"px"}}if(ba&2){if(undefined!==e){e.dy+=h.y-f.y+g.y}else{c.style.top=h.y+"px"}}break;case 2:if(undefined!==e){if(ba&1){f.w+=e.dx}if(ba&2){f.h+=e.dy}}if(undefined===e){var i=new Nd(f.x+f.w,f.y+f.h,window);h=a(i);if(!h){return false}if(ba&1){var j=h.x-c.offsetLeft;
if(j<=0){return false}c.style.width=j+"px"}if(ba&2){var l=h.y-c.offsetTop;if(l<=0){return false}c.style.height=l+"px"}}break;case 5:if(e){var h=a(Ca);if(!h){return false}if(ba&1){if(Ca.x-h.x<h.w/2){e.dx-=h.x-Ca.x}else{e.dx-=h.x+h.w-Ca.x}}if(ba&2){if(Ca.y-h.y<h.h/2){e.dy-=h.y-Ca.y}else{e.dy-=h.y+h.h-Ca.y}}}break}return true}}var lm=2*Math.PI/16,r=undefined,ia=0,qc=undefined,Ca=undefined,Qe=undefined,qe=undefined,md=undefined,ba=undefined,Xb=undefined,ld=undefined,wk=false,Wf=undefined,Fb=undefined;
function _DD_Install(a){if(!a){a=document}Fb=a;$c(Fb.body,"mousedown",mm)}var Ah=[];function om(a){Ah.push(a)}function ej(a,b){for(var c=Ah.length-1;c>=0;--c){var d=Ah[c](a,b);if(d){return d}}return undefined}var pe;function mm(a){pe=Yi(a||window.event);$c(Fb.body,"mousemove",Hg);$c(Fb.body,"mouseup",Ig);return false}function nm(a){var b=undefined;for(var c=a.srcElement||a.target;c;c=c.parentNode){b=ej(c,a);if(!b)continue;Ca=dd(a);if(b.Gb(a,c)){if(!(r&&ia>=0&&ia<6&&1===1+ia%1&&ba&&0===(ba&-4))){var d=
"Bogus drag: el="+r+", type="+ia+", axis mask="+ba;vf();Li(d)}a.cancelBubble=true;qc=b;Qe=Ca;qe={x:r.offsetLeft,y:r.offsetTop,w:r.offsetWidth,h:r.offsetHeight};if(ia===4){md=[Ca]}Xb=new ie(0,0);ld=new ie(0,0);if(ia===1||ia===2||ia===5){if(ia!==2&&qc.useUserDefinedAlpha&&!qc.useUserDefinedAlpha()){cj(r,true)}Wf=r.style.zIndex;r.style.zIndex=2000}if(ge()){$c(Fb.body,"mouseleave",wf)}else{$c(Fb.body,"mouseout",wf)}}else{vf()}return false}return true}function Ig(a){if(pe){pe=null;fe(Fb.body,"mousemove",
Hg);fe(Fb.body,"mouseup",Ig);var b=undefined;for(var c=a.srcElement||a.target;c;c=c.parentNode){b=ej(c,a);if(b&&b.handleClick){b.handleClick(c,a);return false}}return}var d=a||Fb.parentWindow.event;if(!qc.Nh(d,r,ia)){uf()}else{vf()}}function Hg(a){if(pe){var b=nm(pe);pe=null;if(b){uf();return true}}if(!r){return true}if(!qc){return true}var c=a||Fb.parentWindow.event;c.cancelBubble=true;var d=dd(c),e=new ie(d.x-Ca.x+Xb.dx,d.y-Ca.y+Xb.dy);if(!(e.dx|e.dy)){return false}var f=new ie(e.dx,e.dy);Ca=d;
wk=true;var g=Ki(r);if(ba&1){ld.dx+=f.dx}if(ba&2){ld.dy+=f.dy}if(qc.fd(c,r,ia,f,ld)){var h=Ki(r);ld.dx-=h.x-g.x;ld.dy-=h.y-g.y;switch(ia){case 1:case 2:case 5:Xb.dx=e.dx-f.dx;Xb.dy=e.dy-f.dy;break}switch(ia){case 1:if(!(ba&1)){f.dx=0}if(!(ba&2)){f.dy=0}var i=r.currentStyle?r.currentStyle:r.ownerDocument.defaultView.getComputedStyle(r,"");if(i&&i.position=="relative"){r.style.left=ld.dx+"px";r.style.top=ld.dy+"px"}else{var j=r.offsetLeft+f.dx,l=r.offsetTop+f.dy;if(f.dx){r.style.left=j+"px"}if(f.dy){r.style.top=
l+"px"}if(f.dx&&j!==r.offsetLeft){r.style.left=j+j-r.offsetLeft+"px"}if(f.dy&&l!==r.offsetTop){r.style.top=l+l-r.offsetTop+"px"}}break;case 5:var p=gc(r);if(ba&1){var s=Ca.x+Xb.dx,y=Math.min(s,Qe.x),t=Math.abs(s-Qe.x);if(y!==p.x){var j=y;r.style.left=j+"px";if(j!==r.offsetLeft){r.style.left=j+j-r.offsetLeft+"px"}}if(t!==p.w){r.style.width=t+"px";if(t!=r.offsetWidth){t=Math.max(0,t+t-r.offsetWidth);r.style.width=t+"px"}}}if(ba&2){var B=Ca.y+Xb.dy,S=Math.min(B,Qe.y),M=Math.abs(B-Qe.y);if(S!==p.y){var l=
S;r.style.top=l+"px";if(l!==r.offsetTop){r.style.top=l+l-r.offsetTop+"px"}}if(M!==p.h){r.style.height=M+"px";if(M!=r.offsetHeight){M=Math.max(0,M+M-r.offsetHeight);r.style.height=M+"px"}}}break;case 2:if(f.dx&&ba&1){var kc=r.offsetWidth,t=kc+f.dx;if(t<0){Xb.dx+=t;t=0}if(t<1){Xb.dx+=t-1;t=1}r.style.width=t+"px";if(t!=r.offsetWidth){t+=t-r.offsetWidth;if(t<1){t=1}r.style.width=t+"px"}}if(f.dy&&ba&2){var Lc=r.offsetHeight,M=Lc+f.dy;if(M<0){Xb.dy+=M;M=0}if(M<1){Xb.dy+=M-1;M=1}r.style.height=M+"px";if(M!=
r.offsetHeight){M+=M-r.offsetHeight;if(M<1){M=1}r.style.height=M+"px"}}break;case 3:if(!(ba&1)){f.dx=0}if(!(ba&2)){f.dy=0}if(r.scrollBy){r.scrollBy(f.dx,f.dy)}else{f.dx*=-1;f.dy*=-1;var Aa=r.scrollLeft,Vg=r.scrollLeft+r.scrollWidth-r.offsetWidth,lc=r.scrollTop,Df=r.scrollTop+r.scrollHeight-r.offsetHeight;f.dx=Math.max(Math.min(f.dx,Vg),-Aa);f.dy=Math.max(Math.min(f.dy,Df),-lc);if(f.dx){r.scrollLeft=r.scrollLeft+f.dx}if(f.dy){r.scrollTop=r.scrollTop+f.dy}}break;case 4:if(f.dx|f.dy){if(md.length>=1){var Fd=
f,Mc=md[md.length-1],Ub=new ie(Fd.dx+Mc.dx,Fd.dy+Mc.dy),Gd=false;if(Ub.dx*Ub.dx+Ub.dy*Ub.dy<=25){Gd=true}else{var Ef=Math.atan2(Fd.dx,Fd.dy),Je=Math.atan2(Mc.dx,Mc.dy),Ff=Math.abs((Ef-Je+2*Math.PI)%(2*Math.PI));Gd=Ff<lm}if(Gd){Mc.dx=Ub.dx;Mc.dy=Ub.dy}else{md.push(f)}}else{md.push(f)}fj(md)}break}}else{uf()}return false}function wf(a){a=a||window.event;var b=a.relatedTarget||a.toElement;if(!b){uf()}}function vf(){if(ia!==0){if(r){if(ia===4){fj([])}qc.Lw(r,ia)}if(ia===1||ia===2||ia===5){if(ia!==2&&
qc.useUserDefinedAlpha&&!qc.useUserDefinedAlpha()){cj(r,false)}if(undefined!==Wf){r.style.zIndex=Wf;Wf=undefined}else{delete r.style.zIndex}}}r=undefined;ia=0;Ca=undefined;qe=undefined;ba=0;Xb=undefined;wk=false;if(qc){if(ge()){fe(Fb.body,"mouseleave",wf)}else{fe(Fb.body,"mouseout",wf)}}qc=undefined;fe(Fb.body,"mousemove",Hg);fe(Fb.body,"mouseup",Ig)}function uf(){switch(ia){case 1:var a=r.currentStyle?r.currentStyle:window.getComputedStyle(r,"");if(a&&a.position=="relative"){r.style.left="0px";r.style.top=
"0px"}else{r.style.left=qe.x+"px";r.style.top=qe.y+"px"}break;case 2:r.style.width=qe.w+"px";r.style.height=qe.h+"px";break;case 3:break;case 4:md=[];break;case 0:break;case 5:break;default:Li("failed to cancel drag with dd_dragType="+ia)}vf()}function cj(a,b){if(ge()){a.style.filter=b?"alpha(opacity=50)":"alpha(opacity=100)"}else{a.style.MozOpacity=b?0.5:1}}var Bh=false,Ch=undefined;function fj(a){Ch=a;if(!Bh){Bh=true;window.setTimeout(km,100)}}function km(){var a=Ch;Ch=undefined;Bh=false;if(!a){return}var b=
"";if(a.length){var c=a[0].x,d=a[0].y,e=0,f=0;for(var g=1;g<a.length;g++){var h=a[g];if(!(h.dx|h.dy)){continue}if(g!=0){b+="<img class=gestimg src=images/joiner.png width=5 height=5 style=left:"+(c-2)+"px;top:"+(d-2)+"px>"}var i=Math.atan2(h.dx,h.dy),j,l=Math.floor(i/(Math.PI/6));switch(l){case 0:case 6:case -6:j="vert.png";break;case 1:case -4:j="negslope.png";break;case 2:case -2:case 3:case -3:j="horz.png";break;case 4:case -1:j="posslope.png";break;case 5:case -5:j="vert.png";break}var p=Math.max(1,
Math.abs(h.dx)),s=Math.max(1,Math.abs(h.dy));b+="<img class=gestimg src=images/"+j+" width="+p+" height="+s+" style=left:"+(c+Math.min(h.dx,0))+"px;top:"+(d+Math.min(h.dy,0))+"px>";c+=h.dx;d+=h.dy;e=Math.max(c,e);f=Math.max(d,f)}}var y=hb("gesture");y.style.display="none";y.innerHTML=b;y.style.display="inline"}function gp(){}gp.prototype.fd=function(a,b,c,d,e){throw new Error("Unimplemented");};function vb(a){this.XA=a;this.$A=a?dj(a):undefined;this.Yw=false;this.AD=null;this.fp=3}var dj=function(a,b){b=b||[];if(a.className&&a.className.match(/\bddSelected\b/)){b.push(a)}else{for(var c=a.firstChild;c;c=c.nextSibling){dj(c,b)}}return b};vb.prototype.Hy=function(a,b){a.style.left=b.x+"px";a.style.top=b.y+"px";if(this.fp&1){a.style.width="0px"}if(this.fp&2){a.style.height="0px"}};vb.prototype.Iy=function(a){a.style.display="block"};vb.prototype.Gb=function(a,b){var c=hb("ddLasso");if(!c){c=
document.createElement("div");c.id="ddLasso";c.style.position="absolute";c.style.display="none";document.body.appendChild(c)}var d=dd(a);this.Hy(c,d);this.Iy(c);ia=5;ba=this.fp;r=c;this.AD=c;var e=this;window.setTimeout(function(){if(!e.finished){e.Xl(c)}},200);return true};vb.prototype.Nh=function(a,b,c){return true};vb.prototype.Uy=function(a){return a.className&&a.className.match(/\bddSelectable\b/)};vb.prototype.tp=function(a,b,c){if(this.Uy(a)){var d=gc(a);if(!(b.x+b.w<d.x||d.x+d.w<b.x||b.y+
b.h<d.y||d.y+d.h<b.y)){c.push(a)}return}else{for(var e=a.firstChild;e;e=e.nextSibling){this.tp(e,b,c)}}};vb.prototype.Xl=function(a){if(!this.XA)return;var b=[];this.tp(this.XA,gc(a),b);this.oe(b);if(!this.Yw){var c=this;window.setTimeout(function(){if(!c.finished){c.Xl(a)}},200)}};vb.prototype.oe=function(a){var b=this.$A;for(var c=a.length;--c>=0;){a[c].dd_newSelection=true}for(var c=b.length;--c>=0;){var d=b[c];d.dd_oldSelection=true;if(!d.dd_newSelection){d.className=d.className.replace(/\s*\bddSelected\b/g,
"")}}for(var c=a.length;--c>=0;){var d=a[c];if(!d.dd_oldSelection){d.className=(d.className||" ")+" ddSelected"}d["dd_newSelection"]=false}for(var c=b.length;--c>=0;){b[c].dd_oldSelection=false}this.$A=a};vb.prototype.fd=function(a,b,c,d){return true};vb.prototype.Lw=function(a,b){this.Yw=true;this.Xl(a);a.style.display="none"};function De(a,b){vb.call(this,a);this.xE=jm(b);this.gridFn=b}De.prototype=new vb(undefined);De.prototype.constructor=De;De.prototype.fd=function(a,b,c,d){return vb.prototype.fd(a,
b,c,d)&&this.xE(a,b,c,d)};De.prototype.Gb=function(a,b){if(vb.prototype.Gb.call(this,a,b)){var c=this.gridFn(Ca,true);if(ba&1){Ca.x=Ca.x-c.x<c.w>>1?c.x:c.x+c.w}if(ba&2){Ca.y=Ca.y-c.y<c.h>>1?c.y:c.y+c.h}return true}else{return false}};function $o(){this.hg=[]}function _PC_Install(a){if(yk)return false;yk=true;var b=a?a:document;$c(b.body,"mousedown",Ko);return true}function Ko(a){if(Qd.hg.length==0)return false;var a=a||window.event;for(var b=Qd.hg.length-1;b>=0;--b){var c=Qd.hg[b];fk(c);if(c.Fh(a)){Qd.hg.splice(b,1)}}return true}function Jo(a){fk(a);for(var b=0;b<Qd.hg.length;++b){if(a===Qd.hg[b])return false}Qd.hg.push(a);return true}function fk(a){ad(a.Fh,Function,"popup missing deactivate function")}var Qd=new $o,yk=false;var yc,Pm=function(a){return yc=a},Qm=function(a,b,c,d,e){return Mm(a,e)(b,c,d)},Mm=function(a,b){b=kj(b);return Sm(b.DATEFORMATS[a],b)},Sm=function(a,b){b=kj(b);var c=[];Rm(a,c);return function(d,e,f){var g=new nh,h=[e],i=-1,j=0,l=0;for(var p=0;p<c.length;++p){if(c[p].count>0){if(i<0&&c[p].abutStart){i=p;j=e;l=0}if(i>=0){var s=c[p].count;if(p==i){s-=l;l++;if(s==0){return 0}}if(!mj(d,h,c[p],s,g)){p=i-1;h[0]=j;continue}}else{i=-1;if(!mj(d,h,c[p],0,g)){return 0}}}else{i=-1;if(c[p].text.charAt(0)==" "){var y=
h[0];lj(d,h);if(h[0]>y){continue}}else if(d.indexOf(c[p].text,h[0])==h[0]){h[0]+=c[p].text.length;continue}return 0}}if(!g.Uv(f)){return 0}return h[0]-e}},kj=function(a){if(!a){if(!yc){yc=nb}a=yc}return a},Nm=function(a,b){var c=a.charAt(b),d=b+1;while(d<a.length&&a.charAt(d)==c){++d}return d-b},Lg=function(a){if(a.count<=0){return false}var b="MydhHmsSDkK".indexOf(a.text.charAt(0));return b>0||b==0&&a.count<3},Om=function(a){var b=false;for(var c=0;c<a.length;c++){if(Lg(a[c])){if(!b&&c+1<a.length&&
Lg(a[c+1])){b=true;a[c].abutStart=true}}else{b=false}}},Rm=function(a,b){var c=false,d="";for(var e=0;e<a.length;e++){var f=a.charAt(e);if(f==" "){if(d.length>0){b.push({text:d,count:0,abutStart:false});d=""}b.push({text:" ",count:0,abutStart:false});while(e+1<a.length&&a.charAt(e+1)==" "){e++}continue}if(c){if(f=="'"){if(e+1<a.length&&a.charAt(e+1)=="'"){d+=f;++e}else{c=false}}else{d+=f}continue}if("GyMdkHmsSEDahKzZv".indexOf(f)>=0){if(d.length>0){b.push({text:d,count:0,abutStart:false});d=""}var g=
Nm(a,e);b.push({text:f,count:g,abutStart:false});e+=g-1;continue}if(f=="'"){if(e+1<a.length&&a.charAt(e+1)=="'"){d+="'";e++}else{c=true}}else{d+=f}}if(d.length>0){b.push({text:d,count:0,abutStart:false})}Om(b)},lj=function(a,b){var c=a.substring(b[0]).match(/^\s+/);if(c){b[0]+=c[0].length}},mj=function(a,b,c,d,e){lj(a,b);var f=b[0],g=c.text.charAt(0),h=-1;if(Lg(c)){if(d>0){if(f+d>a.length){return false}h=Fe(a.substring(0,f+d),b)}else{h=Fe(a,b)}}switch(g){case "G":e.era=he(a,b,yc.ERAS);return true;
case "M":return Vm(a,b,e,h);case "E":return Tm(a,b,e);case "a":e.ampm=he(a,b,yc.AMPMS);return true;case "y":return Wm(a,b,f,h,c,e);case "d":e.day=h;return true;case "S":return Um(h,b,f,e);case "h":if(h==12){h=0}case "K":case "H":case "k":e.hours=h;return true;case "m":e.minutes=h;return true;case "s":e.seconds=h;return true;case "z":case "Z":case "v":return Xm(a,b,e);default:return false}},Wm=function(a,b,c,d,e,f){var g;if(d<0){g=a.charAt(b[0]);if(g!="+"&&g!="-"){return false}b[0]++;d=Fe(a,b);if(d<
0){return false}if(g=="-"){d=-d}}if(g==null&&b[0]-c==2&&e.count==2){f.KB(d)}else{f.q=d}return true},Vm=function(a,b,c,d){if(d<0){d=he(a,b,yc.MONTHS);if(d<0){d=he(a,b,yc.SHORTMONTHS)}if(d<0){return false}c.o=d;return true}else{c.o=d-1;return true}},Tm=function(a,b,c){var d;d=he(a,b,yc.WEEKDAYS);if(d<0){d=he(a,b,yc.SHORTWEEKDAYS)}if(d<0){return false}c.dayOfWeek=d;return true},Um=function(a,b,c,d){var e=b[0]-c;if(e<3){while(e<3){a*=10;e++}}else{var f=1;while(e>3){f*=10;e--}a=(a+(f>>1))/f}d.milliseconds=
a;return true},Xm=function(a,b,c){if(a.indexOf("GMT",b[0])==b[0]){b[0]+="GMT".length;return jj(a,b,c)}return jj(a,b,c)},jj=function(a,b,c){if(b[0]>=a.length){c.tzOffset=0;return true}var d=1;switch(a.charAt(b[0])){case "-":d=-1;case "+":b[0]++;break}var e=b[0],f=Fe(a,b);if(f==0&&b[0]==e){return false}var g;if(b[0]<a.length&&a.charAt(b[0])==":"){g=f*60;b[0]++;e=b[0];f=Fe(a,b);if(f==0&&b[0]==e){return false}g+=f}else{g=f;if(g<24&&b[0]-e<=2)g*=60;else g=g%100+g/100*60}g*=d;c.tzOffset=-g;return true},
Fe=function(a,b){var c=a.substring(b[0]).match(/^\d+/);if(!c){return-1}b[0]+=c[0].length;return parseInt(c[0],10)},he=function(a,b,c){var d=c.length,e=0,f=-1,g=a.substring(b[0]).toLowerCase();for(var h=0;h<d;++h){var i=c[h].length;if(i>e&&g.indexOf(c[h].toLowerCase())==0){f=h;e=i}}if(f>=0){b[0]+=e}return f};function nh(){}nh.prototype.KB=function(a){var b=new Date,c=b.getFullYear()-80,d=c%100;this.ambiguousYear=a==d;a+=Math.floor(c/100)*100+(a<d?100:0);return this.q=a};nh.prototype.Uv=function(a){if(this.era!==
undefined&&this.q!==undefined&&this.era==0&&this.q>0){this.q=-(this.q-1)}if(this.q!==undefined){a.setFullYear(this.q)}var b=a.getDate();a.setDate(1);if(this.o!==undefined){a.setMonth(this.o)}if(this.day!==undefined){a.setDate(this.day)}else{a.setDate(b)}if(this.hours===undefined){this.hours=a.getHours()}if(this.ampm!==undefined&&this.ampm>0){if(this.hours<12){this.hours+=12}}a.setHours(this.hours);if(this.minutes!==undefined){a.setMinutes(this.minutes)}if(this.seconds!==undefined){a.setSeconds(this.seconds)}if(this.milliseconds!==
undefined){a.setMilliseconds(this.milliseconds)}if(this.tzOffset!==undefined){var c=a.getTimezoneOffset();a.setTime(a.getTime()+(this.tzOffset-c)*60*1000)}if(this.ambiguousYear){var d=new Date;d.setFullYear(d.getFullYear()-80);if(a.getTime()<d.getTime()){a.setFullYear(d.getFullYear()+100)}}if(this.dayOfWeek!==undefined){if(this.day==undefined){var e=(7+this.dayOfWeek-a.getDay())%7;if(e>3){e-=7}var f=a.getMonth();a.setDate(a.getDate()+e);if(a.getMonth()!=f){a.setDate(a.getDate()+(e>0?-7:7))}}else if(this.dayOfWeek!=
a.getDay()){return false}}return true};var yf,nb;function Mr(a,b){nb=a}var Kg=function(a,b,c){return Km(a,c)(b,c)},ij=function(a){yf=a},hj=[/^\'(?:[^\']|\'\')*\'/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvzZ]+/],Km=function(a,b){b=Lm(b);var c=[];while(a){for(var d=0;d<hj.length;++d){var e=a.match(hj[d]);if(e){var f=e[0];a=a.substring(f.length);if(d==0){if(f=="''"){f="'"}else{f=f.substring(1,f.length-1);f=f.replace(/\'\'/,"'")}}c.push({text:f,type:d});break}}}return function(g){var h="";for(var i=
0;i<c.length;++i){if(1==c[i].type){var j=c[i].text,l=Bm[j.charAt(0)];h+=l(j.length,g,b)}else{h+=c[i].text}}return h}},Oa=function(a,b){var c=String(a);while(c.length<b){c="0000000000000000".substring(0,Math.min(b-c.length,"0000000000000000".length))+c}return c},zm=function(a,b,c){var d=b.getFullYear()>0?1:0;return a>=4?c.ERANAMES[d]:c.ERAS[d]},Jm=function(a,b,c){var d=b.getFullYear();if(d<0){d=-d}return a==2?Oa(d%100,2):String(d)},Dm=function(a,b,c){var d=b.getMonth();switch(a){case 5:return c.NARROWMONTHS[d];
case 4:return c.MONTHS[d];case 3:return c.SHORTMONTHS[d];default:return Oa(d+1,a)}},vm=function(a,b,c){var d=b.getHours();return d==0?Oa(24,a):Oa(d,a)},Am=function(a,b,c){var d=b.getTime()%1000;if(a==1){return String(Math.round(d/100))}if(a==2){d=Math.floor(d/10);return Oa(d,2)}var e=Oa(d,3);if(a>3){e+=Oa(0,a-3)}return e},ym=function(a,b,c){var d=b.getDay();return a>=4?c.WEEKDAYS[d]:c.SHORTWEEKDAYS[d]},wm=function(a,b,c){return b.getHours()>=12&&b.getHours()<24?c.AMPMS[1]:c.AMPMS[0]},um=function(a,
b,c){var d=b.getHours()%12;return d==0?Oa(12,a):Oa(d,a)},sm=function(a,b,c){var d=b.getHours()%12;return Oa(d,a)},tm=function(a,b,c){var d=b.getHours();return Oa(d,a)},Gm=function(a,b,c){var d=b.getDay();switch(a){case 5:return c.STANDALONENARROWWEEKDAYS[d];case 4:return c.STANDALONEWEEKDAYS[d];case 3:return c.STANDALONESHORTWEEKDAYS[d];default:return Oa(d,1)}},Hm=function(a,b,c){var d=b.getMonth();switch(a){case 5:return c.STANDALONENARROWMONTHS[d];case 4:return c.STANDALONEMONTHS[d];case 3:return c.STANDALONESHORTMONTHS[d];
default:return Oa(d+1,a)}},Em=function(a,b,c){var d=Math.floor(b.getMonth()/3);return a<4?c.SHORTQUARTERS[d]:c.QUARTERS[d]},xm=function(a,b,c){var d=b.getDate();return Oa(d,a)},Cm=function(a,b,c){var d=b.getMinutes();return Oa(d,a)},Fm=function(a,b,c){var d=b.getSeconds();return Oa(d,a)},Im=function(a,b,c){if(a<4){var d=b.getTimezoneOffset(),e="-";if(d<0){d=-d;e="+"}d=d/3*5+d%60;return e+Oa(d,4)}return Jg(a,b,c)},Jg=function(a,b,c){var d=b.getTimezoneOffset(),e="";if(d>0){e+="GMT-"}else{d=-d;e+="GMT+"}e+=
Oa(d/60,2);e+=":";e+=Oa(d%60,2);return e},Bm={G:zm,y:Jm,M:Dm,k:vm,S:Am,E:ym,a:wm,h:um,K:sm,H:tm,c:Gm,L:Hm,Q:Em,d:xm,m:Cm,s:Fm,v:Jg,z:Jg,Z:Im},Lm=function(a){if(!a){if(!yf){yf=nb}a=yf}return a};var Vk=function(a,b){ja.call(this,a);this.detail=b};Vk.D(ja);var we=function(a,b){Xd.call(this);this.browserEventName=a;this.useCapture=Boolean(b)};we.D(Xd);we.prototype.Jl=function(a){a.Vp=da(this.Em,this,a);n(a.src,this.browserEventName,a.Vp,this.useCapture)};we.prototype.nn=function(a){D(a.src,this.browserEventName,a.Vp,this.useCapture);delete a.Vp};we.prototype.Em=function(a,b){};var Wk=function(){if(Wh){return Wh}we.call(this,yd?"DOMMouseScroll":"mousewheel");Wh=this},Wh;Wk.D(we);Wk.prototype.Em=function(a,b){var c=0,d=b.ix();if(d.type=="mousewheel"){c=-d.wheelDelta/40;if(fc){c/=3}else if(kf){c=-c}}else{c=d.detail}if(c>100){c=3}else if(c<-100){c=-3}var e=new Vk(this,c);a.proxy(e);if(e.yi==false){b.preventDefault()}};var Hb=function(){this.yD=false;this.zD=false;this.ke=[];this.Hc=[];this.Kw=null;this.UB=null;this.$B=null};Hb.D(O);var Jq=5;Hb.prototype.Bf=function(){if(this.yD){for(var a,b=0;a=this.ke[b];b++){n(a.element,na,a.Bz,true,a);if(this.UB){fa(a.element,this.UB)}}}if(this.zD&&this.$B){for(var a,b=0;a=this.ke[b];b++){fa(a.element,this.$B)}}};Hb.prototype.Gb=function(a,b){if(this.be){return}this.be=b;var c=new tc("dragstart",this,this.be);if(this.dispatchEvent(c)==false){c.j();return}c.j();var d=b.kx(),
e=pa(d);e.x-=parseInt(ff(d,"marginLeft"),10)*2;e.y-=parseInt(ff(d,"marginTop"),10)*2;this.ae=this.fw(d);this.ae.style.position="absolute";this.ae.style.left=e.x+"px";this.ae.style.top=e.y+"px";if(this.Kw){fa(this.ae,this.Kw)}Mb(d).body.appendChild(this.ae);this.cd=new uc(this.ae);n(this.cd,"drag",this.Lr,false,this);n(this.cd,"end",this.vg,false,this);this.Qn=[];for(var f,g=0;f=this.Hc[g];g++){for(var h,i=0;h=f.ke[i];i++){this.qv(f,h)}}if(!this.Uf){this.Uf=new Ua(0,0,0,0)}this.vh=null;this.cd.Gb(a);
a.preventDefault()};Hb.prototype.vg=function(a){var b=this.vh;if(b&&b.wb){var c=a.clientX,d=a.clientY,e=Sb(this.ae),f=c+e.scrollLeft,g=d+e.scrollTop,h=new tc("drag",this,this.be,b.wb,b.ki,b.b,c,d,f,g);this.dispatchEvent(h);h.j();var i=new tc("drop",this,this.be,b.wb,b.ki,b.b,c,d,f,g);b.wb.dispatchEvent(i);i.j()}var j=new tc("dragend",this,this.be);this.dispatchEvent(j);j.j();D(this.cd,"drag",this.Lr,false,this);D(this.cd,"end",this.vg,false,this);this.cd.j();z(this.ae);delete this.be;delete this.ae;
delete this.cd;delete this.Qn;delete this.vh};Hb.prototype.Lr=function(a){var b=a.clientX,c=a.clientY,d=Sb(this.ae);b+=d.scrollLeft;c+=d.scrollTop;var e=this.vh;if(e){if(this.Om(b,c,e.ka)){return}if(e.wb){var f=new tc("dragout",this,this.be,e.wb,e.ki,e.b);this.dispatchEvent(f);f.j();var g=new tc(this,this.be,e.wb,e.ki,e.b);e.wb.dispatchEvent(g);g.j()}this.vh=null}if(!this.Om(b,c,this.Uf)){return}e=(this.vh=this.Wx(b,c));if(e&&e.wb){var h=new tc("dragover",this,this.be,e.wb,e.ki,e.b);this.dispatchEvent(h);
h.j();var i=new tc("dragover",this,this.be,e.wb,e.ki,e.b);e.wb.dispatchEvent(i);i.j()}if(!e){this.qw(b,c)}};Hb.prototype.fw=function(a){switch(a.tagName.toLowerCase()){case "tr":return Ia("table",null,Ia("tbody",null,a.cloneNode(true)));case "td":case "th":return Ia("table",null,Ia("tbody",null,Ia("tr",null,a.cloneNode(true))));default:return a.cloneNode(true)}};Hb.prototype.qv=function(a,b){var c=b.qx(),d=this.Qn;for(var e=0;e<c.length;e++){var f=c[e],g=pa(f),h=ta(f),i=new Ua(g.y,g.x+h.width,g.y+
h.height,g.x);d.push(new hl(i,a,b,f));if(d.length==1){this.Uf=new Ua(i.top,i.right,i.bottom,i.left)}else{var j=this.Uf;j.left=Math.min(i.left,j.left);j.right=Math.max(i.right,j.right);j.top=Math.min(i.top,j.top);j.bottom=Math.max(i.bottom,j.bottom)}}};Hb.prototype.qw=function(a,b){var c=new Ua(this.Uf.top,this.Uf.right,this.Uf.bottom,this.Uf.left);for(var d,e=0;d=this.Qn[e];e++){if(d.ka.right<=a&&d.ka.right>c.left){c.left=d.ka.right}if(d.ka.left>=a&&d.ka.left<c.right){c.right=d.ka.left}if(d.ka.bottom<=
b&&d.ka.bottom>c.top){c.top=d.ka.bottom}if(d.ka.top>=b&&d.ka.top<c.bottom){c.bottom=d.ka.top}}this.vh=new hl(c)};Hb.prototype.Wx=function(a,b){for(var c,d=0;c=this.Qn[d];d++){if(this.Om(a,b,c.ka)){return c}}return null};Hb.prototype.Om=function(a,b,c){return a>c.left&&a<c.right&&b>c.top&&b<c.bottom};var tc=function(a,b,c,d,e,f,g,h,i,j){ja.call(this,a);this.dragSource=b;this.dragSourceItem=c;this.dropTarget=d;this.dropTargetItem=e;this.dropTargetElement=f;this.clientX=g;this.clientY=h;this.viewportX=
i;this.viewportY=j};tc.D(ja);tc.prototype.j=function(){if(!this.Ab()){tc.sa.j.call(this);this.dragSource=undefined;this.dragSourceItem=undefined;this.dropTarget=undefined;this.dropTargetItem=undefined;this.dropTargetElement=undefined}};var Uc=function(a,b){this.element=k(a);this.data=b;this.p=null;if(!this.element){throw Error("Invalid argument");}};Uc.D(O);Uc.prototype.Bh=null;Uc.prototype.px=function(a){return a};Uc.prototype.kx=function(){return this.Bh};Uc.prototype.qx=function(){return[this.element]};
Uc.prototype.Bz=function(a){var b=this.px(a.target);if(b){n(b,ac,this.Qg,true,this);n(b,Ob,this.Qg,true,this);n(b,zb,this.an,true,this);this.Bh=b;this._startPosition=new sa(a.clientX,a.clientY)}};Uc.prototype.Qg=function(a){var b=Math.abs(a.clientX-this._startPosition.x)+Math.abs(a.clientY-this._startPosition.y);if(b>Jq){var c=this.Bh;D(c,ac,this.Qg,true,this);D(c,Ob,this.Qg,true,this);D(c,zb,this.an,true,this);delete this._startPosition;this.p.Gb(a,this)}};Uc.prototype.an=function(a){var b=this.Bh;
D(b,ac,this.Qg,true,this);D(b,Ob,this.Qg,true,this);D(b,zb,this.an,true,this);delete this._startPosition;this.Bh=null};var hl=function(a,b,c,d){this.ka=a;this.wb=b;this.ki=c;this.b=d};var Kq=function(a,b){Hb.call(this);var c=new Uc(a,b);if(c){c.p=this;this.ke.push(c)}};Kq.D(Hb);var jl=function(){Hb.call(this)};jl.D(Hb);jl.prototype.oe=function(a){};var Gc=function(a,b,c,d,e){if(/;=/g.test(a)){throw new Error('Invalid cookie name "'+a+'"');}if(/;/g.test(b)){throw new Error('Invalid cookie value "'+b+'"');}if(!Q(c)){c=-1}var f=e?";domain="+e:"",g=d?";path="+d:"",h;if(c<0){h=""}else if(c==0){var i=new Date(1970,1,1);h=";expires="+i.toUTCString()}else{var j=new Date((new Date).getTime()+c*1000);h=";expires="+j.toUTCString()}document.cookie=a+"="+b+f+g+h},vc=function(a,b){var c=a+"=",d=String(document.cookie);for(var e=-1;(e=d.indexOf(c,e+1))>=0;){var f=
e;while(--f>=0){var g=d.charAt(f);if(g==";"){f=-1;break}}if(f==-1){var h=d.indexOf(";",e);if(h<0){h=d.length}return d.substring(e+c.length,h)}}return b},ef=function(a,b,c){var d=rl(a);Gc(a,"",0,b,c);return d},rl=function(a){var b={};return vc(a,b)!==b};var R=function(a){I.call(this,a);this.oa=new Nb(this)};R.D(I);R.prototype.la=true;R.prototype.$o=true;R.prototype.Ac=null;R.prototype.zd=-1;R.prototype.ni=false;var Jl=A?sc:ud;R.prototype.ge=function(){return"goog.ui.Menu"};R.prototype.ea=function(){R.sa.ea.call(this);this.Ac=this.Ac||this.b;this.b.className="goog-menu";u(this.b,this.la)};R.prototype.Mb=function(){R.sa.Mb.call(this);if(!this.Ac.tabIndex>=0){this.Ac.tabIndex="0"}this.oa.ta(this,"enter",this.Qb);this.oa.ta(this,"leave",this.Ea);this.oa.ta(this.Ac,
Jl,this.Ob);this.oa.ta(this.Ac,"blur",this.pi);this.oa.ta(this.b,na,this.Pb);this.oa.ta(Mb(this.b),zb,this.ra)};R.prototype.Zb=function(){R.sa.Zb.call(this);if(this.oa){this.oa.Od(this,jq,this.Qb);this.oa.Od(this,lq,this.Ea);this.oa.Od(this.Ac,Jl,this.Ob);this.oa.Od(this.Ac,"blur",this.pi);this.oa.Od(this.b,na,this.Pb);this.oa.Od(Mb(this.b),zb,this.ra)}};R.prototype.j=function(){if(!this.Ab()){R.sa.j.call(this);this.oa.j();this.b=null;this.oa=null}};R.prototype.Lc=function(a){this.b=a;this.Ac=this.Ac||
a;var b=this.b.childNodes;for(var c,d=0;c=b[d];d++){if(c.nodeType==1&&qd(c,"goog-menuitem")){var e=new Wa("",null,this.V);this.Xo(e);e.Gh(c)}else if(c.tagName=="HR"){var f=new Yc(this.V);this.Xo(f);f.Gh(c)}}};R.prototype.da=function(a){var b=a?"show":"hide";if(this.la!=a&&this.dispatchEvent(b)){this.la=a;if(this.b){u(this.b,a)}if(a&&this.Mc&&this.$o){this.Ac.focus()}return true}else{return false}};R.prototype.$a=function(){return this.Mc&&this.la};R.prototype.setPosition=function(a,b){if(!this.la){u(this.b,
true)}xd(this.b,a,b);if(!this.la){u(this.b,false)}};R.prototype.dh=function(a){if(this.zd==a){return}if(this.zd>-1){this.Bg(this.zd).zn(false)}if(a>-1){var b=this.Bg(a);b.zn(true,this.ni);b.dispatchEvent("highlight")}this.zd=a};R.prototype.xx=function(){return this.Bg(this.zd)};R.prototype.oy=function(){this.Vj(function(a,b){return(a+1)%b},this.Fj()-1)};R.prototype.py=function(){this.Vj(function(a,b){a--;return a<0?b-1:a},0)};R.prototype.qy=function(){this.Vj(function(a,b){return(a+1)%b},this.zd)};
R.prototype.ry=function(){this.Vj(function(a,b){a--;return a<0?b-1:a},this.zd)};R.prototype.Vj=function(a,b){var c=b,d=this.Fj();c=a(c,d);var e=0;while(e<=d){if(this.Bg(c).Rh()){this.dh(c);return}e++;c=a(c,d)}};R.prototype.Qb=function(a){var b=a.target,c=this.gr(b);this.dh(c);if(this.$o){this.Ac.focus()}};R.prototype.Ea=function(a){var b=a.target,c=this.gr(b);if(this.zd==c){this.dh(-1)}};R.prototype.Ob=function(a){if(!this.$a()){return}switch(a.keyCode){case 27:this.dh(-1);break;case 13:this.xx().dispatchEvent("action");
break;case 35:this.py();break;case 36:this.oy();break;case 38:this.ry();break;case 40:this.qy();break;default:return}a.preventDefault()};R.prototype.pi=function(a){this.dh(-1)};R.prototype.Pb=function(a){this.ni=true;if(this.zd!=-1){var b=this.Bg(this.zd);b.zn(true,this.ni)}a.preventDefault()};R.prototype.ra=function(a){this.ni=false};R.prototype.Ex=function(){return this.ni};var Wa=function(a,b,c){I.call(this,c);this.caption=a;this.tB(b);this.ea()};Wa.D(I);Wa.prototype.caption="";Wa.prototype.Ke=true;Wa.prototype.la=true;Wa.prototype.ge=function(){return"goog.ui.MenuItem"};Wa.prototype.ea=function(){this.b=(this.Ac=this.V.ea("div",{"class":"goog-menuitem"},this.caption))};Wa.prototype.Lc=function(a){this.b=a;this.caption=Rh(a)};Wa.prototype.Mb=function(){Wa.sa.Mb.call(this);n(this.b,Sc,this.Qb,false,this);n(this.b,Ob,this.Ea,false,this);n(this.b,zb,this.ra,false,this)};
Wa.prototype.Zb=function(){Wa.sa.Zb.call(this);D(this.b,Sc,this.Qb,false,this);D(this.b,Ob,this.Ea,false,this);D(this.b,zb,this.ra,false,this)};Wa.prototype.da=function(a){u(this.b,a);this.la=a};Wa.prototype.$a=function(){return this.la};Wa.prototype.Rh=function(){return this.Ke&&this.la};Wa.prototype.zn=function(a,b){if(a){fa(this.b,"goog-menuitem-highlight",b?"goog-menuitem-active":"")}else{qa(this.b,"goog-menuitem-highlight","goog-menuitem-active")}};Wa.prototype.Qb=function(a){if(this.Ke){this.dispatchEvent("enter")}};
Wa.prototype.Ea=function(a){if(this.Ke){this.dispatchEvent("leave")}};Wa.prototype.ra=function(a){if(this.Ke&&this.he().Ex()){qa(this.b,"goog-menuitem-active");this.dispatchEvent("action")}};var Yc=function(a){I.call(this,a);this.ea()};Yc.D(I);Yc.prototype.la=true;Yc.prototype.ge=function(){return"goog.ui.MenuSeparator"};Yc.prototype.Lc=function(a){this.b=a};Yc.prototype.ea=function(){this.b=this.V.ea("hr")};Yc.prototype.Rh=function(){return false};Yc.prototype.da=function(a){u(this.b,a);this.la=a};Yc.prototype.$a=function(){return this.la};var ha=function(a){R.call(this,a);this.Hc=new oa};ha.D(R);ha.prototype.la=false;ha.prototype.kC=false;ha.prototype.yr=0;ha.prototype.Lc=function(a){ha.sa.Lc.call(this,a);var b=a.getAttribute("for")||a.htmlFor;if(b){this.Wd(this.V.Va(b),3)}};ha.prototype.Mb=function(){ha.sa.Mb.call(this);ec(this.Hc,this.dp,this);this.oa.ta(this,"action",this.Qr);this.oa.ta(this.V.wd(),ka,this.Sr,true)};ha.prototype.Zb=function(){ha.sa.Zb.call(this);ec(this.Hc,this.Ip,this);this.oa.Od(this,"action",this.Qr);this.oa.Od(this.V.wd(),
ka,this.Sr,true)};ha.prototype.Wd=function(a,b,c){var d=$a(a);if(nr(this.Hc,d)){throw Error("Can not attach menu to the same element more than once.");}var e={b:a,aC:b,OD:c};this.Hc.J(d,e);if(this.Ef()){this.dp(e)}};ha.prototype.dp=function(a){this.oa.ta(a.b,ka,this.Ur)};ha.prototype.detach=function(a){var b=$a(a);if(!lr.Zc(this.Hc,b)){throw Error("Menu not attached to provided element, unable to detach.");}if(this.Ef()){this.Ip(this.Hc.get(b))}this.Hc.remove(b)};ha.prototype.Ip=function(a){this.oa.Od(a.b,
ka,this.Ur)};ha.prototype.SB=function(a,b,c){if((this.$a()||this.CC())&&this.kC){this.di();return}var d=a.aC?new Ei(a.b,a.aC):new Kl(b,c),e=a.OD||1;this.b.style.visiblity="hidden";u(this.b,true);d.kb(this.b,e,new Ua(0,0,0,0));this.b.style.visiblity="visible";this.dh(-1);this.da(true)};ha.prototype.di=function(){this.yr=ya();this.da(false)};ha.prototype.CC=function(){return ya()-this.yr<50};ha.prototype.Qr=function(a){this.di()};ha.prototype.Ur=function(a){var b=this.Hc.Le();for(var c=0;c<b.length;c++){var d=
this.Hc.get(b[c]);if(d.b==a.currentTarget){this.SB(d,a.clientX,a.clientY);a.stopPropagation();return}}};ha.prototype.Sr=function(a){if(this.$a()){this.di()}};ha.prototype.Ob=function(a){ha.sa.Ob.call(this,a);if(this.$a()&&a.keyCode==27){this.di()}};ha.prototype.pi=function(a){ha.sa.pi.call(this,a);this.di()};ha.prototype.j=function(){if(!this.Ab()){ha.sa.j.call(this);if(this.Hc){this.Hc.clear();this.Hc=null}}};var Br,Nl;(function(){function a(h){var i=h.match(/[\d]+/g);i.length=3;return i.join(".")}var b=false,c="";if(navigator.plugins&&navigator.plugins.length){var d=navigator.plugins["Shockwave Flash"];if(d){b=true;if(d.description){c=a(d.description)}}if(navigator.plugins["Shockwave Flash 2.0"]){b=true;c="2.0.0.11"}}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var e=navigator.mimeTypes["application/x-shockwave-flash"];b=e&&e.enabledPlugin;if(b){c=a(e.enabledPlugin.description)}}else{try{var f=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");b=true;c=a(f.GetVariable("$version"))}catch(g){try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");b=true;c="6.0.21"}catch(g){try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b=true;c=a(f.GetVariable("$version"))}catch(g){}}}}Br=b;Nl=c})();function P(a,b,c,d){this.Yd=this.oz();this.tE=a;this.mt=b;this.Km=c;this.yk=d;this.qj={};this.Ib=[];this.AE=[];this.dc=0;this.Xe=null;this.WE=false;this.zA=false;this.Cw=false;this.Db=null;this.Ai=null;this.PB();this.$d=null;this.aD=null;this.lw=parseInt(this.lq("contentWidth"),10);this.VC=parseInt(this.lq("contentHeight"),10);this.iz();if(this.$d!=null){this.dc=this.$d.selectMode}this.ft=new nc(this);this.lc=new ma(this);this.kg=new Kb(this);this.MF={};this.az();if(this.$d!=null){this.wq()}document.body.appendChild(this.Yd)}
var yn,Cj;P.prototype.oq=function(a){var b={};b.width=this.lw;b.height=this.VC;return b};P.prototype.az=function(){var a=document.createElement("table"),b=document.createElement("tbody"),c=document.createElement("tr"),d=document.createElement("td");a.appendChild(b);a.setAttribute("cellpadding","0");a.setAttribute("cellspacing","0");a.style.borderCollapse="collapse";b.appendChild(c);c.appendChild(d);d.appendChild(this.ft.getContainer());c=document.createElement("tr");this.wp=document.createElement("td");
this.wp.height=A?266:270;b.appendChild(c);c.appendChild(this.wp);this.$y();c=document.createElement("tr");d=document.createElement("td");b.appendChild(c);c.appendChild(d);var e=document.createElement("center");e.style.padding="20px";this.Xe=document.createElement("input");this.Xe.type="button";this.Xe.disabled="1";this.Xe.value="Select Album";n(this.Xe,ka,this.sn.bind(this));e.appendChild(this.Xe);var f=document.createElement("input");f.type="button";f.value="Cancel";Vb(f,"position:relative; left:6px");
n(f,ka,this.$v.bind(this));e.appendChild(f);d.appendChild(e);this.Yd.appendChild(a)};P.prototype.$y=function(){var a=document.createElement("table");a.setAttribute("cellspacing","8");a.setAttribute("cellpadding","0");Vb(a,"position:relative; left:4px");var b=document.createElement("tbody"),c=document.createElement("tr"),d=document.createElement("td");a.appendChild(b);b.appendChild(c);c.appendChild(d);d.width=this.lw;d.appendChild(this.kg.getContainer());d.appendChild(this.lc.getContainer());this.wp.appendChild(a)};
P.prototype.sq=function(){return this.Yd};P.prototype.show=function(a){this.Yd.style.display="block";this.Kf=a;this.lc.reset()};P.prototype.hide=function(){this.Yd.style.display="none";if(this.Kf)this.Kf();this.Kf=null};P.prototype.Rk=function(a,b){if(this.Xe){this.Xe.disabled=a?"":"1";if(b!=null){this.Xe.value=b}}};P.prototype.Dq=function(){return this.yk};P.prototype.Dn=function(a,b){if(this.yk!=a){this.yk=a;var c=this.lc.iq();if(a=="BANNER"&&this.dc!=1||c&&c.id!=this.Km){this.dc=0;this.wq()}this.ft.Yn()}this.Cw=
b};P.prototype.jq=function(){return this.Ib};P.prototype.lx=function(){return this.$d};P.prototype.my=function(){return this.$d!=null&&this.$d.selectMode==0};P.prototype.ex=function(a){for(var b=0;b<this.Ib.length;b++){var c=this.Ib[b];if(a==c.id){return c}}return null};P.prototype.gh=function(a){if(this.dc!=a){this.kg.getContainer().style.display=a==0?"block":"none";this.lc.getContainer().style.display=a==1?"block":"none";this.dc=a}var b=this.Nj();if(b){this.Rk(b.Fm(),b.zm())}this.ft.gh(a)};P.prototype.Nj=
function(){if(this.dc==0){return this.kg}else if(this.dc==1){return this.lc}return null};P.prototype.sn=function(){if(this.dc==0){this.lc.ys(this.kg.Iq());this.gh(1)}else if(this.dc==1){this.hide();this.Db=this.lc.iq();this.Ai=this.lc.Sx();if(this.Ai){this.jt(this.Ai);if(!this.Cw){this.Or(null)}}}else{this.hide()}};P.prototype.OA=function(a){if(this.Db&&this.Ai){this.Or(a);return false}return true};P.prototype.$v=function(){this.hide()};P.prototype.oz=function(){var a=document.createElement("div"),
b="position: absolute; top: 20px; left:20px; z-index:1001; display:block; padding:0px; width:408px; height:380px; ";if(A&&!Ol("8")){var c=document.getElementsByTagName("base")[0],d=c.href+"img/dialogframe.png",e=document.createElement("div"),f='position:absolute; width:408px; height:380px; display:block; z-index:-1; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled="true", src="'+d+'", sizingMethod="scale");';Vb(e,f);a.appendChild(e)}else{b+='background-image: url("img/dialogframe.png")'}Vb(a,
b);return a};P.prototype.lq=function(a){return this.qj[a]};P.prototype.PB=function(){this.qj["commandLabel"]="Choose Photo";this.qj["logoURL"]="img/googlephotos_sm.gif";this.qj["contentWidth"]=364;this.qj["contentHeight"]=248};P.prototype.pe=function(){if(this.dc==0&&this.kg){this.kg.pe()}else if(this.dc==1&&this.lc){this.lc.pe()}};P.prototype.jt=function(a){var b="lhcl_portrait_id",c="48",d=false;if(this.yk=="BANNER"){b="lhcl_cover_id";c="160";d=_album.blogger}var e=document.getElementById(b);if(e){var f=
a.thumbnailURL,g=f.split("?"),h=g[0]+"?crop=1&imgmax="+c;if(d){e.style.background="url('"+h+"') no-repeat left"}else{e.src=h}}};P.prototype.$r=function(a){var b;if(A){b=new ActiveXObject("Microsoft.XMLDOM");b.async=false;b.loadXML(a)}else{var c=new DOMParser;b=c.parseFromString(a,"text/xml")}return b};P.prototype.Or=function(a){var b=this.Db.id,c=this.tE+"&uname="+this.mt+"&aid="+b,d=(new Date).getTime();c+="&v="+d;var e="selectedphotos="+this.Ai.id+"&noredir=true&optgt="+this.yk;ye(c,this.AA.bind(this,
this.Ai,a),"POST",e)};P.prototype.AA=function(a,b,c){var d=c.target;if(d.ji()){this.jt(a);if(b){b.submit()}}};P.prototype.wq=function(){var a=this.$d.url;this.Qk(true);ye(a,this.Dk.bind(this))};P.prototype.Dk=function(a){var b=this.Nj(),c=a.target;this.Qk(false);if(!c.ji()){if(b.He){b.He("Sorry, we couldn't load the feed. Try again in a little while.")}return}var d=c.vf();if(d.substring(0,5)!="<?xml"){if(b.He){b.He("Sorry, we can't find the requested feed.")}return}var e=null,f=this.dc==0,g;if(A){g=
this.$r(d)}else{g=c.Gq()}e=new hd(this,g,f);if(e!=null){this.Ib=e.xq()}this.TA();var h=this.Nj();if(h){h.pe()}};P.prototype.TA=function(){if(this.Km&&this.Km.length>0){var a=this.ex(this.Km);if(a!=null){this.lc.ys(a);this.gh(1)}}};P.prototype.Qm=function(){return this.zA};P.prototype.Qk=function(a){this.zA=a};P.prototype.Fy=function(){return this.$d&&this.$d.extraParams=="q=*"};P.prototype.iz=function(){var a="http://"+document.domain+":"+document.location.port+"/data/feed/back_compat/user/"+this.mt+
"?alt=rss&kind=album",b=new Dj("My Google Photos","lh",this.mt,"Lighthouse",a,0,null,null);this.AE.push(b);this.$d=b;this.aD="lh"};function Hf(a,b,c){this.title=a;this.id=b;this.Ii=c;this.eA=[];this.description=null;this.dA=0;this.gb=null;this.Uw=false;this.AF=null}Hf.prototype.tv=function(a){this.eA.push(a)};Hf.prototype.La=function(){return this.dA};Hf.prototype.Mx=function(){return this.eA};function If(a,b,c,d,e){this.title=a;this.id=c;this.thumbnailURL=d;this.fullsizeURL=e;this.mediaType=b;this.Vc=
-1;this.yd=-1}If.prototype.gB=function(a,b){this.Vc=a;this.yd=b};If.prototype.hx=function(){return 1};If.prototype.nx=function(){if(this.Vc==-1||this.yd==-1){return null}return this.Vc.toString()+"x"+this.yd.toString()};function Kb(a){this.ja=a;this.contentSize=this.ja.oq(true);this.Yd=this.nz();this.Ze=-1;this.zi=[]}Kb.prototype.Iq=function(){if(this.Ze<0){return null}var a=this.ja.jq();return a[this.Ze]};Kb.prototype.getContainer=function(){return this.Yd};Kb.prototype.Fm=function(){return this.Ze>=0};Kb.prototype.zm=function(){return"Select Album"};Kb.prototype.pe=function(){this.lA()};Kb.prototype.nz=function(){var a=document.createElement("div"),b=this.contentSize.height+8,c="position:relative; top:16px; left:6px;  font-family:sans-serif; height:"+
b+"px; width:"+this.contentSize.width;c+="px; background: white; overflow:auto; overflow-x:hidden";Vb(a,c);var d=document.createElement("table");d.width="100%";d.setAttribute("cellspacing","0");d.setAttribute("cellpadding","0");d.style.borderCollapse="collapse";var e=document.createElement("tbody");d.appendChild(e);this.Td=e;this.Kl=d;this.ig(e,true);a.appendChild(d);n(a,na,this.qk.bind(this));a.ondblclick=this.tj.bind(this);return a};Kb.prototype.lA=function(){var a=this.ja.jq();this.zi=[];this.Ze=
-1;this.Kl.removeChild(this.Td);this.Td=document.createElement("tbody");this.Kl.appendChild(this.Td);if(a.length<1){this.ig(this.Td,false);return}for(var b=0;b<a.length;b++){var c=a[b],d=document.createElement("tr");this.Td.appendChild(d);if(b%2){d.style.background="#ffffff"}else{d.style.background="#eeeeee"}var e=document.createElement("td");e.height=32;e.width=42;var f=document.createElement("img");if(c.Ii!=null){f.src=c.Ii}else{f.src="img/transparent.gif"}f.width=32;f.height=28;f.hspace=4;f.style.border=
"1px solid #808080";e.appendChild(f);d.appendChild(e);var e=document.createElement("td");e.height=32;var g=c.La(),h=c.title.replace(/_/g," "),i=document.createElement("font");i.color="#4D4D4D";i.size="4";i.style.cursor="default";i.innerHTML=Og(h);e.appendChild(i);var j=document.createElement("font");j.innerHTML="&nbsp;("+g+")";j.style.position="relative";j.style.top="-2px";e.appendChild(j);d.appendChild(e);d.vr=i;d.nw=j;d.U=f;this.zi.push(d)}};Kb.prototype.ig=function(a,b){var c=document.createElement("tr"),
d=document.createElement("td"),e="<br><br><br><center><font size=4 font color=#4D4D4D>";if(this.ja.Qm()||b){e+='Loading Album List...<img src="img/spin.gif" hspace=8></font></center>'}else{e+="No Albums Found."}d.innerHTML=e;c.appendChild(d);a.appendChild(c)};Kb.prototype.He=function(a){this.Kl.removeChild(this.Td);this.Td=document.createElement("tbody");this.Kl.appendChild(this.Td);var b=document.createElement("tr"),c=document.createElement("td");c.innerHTML="<br><br><br><center><font size=4 font color=#cc0000>"+
a+"</font></center>";b.appendChild(c);this.Td.appendChild(b)};Kb.prototype.VA=function(a){if(this.Ze!=a){var b;if(this.Ze>=0){b=this.zi[this.Ze];if(this.Ze%2){b.style.background="#ffffff"}else{b.style.background="#eeeeee"}b.vr.color="#4D4D4D";b.nw.color="#4D4D4D";b.U.style.border="1px solid #808080"}b=this.zi[a];if(b){b.style.background="#112ABB";b.vr.color="#ffffff";b.nw.color="#ffffff";b.U.style.border="1px solid white";this.Ze=a;this.ja.Rk(true,yn)}}};Kb.prototype.qk=function(a){var b=le(a),c=
pa(this.Td),d=ta(this.Yd),e=b.y-c.y;if(fc&&b.x-c.x>=d.width-16){return}var f=0;for(var g=0;g<this.zi.length;g++){var h=this.zi[g],i=ta(h).height;if(fc){i=Math.max(32,ta(h.vr).height)}f+=i;if(e<=f){this.VA(g);return}}};Kb.prototype.tj=function(a){if(this.Iq()){this.ja.sn()}};function ma(a){this.ja=a;this.kj=this.ja.oq(true);this.Yd=this.pz();this.ne=-1;this.zf=[];this.as=[];this.Db=null;this.co=5;this.Dv=this.ja.Dv}ma.prototype.ys=function(a){if(a!=this.Db){this.Db=a;if(a!=null){this.hz()}this.ne=-1;this.ds()}};ma.prototype.iq=function(){return this.Db};ma.prototype.getContainer=function(){return this.Yd};ma.prototype.Fm=function(){return this.ne>=0};ma.prototype.rt=function(){return true};ma.prototype.zm=function(){return"Choose Photo"};ma.prototype.pz=function(){var a=
document.createElement("div"),b=4,c=this.kj.height;if(this.rt()){c-=20}else{b=16}var d="display:none; position:relative; top:"+b+"px; left:6px; height:"+c+"px; width:"+this.kj.width+"px";Vb(a,d);this.Me=document.createElement("div");d="height:"+c+"px; width:"+this.kj.width+"px; padding-left: 6px; padding-top: 4px; font-family:sans-serif; background: white; overflow:auto";Vb(this.Me,d);this.ue=document.createElement("div");this.Me.appendChild(this.ue);this.ig();n(this.Me,na,this.qk.bind(this));this.Me.ondblclick=
this.tj.bind(this);a.appendChild(this.Me);if(this.rt()){this.oc=document.createElement("div");Vb(this.oc,"position:absolute; top:238px; left:69px; display: none");this.Vs=new pb("zoom","img/slidertrack.png","img/sliderknob.png",215,0,100,50,17,24,this.vC.bind(this),null);var e=this.Vs.Ux();this.Vs.bj();this.oc.appendChild(e);a.appendChild(this.oc)}else{this.oc=null}return a};ma.prototype.vC=function(a){this.setZoom(Math.round((100-a)/10))};ma.prototype.ds=function(){this.Me.removeChild(this.ue);this.ue=
document.createElement("div");this.Me.appendChild(this.ue);this.zf=[];this.as=[];var a;if(this.Db==null){a=this.ja.Ib}else{a=this.Db.Mx()}if(a.length<1){if(this.ja.Qm()){this.ig()}else{this.He("No Images Found.")}if(this.oc)this.oc.style.display="none";return}for(var b=0;b<a.length;b++){var c=a[b],d=document.createElement("img"),e=Math.round((this.kj.width-60)/this.co),f=c.hx();if(f==0){var g=Math.round(e*3/4)}else{if(f>1){var g=Math.round(e/f)}else{e=Math.round(e*f);var g=Math.round(e/f)}}d.src=
c.thumbnailURL;d.width=e;d.height=g;if(c.title!=null){d.title=this.Xx(c)}if(b==this.ne){d.style.border="2px solid #112ABB";d.hspace=0;d.vspace=0}else{d.style.border="1px solid #808080";d.hspace=1;d.vspace=1}this.ue.appendChild(d);this.zf.push(d);this.as.push(c)}if(this.oc)this.oc.style.display=a.length>0?"inline":"none"};ma.prototype.ig=function(){if(this.ja.Fy()&&!this.ja.Qm()){return}var a=document.createElement("div");a.innerHTML="<br><br><br><center><font size=4 font color=#4D4D4D>"+Tj+'<img src="img/spin.gif" hspace=8></font></center>';
this.ue.appendChild(a)};ma.prototype.He=function(a){this.Me.removeChild(this.ue);this.ue=document.createElement("div");this.Me.appendChild(this.ue);var b=document.createElement("div");b.innerHTML="<br><br><br><center><font size=4 font color=#cc0000>"+a+"</font></center>";this.ue.appendChild(b)};ma.prototype.Xx=function(a){var b=a.title,c=a.nx();if(c!=null){b+=", "+c}return b};ma.prototype.Sx=function(){if(this.ne<0){return null}return this.as[this.ne]};ma.prototype.CB=function(a){if(a!=this.ne){if(this.ne>=
0){var b=this.zf[this.ne];b.style.border="1px solid #808080";b.hspace=1;b.vspace=1}var c=this.zf[a];c.style.border="2px solid #112ABB";c.hspace=0;c.vspace=0;this.ne=a;this.ja.Rk(true,Cj)}};ma.prototype.uC=function(){var a=Math.round((this.kj.width-40)/this.co);for(var b=0;b<this.zf.length;b++){var c=this.zf[b];c.width=a;c.height=a}};ma.prototype.Vv=function(a){for(var b=0;b<this.zf.length;b++){var c=this.zf[b],d=pa(c),e=ta(c);if(a.x>=d.x&&a.y>=d.y&&a.x<d.x+e.width&&a.y<d.y+e.height){return b}}return null};
ma.prototype.hz=function(){var a;if(this.Db!=null){if(this.Db.gb==null||this.Db.Uw){return}a=this.Db.gb}else{var b=this.ja.lx();a=b.url}if(!this.Dv){var c=(new Date).getTime();a+="&v="+c}this.ja.Qk(true);ye(a,this.Dk.bind(this))};ma.prototype.Dk=function(a){var b=null,c=a.target,d=document.location.hash;if(d.length>0&&d.charAt(0)=="#"){d=d.substring(1)}this.ja.Qk(false);if(!c.ji()){var e=this.ja.Nj();e.He("Sorry, we couldn't load the feed.  Try again in a little while.");return}var f;if(A){f=this.ja.$r(c.vf())}else{f=
c.Gq()}b=new hd(this.ja,f,false);var g=null;if(b!=null){if(this.Db==null){this.ja.Ib=[]}g=b.xq();for(var h=0;h<g.length;h++){var i=g[h];if(this.Db!=null){this.Db.tv(i)}else{this.ja.Ib.push(i)}if(i.id==d){this.ne=h;this.ja.Rk(true,Cj)}}}if(this.Db){this.Db.Uw=true}this.pe()};ma.prototype.qk=function(a){var b=le(a),c=this.Vv(b);if(c!=null){this.CB(c)}};ma.prototype.tj=function(a){this.ja.sn()};ma.prototype.setZoom=function(a){if(a<1){a=1}if(this.co!=a){this.co=a;this.uC()}};ma.prototype.pe=function(){this.ds()};
ma.prototype.reset=function(){this.Vs.bf(50)};function hd(a,b,c){this.ja=a;this.DC=b;this.or=[];this.Rw(c)}hd.prototype.xq=function(){return this.or};hd.prototype.Rw=function(a){var b=this.DC.getElementsByTagName("item");for(var c=0;c<b.length;c++){var d=b[c];if(a){this.mv(d)}else{this.uv(d)}}};hd.prototype.wc=function(a,b){var c=b,d=b.split(":");if(d.length>1){if(!A){c=d[1]}}var e=a.getElementsByTagName(c);for(var f=0;f<e.length;f++){if(e[f].nodeName!=b)continue;var g=e[f].firstChild;if(g!=null){var h=g.nodeValue;if(h!=null){return h}}}return null};
hd.prototype.mv=function(a){var b=this.wc(a,"title"),c=this.wc(a,"photo:thumbnail"),d=this.wc(a,"gphoto:numphotos"),e=this.wc(a,"gphoto:rsslink"),f=this.wc(a,"gphoto:id"),g=this.wc(a,"description");c=this.Il(c,e);var h=new Hf(b,f,c);h.dA=parseInt(d,10);h.gb=e;h.description=g;this.or.push(h)};hd.prototype.uv=function(a){var b=this.wc(a,"title"),c=this.wc(a,"link"),d=this.wc(a,"photo:thumbnail"),e=this.wc(a,"photo:imgsrc"),f=this.wc(a,"gphoto:id");d=this.Il(d,c);e=this.Il(e,c);var g=parseInt(this.wc(a,
"gphoto:width"),10),h=parseInt(this.wc(a,"gphoto:height"),10);if(d){var i=d.split("?");d=i[0]+"?imgmax=160&crop=1"}var j=new If(b,"image/jpeg",f,d,e);j.gB(g,h);this.or.push(j)};hd.prototype.Il=function(a,b){if(a==null){return null}var c=a;if(a.length<7||a.substring(0,7)!="http://"){var d=b.split("/");c="http://"+d[2]+a}return c};function Dj(a,b,c,d,e,f,g,h){this.title=a;this.id=b;this.user=c;this.format=d;this.url=e;this.selectMode=f;this.description=g;this.extraParams=h;this.hasTags=false;this.canDelete=false;this.WC=[];this.vF=false};Dj.prototype.push=function(a){this.WC.push(a)};function nc(a){this.ja=a;this.mC=this.bz();this.dc=0;this.Yn();this.qF=false;this.pF=0}nc.prototype.bz=function(){var a=document.createElement("div"),b=A?"4":"8";Vb(a,"position:relative; top:4px; left:12px; background: transparent; font-family:sans-serif; width:380px; padding:0px; height:42px");var c=document.createElement("div");Vb(c,"position:absolute; top:"+b+"px; left:4px; color: white; font-weight: bold; cursor:default");c.unselectable="on";c.innerHTML="Photo Chooser";a.appendChild(c);this.mi=
document.createElement("div");Vb(this.mi,"position:absolute; top:32px; left:4px; color: #777777; cursor: pointer");a.appendChild(this.mi);n(this.mi,ka,this.fC.bind(this),true);n(a,na,this.Qj.bind(this),true);return a};nc.prototype.getContainer=function(){return this.mC};nc.prototype.rB=function(a){this.mi.innerHTML="<font size=2><b>"+a+"</b></font>"};nc.prototype.fC=function(a){if(this.dc==1){if(this.ja.my()&&this.ja.Dq()=="PORTRAIT"){this.ja.gh(0);this.ja.kg.pe()}}};nc.prototype.Yn=function(){var a=
this.ja.Dq()=="BANNER",b="Select an Album to browse:",c="#777777",d="none";if(a){b="Select a Cover Photo:"}else if(this.dc==1){b="&laquo;&nbsp;Back to Albums List";c="#112ABB";d="underline"}this.rB(b);this.mi.style.color=c;this.mi.style.textDecoration=d};nc.prototype.gh=function(a){this.dc=a;this.Yn()};nc.prototype.Qj=function(a){this.ir=le(a);var b=this.ja.sq(),c=pa(this.mC),d=this.ir.y-c.y;this.tD=parseInt(b.style.left,10);this.uD=parseInt(b.style.top,10);if(d>28){return false}this.rk=this.Zh.bind(this);
this.fl=this.Dg.bind(this);this.Ak=this.Rj.bind(this);n(document.body,ac,this.rk);n(document.body,zb,this.fl);n(document.body,Ob,this.Ak);return false};nc.prototype.Zh=function(a){var b=le(a),c=this.ja.sq(),d=b.y-this.ir.y+this.uD,e=b.x-this.ir.x+this.tD,f=Cc(),g=f.width-40,h=f.height-40;d=Math.max(Math.min(d,h),0);e=Math.max(Math.min(e,g),0);c.style.top=d+"px";c.style.left=e+"px";Ke(a);return false};nc.prototype.Dg=function(a){D(document.body,ac,this.rk);D(document.body,zb,this.fl);D(document.body,
Ob,this.Ak);Ke(a);return false};nc.prototype.Rj=function(a){if(!(a.relatedTarget||a.toElement)){this.Dg(a)}};var Vb=function(a,b){if(A){a.style.setAttribute("cssText",b)}else{a.setAttribute("style",b)}},Ke=function(a){if(a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.cancelBubble=true;a.returnValue=false}},zn=function(){var a=0,b=0;if(fc){a=-1*window.pageXOffset;b=-1*window.pageYOffset}else{var c=Sb();a=c.scrollLeft;b=c.scrollTop}return{x:a,y:b}},le=function(a){var b={x:a.clientX,y:a.clientY},c=zn();b.x+=c.x;b.y+=c.y;return b};function pb(a,b,c,d,e,f,g,h,i,j,l){this.wE=a;this.JC=b;this.sD=c;this.Rv=d;this.dz=h;this.ts=i;this.pd=j;this.Jw=l;this.oc=null;this.pk=e;this.Qe=f;this.Gl=this.Rv-this.dz-this.ts;this.Fe=g;this.XB=g;this.vD=0;this.Rc()}pb.prototype.Ux=function(){return this.oc};pb.prototype.Rc=function(){this.oc=document.createElement("div");this.fj=document.createElement("img");this.fj.setAttribute("src",this.JC);this.fj.setAttribute("width",this.Rv);this.rD=document.createElement("div");this.rD.setAttribute("id",
this.wE+"-knob");this.gd=document.createElement("img");this.gd.setAttribute("src",this.sD);this.gd.setAttribute("border","0");Vb(this.gd,"position:relative; top:0px; left:0px; cursor:move");this.gd.style.top="2px";this.oc.appendChild(this.fj);this.oc.appendChild(this.gd);this.An()};pb.prototype.bj=function(){this.Xy=this.Qj.bind(this);this.Qv=this.by.bind(this);n(this.gd,na,this.Xy);n(this.fj,ka,this.Qv)};pb.prototype.Fh=function(){D(this.gd,na,this.Xy);D(this.fj,ka,this.Qv)};pb.prototype.Qj=function(a){var b=
le(a);this.vD=b.x-this.ts;this.iF=parseInt(this.gd.style.left,10);this.XB=this.Fe;this.Jv=pa(this.oc);this.rk=this.Zh.bind(this);this.fl=this.Dg.bind(this);this.Ak=this.Rj.bind(this);n(document.body,ac,this.rk);n(document.body,zb,this.fl);n(document.body,Ob,this.Ak);Ke(a);return false};pb.prototype.Zh=function(a){var b=le(a),c=Math.round(this.gd.width/2),d=b.x-this.Jv.x;if(d<this.Gl/2){c=0}this.Fe=this.Xv(d-c);this.An();if(this.pd){this.pd(this.Fe)}Ke(a);return false};pb.prototype.Dg=function(a){D(document.body,
ac,this.rk);D(document.body,zb,this.fl);D(document.body,Ob,this.Ak);if(this.Jw){this.Jw(this.XB,this.Fe)}Ke(a);return false};pb.prototype.Rj=function(a){if(!(a.relatedTarget||a.toElement)){this.Dg(a)}};pb.prototype.by=function(a){this.Jv=pa(this.oc);return this.Zh(a)};pb.prototype.Ax=function(a){var b=this.Wv(a),c=Math.round(this.gd.width/2);return b-c-this.ts-this.Gl};pb.prototype.An=function(){this.gd.style.left=this.Ax(this.Fe)+"px"};pb.prototype.tb=function(){return this.Fe};pb.prototype.bf=function(a){if(a!=
this.Fe){this.Fe=a;this.An();if(this.pd){this.pd(this.Fe)}}};pb.prototype.Wv=function(a){return(a-this.pk)*this.Gl/(this.Qe-this.pk)};pb.prototype.Xv=function(a){var b=Math.round(this.gd.width/2),c=this.Qe-this.pk,d=this.pk+Math.round(c*(a-this.dz)/(this.Gl-b));return Math.max(Math.min(d,this.Qe),this.pk)};var Of=function(a){return"Error: "+a},id="Loading&#8230;",Uj=function(a){return"Photos: "+a},fo=function(a,b){return a+" "+b},co=function(a){return"Copying items to album: "+a},qo=function(a){return"Moving items to album: "+a},Lj="Album dates must be set to 1970 or later. Please try again.",Un=function(a,b){return"Album descriptions must be less than "+b+" characterslong. You are currently using "+a+" characters. Please make your description shorter and try again."},Vn=function(a,b){return"Album descriptions must be "+
b+" characters or less. You are currently using "+a+" characters. Please make your description shorter and try again."},yo=function(a){return"For albums you want to show publicly. Anyone who visits "+a+" can see them"},zo=function(a){return"This album will be visible to all users at "+a+". It will be included in Picasa Web Albums community search, based on preferences (Community search preferences may be modified on the Settings page)."},$n=function(a,b){return"Choose an album below or "+a+"create a new album"+
b+"."},eo=function(a,b){return"Enter details for a new album below or "+a+"choose an existing album"+b+"."},$j="Create a portable slideshow for your website, blog, Myspace, etc.",Xj="Slideshow preview",lh="There was an error communicating with the server. Please check your connection and try again.",Rn=function(a){return a+" has been added as a favorite."},Wn=function(a){return"Would you like to link to "+a+"'s public gallery?"},io=function(a,b){return"You are receiving activity updates from these users. For all your favorite users, click "+
a+"here"+b},ho=function(a,b){return"You are viewing all favorite users.  To view only those whose activity updates you are receiving, click "+a+"here"+b},Yj="Are you sure you want to remove this from your favorites?",Nj="Report inappropriate content",bo=function(a,b){return"If you own the copyright for this work and would like it removed, please see our "+a+"instructions for notification of copyright infringement"+b+"."},jo=function(a,b){return"We're sorry, the maximum length for flagging messages is "+
b+" characters. You are currently using "+a+" characters. Please modify your message and try again."},Nf="Sorry, we encountered an error while loading this album.",Vj=function(a,b,c){return a+" - "+b+" of "+c},Yn=function(a,b){return"Your caption is "+a+" characters long. ("+b+" maximum)"},kh=function(a,b){return"We're sorry, you cannot copy or move more than "+b+" photos at once. You currently have "+a+" photos selected."},Kj="I'm afraid your caption is a bit too long. Please, try to be more brief!",
Zn=function(a,b){return"Your caption is "+a+" characters long. ("+b+" maximum)"},Tn=function(a,b){return"This photo has been added. "+a+"View your order"+b+"."},ro=function(a,b){return"Your order has been opened in a new window.  If a new window didn't open, click "+a+"here"+b},eh="Add a comment",Eo=function(a,b,c){return a+"Sign in"+c+" if you have a Google account, or "+b+"sign up"+c+" for a free account."},Fo=function(a,b,c){return a+"Sign in"+c+" if you have a Picasa Web Albums account, or "+
b+"sign up"+c+" for a free account."},Qn=function(a,b){return a+"Activate"+b+" your free Picasa Web Albums account."},ao=function(a,b){return"Your comment is "+a+" characters long. ("+b+" maximum)"},hh="Download Photo",Wj=function(a,b){return"Photo "+a+" of "+b},to=function(a){return a+" pixels"},wo=function(a){return a+"KB"},Oj="You need Flash 7 or higher to watch videos.",gh="Download Flash",mh="View Album",jh="Share Photo",Qj="Magnified view, click on image and drag to move.",fh="We're sorry, this photo is not currently available. It may have been deleted by its owner, or there may have been an error on the server. Click OK to continue.",
Pj="The server denied permission for this action. Please make sure you are still logged in to your account and try again.",Rj="It seems the item you requested has been misplaced. Please check your internet connection, cross your fingers, and try again.",bk="Something unusual has happened. Hopefully, it is so unusual that you will never see this dialog again.",Zj="The server may be a little bit broken temporarily. Please try again in a few moments while it sorts itself out.",Mj="Delete this photo",
mo=function(a,b){return"Paste link in "+a+"email or IM"+b},lo=function(a,b){return"HTML to "+a+"embed in website"+b},Nc=function(a){return a+"px"},Sn=function(a,b){return"Photos added by "+a+": "+b},Do=function(a){return a+" shared an album with you."},Xn=function(a){return'The address "'+a+'" does not appear to be a valid email address. Please check the address and try again.'},ih="There was an error communicating with the server. Please try again.",xo=function(a){return"+ "+a+" more"},go=function(a){return"Are you sure you want to delete the selected photos?"+
a+"Important: deleting photos cannot be undone."},Tj="Loading Photos...",no=function(a,b){return"Too many tags (max is "+a+", but "+b+" entered)"},po=function(a,b){return"Text too long (max is "+a+"letters, but "+b+" were entered)"},oo=function(a,b){return"Tags can only be "+a+" letters long. You entered one that was "+b+" letters long."},vo=function(a){return"Now searching in "+a},uo=function(a){return"By "+a},Sj=function(a,b){return"There were no items that matched "+a+" found in "+b+"."},ko=function(a){return"However, photos that matched "+
a+" were found in the following locations:"},Co=function(a){return"Choosing the right search terms is the key to finding the information you need.  Start with the obvious - if you're looking for items related to "+a+' try typing "'+a+'".'},Bo=function(a,b){return"It's often advisable to use multiple search terms. For example, if you're looking for items of a "+a+', type "'+b+'".'},Ao=function(a){return"Sometimes you'll only want results that include an exact phrase. In this case, simply put quotation marks around your search terms. For example, you could type \""+
a+'".'},Qf="Community Photos",Pf=function(a){return a+"'s Gallery"},ck=function(a){return"View "+a+"'s gallery page"},Go=function(a,b){return"In order to show you the most relevant results, we have omitted some entries very similar to those already displayed.<br>If you like, you can "+a+"repeat the search with the omitted results included."+b},ak=function(a){return"Sorry, Google does not serve more than 1000 items for any query. (You asked for items starting from "+a+".)"},Ho=function(a){return"Unknown search error: "+
a};function Zr(a,b){var c=k(b);if(c)c.style.visibility=a?"":"hidden"}function Yb(a,b){var c=[];for(var d=2;d<arguments.length;++d)c.push(arguments[d]);return function(){var e=[];for(var f=0;f<arguments.length;++f)e.push(arguments[f]);e=c.concat(e);b.apply(a,e);for(f=0;f<e.length;++f)delete e[f]}}function Xf(a,b,c){var d=b.bind(a);return window.setTimeout(d,c)}function ib(a,b){return function(c){if(!c)c=window.event;if(c&&!c.target)c.target=c.srcElement;b.call(a,c)}}function Qa(a,b,c){if(a.addEventListener)a.addEventListener(b,
c,false);else if(a.attachEvent)a.attachEvent("on"+b,c)}function Xa(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);else if(a.detachEvent)a.detachEvent("on"+b,c)}function Ad(a){if(window.event){a.cancelBubble=true;a.returnValue=false}else if(a){a.cancelBubble=true;if(a.preventDefault){a.preventDefault();a.stopPropagation()}}}var of=[],pf=0;function Vf(a){Hh(of,a);if(!pf){pf=window.setInterval(es,10)}}function Mi(a){od(of,a);if(of.length==0){ds()}}function ds(){if(pf){window.clearInterval(pf)}pf=
0}function es(){var a=ya();for(var b=0;b<of.length;b++){of[b](a)}}function qb(a){K.Sa(this);this.bx=a;this.pd=this.dl.bind(this);this.Da=0}qb.prototype.r=function(){K.Ta(this);this.reset();this.bx=null};qb.prototype.J=function(a){this.reset();this.Da=window.setTimeout(this.pd,a)};qb.prototype.reset=function(){if(this.Da)window.clearTimeout(this.Da);this.Da=0};qb.prototype.Nm=function(){return this.Da!=0};qb.prototype.dl=function(){this.Da=0;this.bx()};function xc(a,b){if(!(a&&b)){return}te(a);C(a,
b)}function Pd(){return self.innerHeight||document.documentElement.clientHeight}function Ql(a){a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a=a.replace(/"/g,"&quot;").replace(/'/g,"&#39;");return a}function Pe(a,b){var c=[],d=0,e=0,f=b||20,g=/[-.,?!\/\\#]/,h=-1;for(var i=0;i<a.length;i++){var j=a.charAt(i);if(j.search(/\s/)==0){d=0;continue}else if(j=="<"){while(j&&j!=">")j=a.charAt(++i);continue}if(d>=f){var l=a.substring(e,i);if(h>=e&&h<i){c.push(l.substring(0,h-e+1));d=i-
h-1;e=h+1}else{c.push(a.substring(e,i));d=0;e=i}}if(j=="&"){while(j&&j!=";")j=a.charAt(++i)}else if(j.search(g)==0){h=i}d++}if(c.length){var p=yd?"<wbr />":"&shy;";c.push(a.substring(e));return c.join(p)}else{return a}}function zk(a){return a.split("?")[0]}var rp,yg,Si;(function(){var a="(?:(?:(?:\\d{1,3}\\.){3}\\d{1,3})|(?:(?:[a-z0-9\\-]+\\.)+(?:aero|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|travel|[a-z]{2})\\b))",b="a-z0-9/~?&;=%@+$#_\\-",c="/(?:["+b+",:\\.]*["+b+"])?",
d="\\b(?:https?://)?"+a+"(?::\\d+)?(?:"+c+")?",e="\\b[a-z0-9_.+\\-]+@"+a;rp=new RegExp("("+a+")","gi");yg=new RegExp("("+e+")","gi");Si=new RegExp("("+d+")","gi")})();function Gr(a){var b=a.match(yg);return!(!b)&&b==a}function xk(a){var b=a.split(/\s/);for(var c=0;c<b.length;c++){var d=b[c];if(d.search(yg)>=0){d=d.replace(yg,'<a href="mailto:$1">$1</a>');b[c]=d}else if(d.search(Si)>=0){d=d.replace(Si,'<a href="http://$1" rel="nofollow">$1</a>');d=d.replace(/http:\/\/(https?:\/\/)/,"$1");b[c]=d}}return b.join(" ")}
function zf(){this.XD=0;this.gn={};this.gw=this.Gt.bind(this);Qa(window,"unload",this.gw)}zf.prototype.Sa=function(a){a.__d=this.XD++;this.gn[a.__d]=a};zf.prototype.Ta=function(a){delete this.gn[a.__d]};zf.prototype.Gt=function(){for(var a in this.gn){var b=this.gn[a];if(b&&b.r)b.r()}Xa(window,"unload",this.gw)};function pp(a){Zk()}n(E,"unload",pp);function Ic(a,b,c){return Math.min(Math.max(a,b),c)}function cs(a,b){return(a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)}function Ri(a,b,c){if(!c){c=function(f,
g){if(f<g)return-1;if(f>g)return 1;return 0}}for(var d=0;d<a.length;++d){var e=c(b,a[d]);if(e==-1){a.splice(d,0,b);return null}else if(e==0){return a[d]}}a.push(b);return null}function $r(a,b){for(var c=0;c<a.length;++c){if(b>a[c])return null;if(b==a[c])return a.splice(c,1)}return null}function zh(a,b){var c={},d=a.length;if(b){for(var e=0;e<d;e++)c[a[e][b]]=e}else{for(var e=0;e<d;e++)c[a[e]]=e}return c}function V(a,b){var c=a.match(/(\{\w*\})/g);if(!c)return a;for(var d=0;d<c.length;d++){var e=c[d],
f=new RegExp(e,"g"),g=e.substring(1,e.length-1);a=a.replace(f,b[g]!=undefined?b[g]:"")}return a}if("a".replace(/(a)/g,function(a,b){return"b"})=="b"){V=function(a,b){return a.replace(/\{(\w*)\}/g,function(c,d){return b[d]!=undefined?b[d]:""})}}var Ag=q("div");function N(a,b){Ag.innerHTML=V(a,b);var c=Ag.firstChild;if(c){Ag.removeChild(Ag.firstChild)}return c}var Bg={},qf={};function m(a){if(!a)a="_";var b=Bg[a]||0,c=a;if(b)c+="_"+b;Bg[a]=b+1;return c}function o(a,b){qf[a]=b}function x(a){if(qf[a])delete qf[a];
if(Bg[a]==1)Bg[a]=0}function gb(a){var b=[];for(var c=1;c<arguments.length;c++)b.push(arguments[c]);b.push(a);if(qf[a])qf[a].apply(this,b)}function zg(a){var b=a.split(/\,/);if(b.length!=3)return null;var c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);if(c<1)return null;if(d<1||d>12)return null;var f=new Date(e,d-1,c);return f}function vp(a,b){if(b<0||b>3)return a;var c=zg(a);if(c==null){return a}return Kg(nb.DATEFORMATS[b],c,null)}function Kr(a,b,c,d){if(d<0||d>3)return;if(typeof a!=
"number")return;if(typeof b!="number")return;if(typeof c!="number")return;if(a<1)return;if(b<1||b>12)return;var e=new Date(c,b-1,a);document.write(Kg(nb.DATEFORMATS[d],e,null))}function Cg(){var a=document.getElementsByTagName("div");for(var b=0;b<a.length;b++){if(a[b].className=="lhcl_wrap"){qa(a[b],"lhcl_wrap");uk(a[b])}}a=document.getElementsByTagName("span");for(var b=0;b<a.length;b++){var c=a[b].className;if(c!=null&&c.substring(0,11)=="lhcl_trunc_"){var d=parseInt(c.substring(11),10);a[b].className=
"";mp(a[b],d)}}}function mp(a,b){if(a&&a.hasChildNodes()){var c=a.firstChild;if(c.nodeValue.length>b){var d=c.splitText(b);a.removeChild(d);a.appendChild(N("&#8230;",{}))}}}function uk(a){yh(a,0,"",0)}function yh(a,b,c,d){if(!a)return;if(b<1&&A){a.style.wordWrap="break-word";return}var e=-1;if(b>0){a.innerHTML="g";for(var f=1;f<b;f++){a.innerHTML=a.innerHTML+"<br />g"}e=a.offsetHeight;a.innerHTML=c;if(a.offsetWidth<=d&&a.offsetHeight<=e){return}}if(!a.hasChildNodes())return;var g=a.firstChild;if(g.nodeValue.length<
1)return;var h=0,i=0,j=g.nodeValue.length;while(h<j){var l=Math.min(g.nodeValue.length,i+5),p=g.nodeValue.substring(i,l).search(/\s/);if(p>-1||l<j){var s=p>-1?p+1:l,y=p>-1?p+1:5,t=g.splitText(s);if(e>0){a.removeChild(t);if(a.offsetHeight>e){a.innerHTML=a.innerHTML+"&#8230;";h=j}else{var B=q("wbr");a.appendChild(B);a.appendChild(t);g=t;i=0;h+=y}}else{var B=q("wbr");a.insertBefore(B,t);g=t;i=0;h+=y}}else{h=j}}if(e>0){while(a.offsetHeight>e&&a.childNodes.length>2){a.removeChild(a.lastChild);a.removeChild(a.lastChild);
a.innerHTML=a.innerHTML+"&#8230;"}}}var li=function(a,b){return Math.max(a.top,b.top)<Math.min(a.bottom,b.bottom)&&Math.max(a.left,b.left)<Math.min(a.right,b.right)},nl=function(a,b){if(!li(a,b)){return[new vd(a.top,a.left,a.width,a.height)]}var c=[],d=a.top,e=a.bottom;if(b.top>a.top){c.push(new Ua(a.top,a.right,b.top,a.left));d=b.top}if(b.bottom<a.bottom){c.push(new Ua(b.bottom,a.right,a.bottom,a.left));e=b.bottom}if(b.left>a.left){c.push(new Ua(d,b.left,e,a.left))}if(b.right<a.right){c.push(new Ua(d,
a.right,e,b.right))}return c};ml=function(a,b){return new Ua(Math.min(a.top,b.top),Math.max(a.right,b.right),Math.max(a.bottom,b.bottom),Math.min(a.left,b.left))};function Yr(){Gc("_lh_backLink",location.pathname+location.search+location.hash)}function Ir(a,b){if(_features.newStrings){return b}else{return a}}function Ln(){if(!A){return}if(sg(rg,"7.0")>=0){return}var a=Qh("img","lhcl_png"),b=document.getElementsByTagName("base")[0].href;for(var c=0;c<a.length;++c){var d=a[c],e=d.src;d.src=b+"img/spacer.png";
d.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='crop')"}}function Jf(a,b){var c=b?"PUBLIC_ALBUM_INDEX_ON":"PUBLIC_ALBUM_INDEX_OFF";L.Ga(_setPrefUrl,Fn.bind(null,a,b),"pref="+c)}function Fn(a,b,c){if(c.status>=400||c.text.indexOf("success")<0){alert(ih);return}a(b)};;;function Ac(a){K.Sa(this);var b=a||2;this.bc=[];for(var c=0;c<b;c++){this.bc[c]=null}this.ab=[];this.bh=1;if(typeof XMLHttpRequest!="undefined"){this.Qh=this.jv}else if(typeof window.ActiveXObject!="undefined"){for(var c=0;c<vk.length;c++){var d=vk[c];try{var e=new ActiveXObject(d);if(!e)continue;this.Qh=function(){return new ActiveXObject(d)};break}catch(f){}}}}var vk=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","MICROSOFT.XMLHTTP"];Ac.prototype.r=function(){K.Ta(this);this.Qh=null;
while(this.bc.length){var a=this.bc.pop();if(a&&a.readyState<4)a.abort()}for(var b in this)this[b]=null};Ac.prototype.gg=function(){return!(!this.Qh)};Ac.prototype.Ga=function(a,b,c,d){if(!this.Qh){if(b)b(null);return 0}var e={id:this.bh++,url:a,cb:b,data:c};if(c||d)this.ab.push(e);else this.ab.unshift(e);this.zl();return e.id};Ac.prototype.fo=function(a){for(var b=0;b<this.bc.length;b++){if(this.bc[b]&&this.bc[b].id==a){if(this.bc.xhr)this.bc.xhr.abort();this.bc.splice(b,1,null);this.zl();return}}this.zt(a)};
Ac.prototype.zt=function(a){for(var b=0;b<this.ab.length;b++){if(this.ab[b].id==a){this.ab.splice(b,1);return}}};Ac.prototype.no=function(a){if(a.status>=400)return null;try{return eval("("+a.text+")")}catch(b){return null}};Ac.prototype.jv=function(){return new XMLHttpRequest};Ac.prototype.zl=function(){if(!(this.ab.length&&this.Qh))return;var a=re(this.bc,null);if(a<0)return;var b=this.ab.pop(),c=this.Qh();c.onreadystatechange=Yb(this,this.tu,a,b.cb);this.bc[a]={id:b.id,xhr:c};c.open(b.data?"post":
"get",b.url,true);if(b.data){c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.setRequestHeader("Content-Length",b.data.length)}c.send(b.data)};Ac.prototype.tu=function(a,b){if(this.bc.length<=a||!this.bc[a])return;var c=this.bc[a].xhr;if(!c||c.readyState!=4)return;if(b){var d={status:c.status,xml:c.responseXML,text:c.responseText};b(d)}delete this.bc[a];this.bc[a]=null;this.zl()};function ed(a){K.Sa(this);this.Vf=document.title;this.Ud=location.hash;this.tg=[];this.dD=a;this.Yb=null;this.$z=null;if(document.frames){this.pD=document.frames["lhid_secrethistory"].document}}ed.prototype.r=function(){K.Ta(this);if(this.eC)window.clearInterval(this.eC)};ed.prototype.No=function(){this.Ud=location.hash;this.uo();this.eC=window.setInterval(this.eu.bind(this),16)};ed.prototype.eu=function(){if(location.hash==this.Ud)return;this.Ud=location.hash;this.uo()};ed.prototype.ag=function(a,
b,c){this.tg.push({re:b,vpage:a,sticky:!(!c),instance:null})};ed.prototype.uo=function(){if(this.pD)this.cu();var a,b,c=-1;for(var d=0;d<this.tg.length;++d){a=this.tg[d].re.exec(this.Ud);if(a){b=this.tg[d].vpage;c=d;break}}if(!b){a={index:-1,input:this.Ud,length:0};b=this.dD}if(this.$z==b&&this.Yb.W){this.Yb.W(a)}else{if(this.Yb)this.Yb.ma();if(c>=0&&this.tg[c].sticky){var e=this.tg[c].instance;if(!e){e=new b(a);this.tg[c].instance=e}else{e.W(a)}this.Yb=e}else{this.Yb=new b(a)}}if(this.Yb.title)document.title=
this.Vf+this.Yb.title;this.$z=b};ed.prototype.cu=function(){var a=document.frames["lhid_secrethistory"].document,b={title:document.title},c=xh(this.Ud),d=ga(this.Ud);if(a.body.innerHTML!=d){b.test="window.parent.location.hash!="+c;b.dest=c;b.state=d}else if(a.body.innerHTML==""){b.test="window.parent.location.hash.length>1";b.dest='""';b.state="#"}else{return}var e=V('<html lang="en-us"><title>{title}</title><script type="text/javascript">function loadparent(){if({test})window.parent.location.hash={dest};}<\/script><body onload="loadparent()">{state}</body></html>',
b);a.open();a.write(e);a.close()};function ob(a){this.g=a;this.pd=this.Sw.bind(this)}ob.prototype.yj=false;ob.prototype.Lf=1;ob.prototype.Vo=0;ob.prototype.Dl=0;ob.prototype.$l=0;ob.prototype.Pn=0;ob.prototype.Yk=0;ob.prototype.Pp=0;ob.prototype.stop=function(){if(this.yj){Mi(this.pd)}this.yj=false};ob.prototype.eh=function(a){this.Lf=Ic(a,0,1);wd(this.g,yd?Math.min(this.Lf,0.99):this.opacity);Ka(this.g,"visibility",this.Lf?"":"hidden")};ob.prototype.ce=function(a,b){a=Ic(a,0,1);var c=this.Lf;this.Vo=c;this.Dl=a;this.$l=a-c;var d=
ya();this.Pn=d;this.Yk=d+Math.abs(this.$l)*b;this.Pp=this.Yk-d;if(this.Yk<=this.Pn){this.stop();this.eh(this.Dl)}else{if(!this.yj){Vf(this.pd)}this.yj=true}};ob.prototype.Sw=function(a){var b=this.Dl;if(a<this.Yk){var c=(a-this.Pn)/this.Pp;b=c*this.$l+this.Vo}else{this.stop()}this.eh(b)};function mc(a,b,c,d){K.Sa(this);this.g=q("span");a.appendChild(this.g);this.rb=null;var e=this.je={lhui_startflag:m("Flag"),lhui_form:m("form"),lhui_cancel:m("cancel")};o(e.lhui_startflag,this.Ru.bind(this));o(e.lhui_form,this.Lu.bind(this));o(e.lhui_cancel,this.Lo.bind(this));if(b)this.Xi(b,c,d)}mc.prototype.r=function(){K.Ta(this);x(this.je.lhui_startflag);x(this.je.lhui_form);x(this.je.lhui_cancel)};mc.prototype.ma=function(){if(this.g)z(this.g);if(this.rb)z(this.rb);gb("restoreVideo");this.r()};
mc.prototype.Xi=function(a,b,c,d){this.oC=a;this.jg=b;this.Za=c;this.kF=d;this.Lo()};mc.prototype.Ru=function(){if(this.rb){z(this.rb)}this.rb=N(wn,this.je);this.rb.style.visibility="hidden";document.body.insertBefore(this.rb,document.body.firstChild);gb("hideVideo");var a=this.rb.offsetWidth,b=this.rb.offsetHeight,c=pa(this.g);this.rb.style.top=c.y-b/2+"px";this.rb.style.left=c.x+this.g.offsetWidth-a+"px";var d=pa(this.rb);if(d.x<50)this.rb.style.left=c.x-20+"px";d=pa(this.rb);this.g.innerHTML="&nbsp;";
this.rb.style.visibility="";var e=Pd(),f=document.body.scrollTop;if(d.y<f){f=d.y}else if(d.y+b-f>e){f=d.y;var g=10;if(b+g<e)f+=b+g-e}window.scrollTo(d.x,f)};mc.prototype.Lo=function(){if(this.rb)z(this.rb);gb("restoreVideo");this.g.innerHTML="";this.g.innerHTML=V(cn,this.je)};mc.prototype.Qu=function(){if(this.rb)z(this.rb);gb("restoreVideo");this.g.innerHTML="";this.g.innerHTML=V("<b>Thank you for reporting this content. Your vigilance helps us improve Web Albums.</b>",this.je)};mc.prototype.Lu=
function(){var a=k(this.je.lhui_form);if(!(a&&a.reason&&a.msg&&this.oC))return;var b=0;for(var c=0;c<a.reason.length;c++){if(a.reason[c].checked){b=a.reason[c].value}}var d=Wc(a.msg.value),e;if(!b){e="You must select one of the provided categories."}else if(d.length>200){e=jo(d.length,200)}if(e){alert(e);return}if(!confirm("Are you sure you want to flag this content for review?")){return}var f=["uname="+this.oC];if(this.jg)f.push("aid="+this.jg);if(this.Za)f.push("iid="+this.Za);var g=["reason="+
b,"msg="+Xc(d)],h="/lh/flagInappropriate?"+f.join("&");L.Ga(h,null,g.join("&"));this.Qu()};var cn="<a href=\"javascript:_d('{lhui_startflag}')\">"+Nj+"</a>",wn='<form id="{lhui_form}" class="lhcl_flagger" action="javascript:_d(\'{lhui_form}\')"><h1>'+Nj+'</h1><p>By submitting this form, you\'re alerting the Picasa team to inappropriate content on this page. <a href="http://picasa.google.com/support/bin/answer.py?answer=44321" target="_blank">What does this mean?</a></p><h2>Why are you reporting this as inappropriate?</h2><p><input type="radio" name="reason" value="1" /> This content promotes violence or is hateful.<br /><input type="radio" name="reason" value="2" /> This content is offensive.<br /><input type="radio" name="reason" value="3" /> This content contains nudity.<br /><input type="radio" name="reason" value="4" /> This content is otherwise inappropriate.</p><p>'+
bo('<a href="http://www.google.com/picasa_web_dmca.html" target="_blank">',"</a>")+'</p><h2>Briefly tell us why you are reporting this content for review:</h2><p><textarea name="msg"></textarea></p><div class="lhcl_buttons"><input type="submit" value="Submit" /><input type="button" value="Cancel" onclick="_d(\'{lhui_cancel}\')" /></div></form>';function X(a,b){K.Sa(this);this.p=a;this.Zr=b;this.g=q("div");var c=this.g.style;c.position="relative";c.overflow="hidden";c.minWidth="512px";this.I=q("img");this.I.style.position="absolute";if(typeof this.I.complete=="undefined")this.I.complete=true;this.Se=new Image;this.Se.onload=(this.Se.onerror=ib(this,this.Zm));this.I.onerror=ib(this,this.uk);this.SD=ib(this,this.Sz);this.Re=ib(this,this.Pb);this.le=ib(this,this.Ed);this.Sg=ib(this,this.Ea);this.me=ib(this,this.ra);this.uE=this.Ps.bind(this);
this.Rn=new qb(this.bC.bind(this));this.Az=false;this.Cz=false}X.prototype.r=function(){K.Ta(this);if(this.Rn)this.Rn.r();var a=this.I;if(a){a.onload=(a.onerror=(a.ondragstart=null))}a=this.Se;if(a){a.onload=(a.onerror=null)}this.Mk(false);this.Lk(false);this.Hg=true;this.sh(false);for(var b in this)this[b]=null};X.prototype.xl=function(a,b,c,d,e){b=b||512;c=c||512;var f=b/c;if(this.Oi!=a){this.fi=false;this.Rn.reset();this.jb=false}this.Oi=a;this.Vc=b;this.yd=c;this.gf=f;this.Pg=Math.max(this.Vc,
this.yd);this.zC=d||null;this.yC=e||"embedded";this.ef();this.sh(false);this.PA=1;this.Zf=0.5;this.$f=0.5};X.prototype.ef=function(){if(this.Hg)return;if(this.ud)z(this.ud);if(this.I)z(this.I);if(this.g)z(this.g);this.ud=null;this.Hg=true;this.$s=false};X.prototype.Xc=function(a){if(!this.Hg)return;var b=this.Di(),c=a==1?b:_thumbSize;if(!a){var d=this.po(this.Oi);for(var e=0;e<d.length;e++){c=Math.max(c,d[e]);if(c>=b)break}}var f=this.oo(c);this.$s=true;this.I.onload=this.uE;this.Cy=c;if(this.Pc)this.Pc();
if(this.I.src==f&&this.I.complete){this.Ps()}else if(this.Se.src!=f||this.Se.complete){this.fi=false;this.I.src=f}};X.prototype.W=function(){if(this.Ma()&&!this.Hg){if(!this.ud){var a={url:this.zC,hl:_LH.locale,mode:this.yC};this.ud=N('<embed style="position:absolute" type="application/x-shockwave-flash" src="http://video.google.com/googleplayer.swf?videoUrl={url}&hl={hl}&autoplay=yes" allowScriptAccess="always" swLiveConnect="true" quality="best" bgcolor="#eeeeee" scale="noScale" salign="TL" width="240" height="240" FlashVars="playerMode={mode}"></embed>',
a);this.g.appendChild(this.ud)}this.Di();return}var b=this.Di(),c=this.oo(b);if(!this.jb&&this.Se.src!=c&&!this.fi){this.jb=true;this.YD=b;if(this.Pc)this.Pc();this.Se.src=c}};X.prototype.Ma=function(){return Ge&&this.zC};X.prototype.Ps=function(){var a=this.I;this.eo(a,this.Cy);if(!this.$s)return;this.Hg=(this.$s=false);a.onload=null;this.To();var b=this.Di();this.Zr.appendChild(this.g);this.g.appendChild(a);this.Di();if(this.hd)this.hd();if(this.onload&&this.Cy==b&&!this.Ma())this.onload()};X.prototype.Zm=
function(a){this.eo(this.Se,this.YD);if(!this.jb)return;this.fi=false;this.I.src=this.Se.src;this.To();if(!this.hidden&&this.onload)this.onload();this.Rn.J(1000)};X.prototype.uk=function(a){this.fi=true;if(this.Ug)this.Ug(a);if(this.I.onload)this.I.onload()};X.prototype.hd=null;X.prototype.Ug=null;X.prototype.onload=null;X.prototype.Pc=null;X.prototype.To=function(){if(this.fi)return;var a=this.I;this.Oi=zk(a.src);var b=this.Vc,c=this.yd;if((b-c)*(a.width-a.height)<0){this.Vc=c;this.yd=b;this.gf=
c/b}};X.prototype.bC=function(){if(!this.I)return;this.jb=false;this.W()};X.prototype.po=function(a){if(!vh[a])vh[a]=[];return vh[a]};X.prototype.eo=function(a,b){var c=zk(a.src),d=this.po(c);Ri(d,b)};X.prototype.oo=function(a){if(a<this.Pg){a=ok(a);return this.Oi+"?imgmax="+a}else if(this.Pg>1600){return this.Oi+"?imgmax=0"}else{return this.Oi}};X.prototype.sh=function(a){if(this.ll==a)return;this.ll=a;this.Lk(a);this.Mk(false);this.I.ondragstart=a?this.SD:null;if(!this.Hg)this.W()};X.prototype.getZoom=
function(){return this.ll};X.prototype.Bq=function(){return this.Jr/this.Pg};X.prototype.Pb=function(a){this.Gz=a.clientX;this.Hz=a.clientY;this.Lk(false);this.Mk(true);Ad(a)};X.prototype.ra=function(a){this.Lk(true);this.Mk(false)};X.prototype.Ed=function(a){var b=this.Gz-a.clientX,c=this.Hz-a.clientY;this.Gz=a.clientX;this.Hz=a.clientY;this.Zf+=b/this.Iw;this.$f+=c/this.Hw;this.Mp()};X.prototype.Ea=function(a){if(!(a.relatedTarget||a.toElement))this.ra(a)};X.prototype.Mk=function(a){if(a==this.Cz)return;
this.Cz=a;var b=a?Qa:Xa;b(document,"mouseup",this.me);b(document,"mousemove",this.le);b(document,"mouseout",this.Sg)};X.prototype.Lk=function(a){if(a==this.Az)return;this.Az=a;var b=a?Qa:Xa;b(this.I,"mousedown",this.Re)};X.prototype.Sz=function(a){Ad(a)};X.prototype.Di=function(){var a=this.p.xt(this),b=a.w,c=a.h,d=a.f;if(this.Ma()){c-=27}var e=b/c,f=this.Vc,g=this.yd;if(this.Ma()){f*=10000;g*=10000}if(f>b||g>c){var h=Math.min(512,this.Pg);if(this.Ma()&&this.yC!="embedded"){h=0}if(this.gf>=e){if(f<
g)h*=this.gf;f=Ic(b,h,f);g=f/this.gf}else{if(g<f)h/=this.gf;g=Ic(c,h,g);f=g*this.gf}if(this.Ma()){f=Math.floor(f);g=Math.floor(g)}else{var i=Math.min(ok(Math.max(f,g)),this.Pg);if(f>g){f=i;g=Math.floor(f/this.gf)}else{g=i;f=Math.floor(g*this.gf)}}}this.Jr=Math.max(f,g);this.sF=this.Jr/this.Pg;if(this.ll){f=this.PA*this.Vc;g=this.PA*this.yd}if(!d){if(this.ll){c=Ic(c,512,g)}else{c=g}}this.Iw=f;this.Hw=g;this.eE=b;this.dE=c;if(!this.Hg)this.Mp();return this.ll?this.Pg:this.Jr};X.prototype.Mp=function(){var a=
this.Iw,b=this.Hw,c=this.eE,d=this.dE,e=this.I.style,f=0,g=0;if(this.fi){e.border="2px solid red";f=4;g=4}else{e.border=""}e.width=Math.max(a-f,0)+"px";e.height=Math.max(b-g,0)+"px";var h=c/2,i=d/2;this.Zf=Ic(this.Zf,h/a,1-h/a);this.$f=Ic(this.$f,i/b,1-i/b);e.cursor="";if(a<=c){e.left=h-a/2+"px"}else{e.left=h-a*this.Zf+"px";e.cursor="move"}if(b<=d){e.top=i-b/2+"px"}else{e.top=i-b*this.$f+"px";e.cursor="move"}if(this.ud){var j=this.ud.style;j.width=Math.max(a,0)+"px";j.height=Math.max(b+27,0)+"px";
j.top=i-b/2+"px";j.left=h-a/2+"px"}if(this.Ma()){d+=27}this.g.style.width=c<=512?"512px":"";this.g.style.height=Math.max(d,0)+"px"};var ok=function(a){var b=[72,128,144,176,288,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];for(var c=b.length-1;c>0;c--){if(a>=b[c])return b[c]}return b[0]},vh={};function Ba(a,b,c,d,e){K.Sa(this);this.p=a;this.g=b;this.n=c;this.Ww=!(!d);this.ax=!(!e);this.nc=this.Wa.bind(this);Qa(window,"resize",this.nc);this.HD=this.Ui.bind(this);this.FD=this.rh.bind(this);this.yF=this.pl.bind(this);this.kD=this.ku.bind(this);this.EE=this.Zu.bind(this);this.Nn=new qb(this.Oo.bind(this));this.B=-1;this.RE=-1;this.uF=null;this.ab=[];this.I=null;this.Na=null;this.jb=false;this.fr=false;this.On=false;this.$w=1;o("movieDone",this.rh.bind(this))}Ba.prototype.r=function(){K.Ta(this);
if(this.Nn)this.Nn.r();if(this.I)this.I.r();if(this.Na)this.Na.r();if(this.nc)Xa(window,"resize",this.nc);x("movieDone");for(var a in this)this[a]=null};Ba.prototype.kd=function(){return this.B};Ba.prototype.Gj=function(){return this.I};Ba.prototype.ph=function(a,b){if(a<0||a>=this.n.length)return false;if(b)this.lp();this.RE=a;this.ab.push(a);this.vo();return true};Ba.prototype.lp=function(){this.ab.length=0;if(this.Na)this.Na.hd=null;this.jb=false};Ba.prototype.ql=function(){this.ph(this.B,true)};
Ba.prototype.Mu=function(a){this.ax=!(!a)};Ba.prototype.vo=function(){this.On=false;this.Nn.reset();if(this.jb||this.ab.length==0)return;this.jb=true;this.fr=false;this.tA=false;var a=this.ab.shift();this.$w=a>this.B?1:-1;if(this.I)this.I.onload=null;if(this.Co(a)){this.B=a;this.Na.hd=this.EE;this.Na.onload=this.FD;this.Na.Ug=this.kD;this.Na.Pc=this.HD;var b=0;if(this.ab.length){b=2}else if(this.ax){b=1}this.Na.Xc(b)}};Ba.prototype.Co=function(a){if(!this.n){return false}var b=this.n[a];if(!b){return false}if(!this.Na){this.Na=
new X(this,this.g)}this.Na.xl(b.s,b.w,b.h,b.vsurl||null,this.Ww?"mini":"normal");if(A&&Ge&&b.vsurl){this.hasVideo=true}return true};Ba.prototype.Zu=function(){var a=this.I;this.I=this.Na;this.Na=a;if(this.hd)this.hd();if(this.Na){this.Na.ef();this.Na.Pc=null;this.Na.hd=null;this.Na.onload=null;this.Na.Ug=null}this.jb=false;if(this.ab.length){this.vo()}else{this.Nn.J(200)}};Ba.prototype.Ui=function(){if(this.Pc)this.Pc()};Ba.prototype.rh=function(){if(this.onload)this.onload();this.fr=true;if(this.tA)this.pl();
else if(this.On)this.Oo()};Ba.prototype.Oo=function(){if(!this.On&&this.onstopped)this.onstopped();this.On=true;if(!this.I||this.ab.length)return;if(this.fr){this.tA=true;this.pl()}else{this.I.W()}};Ba.prototype.ku=function(a){if(this.Ug){this.Ug()}if(this.Na&&this.Na.onload){this.Na.onload()}};Ba.prototype.pl=function(){var a=this.n.length;if(a<2)return;var b=this.B+this.$w;if(b<0)b=1;if(b>a-1)b=a-2;if(this.Co(b)){this.Na.W()}};Ba.prototype.Wa=function(){var a=self.outerWidth||self.innerHeight||
document.documentElement.clientHeight,b=self.outerHeight||Pd();if(a!=this.DD||b!=this.BD){this.DD=a;this.BD=b;if(this.I)this.I.W();if(this.onresize)this.onresize()}};Ba.prototype.xt=function(a){return{f:this.Ww,w:this.g.offsetWidth,h:this.p.Wc(a)}};function fb(a){K.Sa(this);this.p=a;var b={lhf_prev:m("Previous"),lhf_next:m("Next"),lhf_exit:m("Exit"),lhf_play:m("Play"),lhf_stop:m("Pause"),lhf_fast:m("Faster"),lhf_slow:m("Slower"),lhf_show:m("ToggleCaptions")};o(b.lhf_prev,a.tc.bind(a));o(b.lhf_next,a.sc.bind(a));o(b.lhf_exit,a.oh.bind(a));o(b.lhf_play,a.Bo.bind(a));o(b.lhf_stop,a.eg.bind(a));o(b.lhf_fast,a.Xu.bind(a));o(b.lhf_slow,a.Wu.bind(a));o(b.lhf_show,this.Po.bind(this));this.YC=b;this.Sj=new qb(this.Pd.bind(this));var c=N(ep,{});u(c,false);
C(document.body,c);this.Og=c;this.Gr=new qb(this.Uu.bind(this));var d=new Oe(document.body,"lhcl_slideshow_feedback");this.Vw=d;this.$p=new qb(this.ro.bind(this));this.pm=new ob(d.div);this.pm.eh(0);var e=q("div");C(document.body,e);e.className="lhcl_slideshow_container";this.UC=e;var f=new Oe(e,"lhcl_slideshow_caption");this.bw=f;this.mp=new ob(f.contents);this.mp.eh(0);var g=new Oe(e,"lhcl_slideshow_controls");this.xp=g;this.mj=new ob(g.contents);this.mj.eh(0);if(!A){wd(f.bg,0.7);wd(g.bg,0.7);wd(d.bg,
0.7)}var h=q("table");C(g.fg,h);var i=q("tbody");C(h,i);var j=q("tr");C(i,j);var l=q("td");C(j,l);this.zF=new Lb(l,"img/slideshowprev.gif","img/slideshowprev_on.gif",'javascript:_d("'+b.lhf_prev+'")');var p=q("td");C(j,p);this.CE=new Lb(p,"img/slideshowpause.gif","img/slideshowpause_on.gif",'javascript:_d("'+b.lhf_stop+'")');this.gA=new Lb(p,"img/slideshowplay.gif","img/slideshowplay_on.gif",'javascript:_d("'+b.lhf_play+'")');this.gA.Xc(false);var s=q("td");C(j,s);this.tF=new Lb(s,"img/slideshownext.gif",
"img/slideshownext_on.gif",'javascript:_d("'+b.lhf_next+'")');var y=q("td");C(j,y);this.fF=new Lb(y,"img/slideshowminus.gif","img/slideshowminus_on.gif",'javascript:_d("'+b.lhf_fast+'")');this.dC=q("td");C(j,this.dC);var t=q("td");C(j,t);this.IF=new Lb(t,"img/slideshowplus.gif","img/slideshowplus_on.gif",'javascript:_d("'+b.lhf_slow+'")');var B=q("td");C(j,B);this.Jn=q("a");this.Jn.href='javascript:_d("'+b.lhf_show+'")';C(B,this.Jn);W(this.Jn,"hide captions");var S=q("td");C(j,S);this.eF=new Lb(S,
"img/slideshowexit.gif","img/slideshowexit_on.gif",'javascript:_d("'+b.lhf_exit+'")');this.RD=n(document,ac,this.ou,false,this)}fb.prototype.Ei=true;fb.prototype.Rb=true;fb.prototype.r=function(){K.Ta(this);Bb(this.RD);this.$p.r();this.Gr.r();this.Sj.r();this.mj.stop();this.mp.stop();this.pm.stop();var a=this.YC;if(a){x(a.lhf_prev);x(a.lhf_next);x(a.lhf_exit);x(a.lhf_play);x(a.lhf_stop);x(a.lhf_fast);x(a.lhf_slow);x(a.lhf_show)}this.bw.r();this.xp.r();this.Vw.r();z(this.Og);z(this.UC)};fb.prototype.Xc=
function(){this.Sj.reset();this.mj.ce(1,300);if(!this.Dz){this.ef(3000)}};fb.prototype.ef=function(a){this.Sj.reset();if(a){this.Sj.J(a)}else{this.Pd()}};fb.prototype.wl=function(a){if(!a&&!this.Rb){this.ro();this.$p.reset();return}if(a==this.Rb){return}this.CE.Xc(a);this.gA.Xc(!a);var b="pause";if(a){this.ef();b="play"}else{this.Xc()}W(this.Vw.fg,b);this.pm.ce(1,100);this.$p.J(2000);this.Rb=a};fb.prototype.ro=function(){this.pm.ce(0,300)};fb.prototype.vl=function(a){if(a){this.Gr.J(500)}else{this.Gr.reset();
u(this.Og,false)}};fb.prototype.yl=function(a){var b=a?1:0;this.mp.ce(b,300)};fb.prototype.tl=function(a){this.Ha=a;if(!this.Ei){return}if(a){a=Pe(a);this.bw.fg.innerHTML=a;this.yl(true)}else{this.yl(false)}};fb.prototype.wx=function(){return this.xp.bg.offsetHeight};fb.prototype.Po=function(){this.Ei=!this.Ei;var a="show captions";if(this.Ei){this.tl(this.Ha);a="hide captions"}else if(this.Ha){if(this.Ha){this.yl(false)}}W(this.Jn,a)};fb.prototype.$i=function(a){var b=a/1000;W(this.dC,"seconds: "+
b);this.Xc()};fb.prototype.Uu=function(){u(this.Og,true)};fb.prototype.Pd=function(){if(this.mj){this.mj.ce(0,300)}};fb.prototype.ou=function(a){if(a.clientX==this.Zf&&a.clientY==this.$f){return}this.Xc();this.Zf=a.clientX;this.$f=a.clientY;this.Dz=false;for(var b=a.target;b!=null;b=b.parentNode){if(b==this.xp.div){this.Sj.reset();this.Dz=true;break}}};function Oe(a,b){K.Sa(this);var c={fg:m("fg"),bg:m("bg"),outer:m("table"),inner:m("inner"),className:b};this.g=N('<table id="{outer}" class="{className}"><tr><td><div id="{inner}" style="position:relative;height:100%"><div id="{bg}" class="{className}_bg" style="position:absolute;z-index:2;width:100%;height:100%"></div><div id="{fg}" class="{className}_fg" style="position:relative;z-index:3;width:100%"></div></div></td></tr></table>',
c);C(a,this.g);this.contents=k(c.inner);this.div=k(c.outer);this.fg=k(c.fg);this.bg=k(c.bg);if(A){this.fg.onresize=this.Gu.bind(this)}}Oe.prototype.r=function(){K.Ta(this);if(this.fg){this.fg.onresize=null}z(this.g)};Oe.prototype.Gu=function(){Ka(this.bg,"height",this.fg.offsetHeight-1+"px")};function Lb(a,b,c,d){K.Sa(this);var e={anchor:m("anchor"),off_id:m("button"),off_src:b,on_id:m("buttonOn"),on_src:c,mouseover:m("mouseover"),mousedown:m("mousedown"),mouseout:m("mouseout"),mouseup:m("mouseup")};
this.e=e;this.g=N('<table><tr><td><a id="{anchor}" onmouseover="_d(\'{mouseover}\')" onmouseout="_d(\'{mouseout}\')" onmousedown="_d(\'{mousedown}\')" onmouseup="_d(\'{mouseup}\')"><img id="{on_id}" src="{on_src}" style="position:absolute;" ondragstart="return false" /><img id="{off_id}" src="{off_src}" onmousedown="return false" /></a></td></tr></table>',e);C(a,this.g);this.EC=k(e.anchor);this.EC.href=d;this.Jf=k(e.on_id);if(A){Ka(this.Jf,"visibility","hidden")}else{this.Vg=new ob(this.Jf);this.Vg.eh(0)}o(e.mouseover,
this.qu.bind(this));o(e.mouseout,this.pu.bind(this));o(e.mousedown,this.nu.bind(this));o(e.mouseup,this.ru.bind(this))}Lb.prototype.r=function(){K.Ta(this);var a=this.e;x(a.mouseover);x(a.mouseout);x(a.mousedown);x(a.mouseup);if(this.Vg){this.Vg.stop()}};Lb.prototype.Xc=function(a){u(this.g,a)};Lb.prototype.qu=function(){if(!A){this.Vg.ce(0.5,200)}};Lb.prototype.pu=function(){if(A){Ka(this.Jf,"visibility","hidden")}else{this.Vg.ce(0,200)}};Lb.prototype.nu=function(){if(A){Ka(this.Jf,"visibility",
"")}else{this.Vg.ce(1,0)}};Lb.prototype.ru=function(){if(A){Ka(this.Jf,"visibility","hidden")}else{this.Vg.ce(0.5,0)}};var ep='<div class="lhcl_slideshow_loading">'+id+"</div>";function aa(a){K.Sa(this);this.Zq=[];for(var b=document.body.firstChild;b!=null;b=b.nextSibling){if(b.style&&b.style.display!="none"){u(b,false);this.Zq.push(b)}}var c=document.body;this.g=q("div");c.appendChild(this.g);this.IC=pr(c);Ka(c,"background","#000");var d=A?document.documentElement:c;Ka(d,"overflow","hidden");this.n=_photo;this.F=new fb(this);this.N=new Ba(this,this.g,this.n,true);this.N.hd=this.wu.bind(this);this.N.onload=this.lu.bind(this);this.N.Pc=this.mu.bind(this);this.Ue=zh(this.n,
"id");this.ti=new qb(this.wt.bind(this));qk(this);this.F.$i(this.Kb);this.wj=new Nb;this.wj.ta(document,sc,this.ia,false,this);this.wj.ta(document,"keyup",this.yb,false,this);this.wj.ta(document,"blur",this.ob,false,this);this.ub=new qb(this.Hb.bind(this));this.W(a);o("f",this.St.bind(this))}aa.prototype.Rb=true;aa.prototype.jb=false;aa.prototype.Kb=4000;aa.prototype.Nc=false;aa.prototype.zc=0;aa.prototype.r=function(){K.Ta(this);x("f");if(this.N){this.N.r()}if(this.F){this.F.r()}this.wj.j();this.wj=
null;if(this.ub){this.ub.r()}};aa.prototype.ma=function(){this.eg();while(this.Zq.length){u(this.Zq.pop(),true)}var a=document.body;Ka(a,"background",this.IC);var b=A?document.documentElement:a;Ka(b,"overflow",yd?"-moz-scrollbars-vertical":"hidden");if(this.g){z(this.g)}this.r()};aa.prototype.W=function(a){var b=a[1],c=this.Ue[b];if(c==undefined){location.replace(location.href.replace(/#.*/,"#unknown-"+b));return}this.title=" - "+this.n[c].t;this.B=c;this.N.Mu(!this.Nc);this.N.ph(c)};aa.prototype.nb=
function(a,b){var c=this.B+a,d=this.n.length;if(b){while(c<0)c+=d;c%=d}if(c<0||c>=d)return false;if(A&&Ge){if(this.N.hasVideo&&this.n[c].vsurl){fp(this);window.open(location.href.replace(/#.*/,"#s"+this.n[c].id),"_top");return true}}location.replace(location.href.replace(/#.*/,"#s"+this.n[c].id));return true};aa.prototype.sc=function(){this.eg();this.nb(1,true)};aa.prototype.tc=function(){this.eg();this.nb(-1,true)};aa.prototype.Bo=function(){if(this.Rb){return}this.Rb=true;this.F.wl(true);if(!this.jb){this.ti.J(this.Kb)}};
aa.prototype.eg=function(){this.Rb=false;this.F.wl(false);this.ti.reset()};aa.prototype.oh=function(){location=_album.link};aa.prototype.Xu=function(){this.Kb=Math.max(this.Kb-1000,1000);this.F.$i(this.Kb);if(this.Rb){this.ti.J(this.Kb)}};aa.prototype.Wu=function(){this.Kb=Math.min(this.Kb+1000,20000);this.F.$i(this.Kb);if(this.Rb){this.ti.J(this.Kb)}};aa.prototype.Wc=function(a){var b=Pd();if(a.Ma()){b=Math.max(b-this.F.wx(),0)}return b};aa.prototype.wu=function(){this.F.vl(false);var a=this.N.kd();
if(this.N.Gj().Ma()){this.F.tl("")}else{this.F.tl(this.n[a].c)}if(this.Nc){this.nb(this.$g,true)}};aa.prototype.mu=function(){this.jb=true;this.F.vl(true)};aa.prototype.lu=function(){this.jb=false;this.F.vl(false);if(this.Rb){this.ti.J(this.Kb)}};aa.prototype.ia=function(a){if(a.altKey||a.metaKey||a.ctrlKey){return}var b=a.target.nodeName.toLowerCase();if(b=="textarea"||b=="input"||b=="select"){return}var c=parseInt(String.fromCharCode(a.keyCode),10);if(!isNaN(c)){this.Kb=c*1000;this.F.$i(this.Kb);
if(this.Rb)this.ti.J(this.Kb);return}if(a.keyCode==27){this.oh();a.preventDefault()}else if(a.keyCode==37){if(this.zc!=37){this.tc();this.gc(-1);this.zc=a.keyCode}a.preventDefault()}else if(a.keyCode==39){if(this.zc!=39){this.sc();this.gc(1);this.zc=a.keyCode}a.preventDefault()}else if(a.keyCode==32){if(this.Rb){this.eg()}else{this.Bo()}a.preventDefault()}};aa.prototype.yb=function(a){if(a.keyCode==37||a.keyCode==39){this.ob()}};aa.prototype.gc=function(a){this.ob();this.$g=a;if(a!=0){this.ub.J(400)}};
aa.prototype.ob=function(){this.ub.reset();this.Nc=false;this.zc=0};aa.prototype.Hb=function(){this.Nc=true;this.eg();this.nb(this.$g,true)};aa.prototype.wt=function(){this.nb(1,true)};aa.prototype.St=function(a,b){if(a=="stateChanged"){var c=b.split(",");if(c[1].indexOf("completed")>-1){gb("movieDone")}}};var fp=function(a){if(a&&a.F){var b=a.F.Rb?"1":"0",c=a.F.Ei?"1":"0",d=a.Kb;Gc(wh,b+","+c+","+d)}},qk=function(a){if(a&&a.F){var b=vc(wh);if(b&&b.length){var c=b.split(",");if(c.length==3){a.Rb=
c[0]=="1";a.F.wl(a.Rb);if(c[1]!="1"){a.F.Po()}a.Kb=Number(c[2])}}}ef(wh)},wh="_lh_slideshow";function Pa(a,b){this.Ad=a;this.va=Math.max(b,1);this.sd=-1;this.$c=0;this.Ch=0;this.kh=Math.ceil(this.Ad/this.va);this.ID=false;this.kz=false}var Io;Pa.D(O);var oh="totalpageschanged",jd="currentpagechanged",Rf="currentitemchanged";Pa.prototype.Hx=function(a){if(a<0||a>=this.kh){return null}var b;if(this.$c==a){b=this.Ch}else{b=this.va*a}return{index:a,startItemIndex:b,size:Math.min(this.va,this.Ad-b)}};Pa.prototype.un=function(a){if(this.sd==a||0==this.Ad){return}if(a<0||a>=this.Ad){throw Error("Bad item index: "+
a+" for listSize "+this.Ad);}var b=false;if(this.ID){var c=this.Kj(a);if(c!=this.$c){this.$c=c;b=true}}this.sd=a;this.dispatchEvent(Rf);if(b){this.dispatchEvent(jd)}};Pa.prototype.qq=function(){return this.sd};Pa.prototype.Kk=function(a){if(a>=this.kh){return}var b=false,c=false;if(this.$c!=a){this.$c=a;b=true;if(this.kz){var d=this.wf(this.$c);if(this.sd!=d){this.sd=d;c=true}}}if(b){this.dispatchEvent(jd)}if(c){this.dispatchEvent(Rf)}};Pa.prototype.wf=function(a){if(a<0||a>this.kh){return-1}return Math.floor(a*
this.va)};Pa.prototype.Kj=function(a){if(a<0||a>=this.Ad){return-1}return Math.floor(a/this.va)};Pa.prototype.ms=function(){var a=Math.ceil(this.Ad/this.va),b=this.sd<0?-1:this.Kj(this.sd);if(a!=this.kh){this.kh=a;this.dispatchEvent(oh)}if(b>=0&&b!=this.Zl){this.Zl=b;this.dispatchEvent(jd)}if(this.sd>=this.Ad){this.sd=-1;this.dispatchEvent(Rf)}};Pa.prototype.Cn=function(a){this.Ad=a;this.ms()};Pa.prototype.Dm=function(){return this.kh};Pa.prototype.Lz=function(){this.Ms(1)};Pa.prototype.wA=function(){this.Ms(-1)};
Pa.prototype.Ms=function(a){var b=this.Ch+a*this.va;if(b<0){b=0}if(b>=this.Ad){b=this.Ad-this.va}var c=this.Kj(b);this.Ch=b;this.$c=c;this.dispatchEvent(jd)};Pa.prototype.vd=function(){return this.$c};Pa.prototype.Kk=function(a){if(a<0||a>=this.kh){return}var b=a!=this.$c;this.$c=a;this.Ch=this.$c*this.va;var c=false;if(this.kz){if(this.sd!=this.Ch){this.sd=this.Ch;c=true}}if(b){this.dispatchEvent(jd)}if(c){this.dispatchEvent(Rf)}};Pa.prototype.fh=function(a){this.va=a;this.ms()};Pa.prototype.wm=
function(){return this.va};Pa.prototype.tw=function(a,b){var c=b||a*2;return new ne(this,a,c,this.$c)};function ne(a,b,c,d){this.Nb=a;this.Lv=b;this.za=b;this.Zs=d||0;this.Wo=0;this.Qe=c||b*2;this.qc(true);this.Nb.addEventListener(oh,this.qc.bind(this,false));this.Nb.addEventListener(jd,this.qc.bind(this,false))}ne.D(O);function dk(a){ja.call(this,"windowscroll",a);this.active=a.Wo}dk.D(ja);ne.prototype.qc=function(a){var b=this.Nb.Dm(),c=b-1,d=Math.min(c,this.Zs+(this.za-1)),e=this.Nb.vd(),f=Math.min(this.Qe,this.Lv+e);f=Math.max(f,this.Lv);var g=this.Qe;if(f>b){f=b;g=b;d=c}var h=Math.ceil(g/2),i=
-1,j=-1;if(f==this.Qe){if(e>c-h){var l=c-e;j=this.Qe-1-l;i=c-this.Qe+1}else{j=h;i=e-h}}else{i=0;j=e}this.za=f;this.Zs=i;this.Wo=j;if(!a){this.dispatchEvent(new dk(this))}};ne.prototype.ux=function(){return this.Zs};ne.prototype.La=function(){return this.za};ne.prototype.cx=function(){return this.Wo};function pc(a,b){this.p=a;this.Xb=b||"";this.b=q("td");this.I=q("div");this.ye=q("div");this.ee=null;C(this.p,this.b);C(this.b,this.I);C(this.b,this.ye);n(this.b,na,this.Iz.bind(this))}pc.prototype.Iz=function(){if(this.ee){this.ee()}};pc.prototype.lB=function(){this.show(true);Ya(this.I,this.Xb+"pagerfirst");W(this.ye,"");this.ee=null};pc.prototype.AB=function(a){this.show(true);Ya(this.I,this.Xb+"pagerprev");W(this.ye,"Previous");Ya(this.b,this.Xb+"firstCell");Ya(this.ye,this.Xb+"firstCellTxt");
this.ee=a.wA.bind(a)};pc.prototype.uB=function(a){this.show(true);Ya(this.I,this.Xb+"pagernext");Ya(this.ye,this.Xb+"pagernextnum");W(this.ye,"Next");this.ee=a.Lz.bind(a)};pc.prototype.qB=function(){this.show(true);Ya(this.I,this.Xb+"pagerlast");W(this.ye,"");this.ee=null};pc.prototype.fB=function(){this.show(true);Ya(this.I,this.Xb+"pagercurrent");Ya(this.ye,this.Xb+"pagercurrentpagenum");this.ee=null};pc.prototype.oB=function(a,b){this.show(true);Ya(this.I,this.Xb+"pagerpage");W(this.ye,b+1);Ya(this.ye,
this.Xb+"pagerpagenum");this.ee=a.Kk.bind(a,b)};pc.prototype.show=function(a){u(this.b,a)};function Me(a,b,c,d){this.p=a;this.Nb=b;this.UE=c;this.Xb=d||"";this.bo=this.Nb.tw(this.UE);this.Ki=null;this.Nb.addEventListener(jd,this.qc,false,this);this.Nb.addEventListener(oh,this.qc,false,this);this.qc()}Me.D(O);Me.prototype.qc=function(){if(!this.Ki){var a=q("table");Ya(a,this.Xb+"pager");C(this.p,a);var b=q("tbody");this.Ki=q("tr");C(a,b);C(b,this.Ki)}var c=this.bo.La();if(c<=1){this.show(false);return}else{this.show(true)}var d=
this.bo.ux(),e=this.bo.cx(),f=e-d;if(!this.cf){this.cf=[]}var g=this.cf[0];if(!g){g=new pc(this.Ki,this.Xb);this.cf[0]=g}if(d==0&&f==0){g.lB()}else{g.AB(this.Nb)}for(var h=0;h<c;++h){var i=this.cf[h+1];if(!i){i=new pc(this.Ki,this.Xb);this.cf[h+1]=i}i.oB(this.Nb,d+h);if(e==h){i.fB()}}var j=c+1,l=this.cf[j];if(!l){l=new pc(this.Ki,this.Xb);this.cf[j]=l}if(this.Nb.vd()+1==this.Nb.Dm()){l.qB()}else{l.uB(this.Nb)}for(var h=j+1;h<this.cf.length;++h){var p=this.cf[h];if(p){p.show(false)}}};Me.prototype.Ix=
function(){return this.bo};Me.prototype.show=function(a){u(this.p,a)};function Md(a){this.lc=a;this.b=q("td");this.Oc=q("a");this.Xj=q("img");wc(this.Xj,"144px","96px");this.gi=q("td");this.n=null;this.jm=null;C(this.Oc,this.Xj);C(this.b,this.Oc);u(this.b,false)}var Lo={PHOTO_DESCRIPTION:"",PHOTO_TAGS:"Tag",ALBUM_TITLE:"",ALBUM_DESCRIPTION:"",ALBUM_LOCATION:""};Md.prototype.Mv=function(a){this.Xj.src="img/spacer.gif";this.n=null;if(!a){this.gi.innerHTML=id}};Md.prototype.Rf=function(a){if(a){fa(this.b,"lhcl_activecell");fa(this.gi,"lhcl_activecell")}else{qa(this.b,
"lhcl_activecell");qa(this.gi,"lhcl_activecell")}};Md.prototype.sC=function(a,b){C(a,this.b);C(b,this.gi)};Md.prototype.show=function(a){u(this.b,a);u(this.gi,a)};Md.prototype.select=function(a){if(this.lc&&this.n&&(a.button==0||A&&a.button==1)){var b=this.n.B;this.lc.Cs(b);this.lc.Hd.un(b);var c=Pl();if(c.Kg()){c.yn(b+"+1")}location.href=this.Oc.href;a.stopPropagation()}};Md.prototype.qc=function(a){if(!a||this.n&&this.n.id==a.id){return}this.n=a;var b=this.n.Ii();if(b){var c=location.href.replace(/#.*/,
""),d=a.Zm?b.url:"img/spacer.png",e=c+"#"+a.B;this.Oc.href=e;this.Oc.title=a.t;if(this.jm){D(this.Oc,na,this.jm)}this.jm=this.select.bind(this);n(this.Oc,na,this.jm);this.Xj.src=d;wc(this.Xj,b.width+"px",b.height+"px")}var f=a.snippet||"",g=f&&a.snippetType?Lo[a.snippetType]:"",h=a.user,i="/"+h.name,j=a.album.link,l=a.album.title,p=a.truncated?V('<div class="truncated_link"><a href="{albumLink}">[{moremessage}]</a></div>',{albumLink:j,moremessage:"More from this album"}):"",s=ga(ti(h.nickname,24)),
y='<a href="'+i+'">'+s+"</a>",t=uo(y),B=V('<div><div class="album_link"><span class="">{albumTitle}</span></div><div class="owner_gallery_link">{ownerLink}</div><div class="context_info">{snippetType} {snippet}</div>{truncatedLink}</div>',{albumLink:j,albumTitle:ga(ti(l,24)),ownerLink:t,snippet:ti(f,24),snippetType:g,truncatedLink:p});this.gi.innerHTML=B};function yb(a,b,c){this.p=a;this.C=b;this.Hd=c;this.KF=0;this.gridMax=21;this.gridMin=18;this.Pj=this.gridMin;this.maxColumns=7;this.minColumns=
3;this.maxRows=6;this.cellSize=205;this.Im=[];this.Jm=[];this.jf=[];this.jj=-1;this.aa=-1;this.jb=false;this.cl=0;this.em=0;this.dm=0;this.Um=true;var d=q("tr"),e=q("td");d.appendChild(e);C(this.p,d);e.innerHTML='<div class="lhcl_search_results_count_info" style="overflow: hidden;" />';this.qg=e.firstChild;this.qg.innerHTML=id;for(var f=0;f<this.maxRows;++f){var g=this.rz();u(g,false);this.Im.push(g);C(this.p,g);g=this.qz();u(g,false);this.Jm.push(g);C(this.p,g)}var h=this.maxRows*this.maxColumns;
for(var f=0;f<h;++f){this.jf.push(new Md(this))}this.sk=q("td");var i=q("tr");i.appendChild(this.sk);C(this.p,i);this.Hd.addEventListener(Io,this.Zg.bind(this))}yb.D(O);yb.prototype.Nv=function(){this.gp(false)};yb.prototype.Ov=function(){this.gp(true)};yb.prototype.gp=function(a){for(var b=0;b<this.jf.length;++b){this.jf[b].Mv(a)}};yb.prototype.Gi=function(a){if(this.cl){Bk(this.cl);this.cl=0;if(this.dm>0){if(ya()-this.dm>45000){alert("The operation timed out.")}else{this.cl=Se(this.Gi.bind(this,
false),1000)}this.dm=-1;this.Zg()}}if(!this.Mg){this.Mg=new J("lhcl_modal-dialog");var b=new bb;this.Mg.tn(b);this.Mg.IB(Tj);this.Mg.dB('<img src="img/spin.gif" />');this.Mg.Ec()}if(a){this.dm=ya();this.cl=Se(this.Gi.bind(this,false),1000);this.Nv();this.Mg.kb()}this.Mg.da(a)};yb.prototype.hh=function(a){this.Gi(false);if(this.em>0){Bk(this.em);this.em=0}if(!this.p){return}this.jb=a;if(a){this.em=Se(this.Gi.bind(this,true),1000)}else{this.Gi(false)}};yb.prototype.Cs=function(a){var b=this.Hd.Hx(this.Hd.vd());
if(!b){return}var c=b.startItemIndex;if(a>=c&&a<=c+this.Pj){var d=a-c,e=this.jf[d];if(this.Fl&&this.Fl!=e){this.Fl.Rf(false);this.Fl=null}if(e){e.Rf(true);this.Fl=e}}};yb.prototype.Fs=function(a){var b=a||Cc(),c=80,d=Math.max(b.width,c*this.jj),e=Math.min(200,c*this.aa),f=k("lhid_listview");if(f){f.setAttribute("style","width: "+d+"px; height: "+e+"px;")}};yb.prototype.ps=function(a){if(a.width+a.height<1){a={width:document.body.clientWidth,height:document.body.clientHeight}}var b=Math.floor(a.width/
this.cellSize);b=Math.min(this.maxColumns,b);b=Math.max(this.minColumns,b);var c=Math.floor(this.gridMax/b);c=Math.min(this.maxRows,c);var d=false;if(b!=this.jj){this.jj=b;d=true}if(c!=this.aa){this.aa=c;d=true}if(d){this.Fs(a);var e=this.jj*this.aa;this.Hd.fh(e);this.Um=true;if(this.Pj!=e){this.Pj=e;this.Zg();this.dispatchEvent({type:"gridsizechanged",gridSize:e})}}};yb.prototype.kB=function(a){this.C=a;if(!a.isLoaded()){this.Fs()}};yb.prototype.cz=function(){if(!this.Um){return}this.Um=false;var a=
this.Pj,b=this.Hd.wf(this.Hd.vd()),c=0,d=this.Im[0],e=this.Jm[0],f=this.Hd.qq(),g=0;for(;g<a;++g){var h=this.jf[g],i=!(g%this.jj);if(i){d=this.Im[c];e=this.Jm[c];++c;te(d);te(e);u(d,true);u(e,true)}h.sC(d,e);h.show(true)}for(var j=c;j<this.maxRows;++j){var l=this.Im[j],p=this.Jm[j];if(l){u(l,false)}if(p){u(p,false)}}};yb.prototype.Zg=function(){this.cz();var a=this.C.bb,b=this.Pj,c=this.Hd.vd(),d=this.Hd.wf(c),e=this.Hd.qq(),f=0,g=0,h=b,i=Math.min(1000,this.C.fb());if(i<d+b){h=i-d}for(;g<b;++g){var j=
this.jf[g],l=d+g,p=a[l];j.show(true);j.qc(p);if(!p){continue}++f}g=h;for(;g<this.jf.length;++g){var j=this.jf[g];if(j){j.show(false)}}if(i<=0){u(this.qg,false)}else{W(this.qg,Vj(d+1,d+f,this.C.totalPhotos));u(this.qg,true)}};yb.prototype.rz=function(){return Ia("tr",{className:"lhcl_imgrow"})};yb.prototype.qz=function(){return Ia("tr",{className:"lhcl_inforow"})};function Eb(a,b,c){this.p=a;this.bb=_photo;this.RA=!(!c);this.e={albumlink:_album.link,albumlinkID:m("lhid_albumlink"),prevboxID:m("prevbox"),nextboxID:m("nextbox"),zoomID:m("zoom"),zoomTextID:m("zoomtext"),toolID:m("tools"),indextextID:m("indextext"),emailID:m("email")};var d=this.RA?So:Ro;this.g=N(d,this.e);b.appendChild(this.g);if(!_authuser.user){k(this.e.emailID).style.display="none"}if(_authuser.isOwner&&!this.RA){this.Nd={rotateFunc:m("func"),leftID:m("leftrotate"),rightID:m("rightrotate"),
leftOn:"img/rotateleft_normal.gif",leftOff:"img/rotateleft_ghosted.gif",rightOn:"img/rotateright_normal.gif",rightOff:"img/rotateright_ghosted.gif"};k(this.e.toolID).innerHTML=V('<img id="{leftID}" src="{leftOff}" title="Rotate Left" class="lhcl_fakelink" onclick="_d(\'{rotateFunc}\', \'ROTATE270\')" /><img id="{rightID}" src="{rightOff}" title="Rotate Right" class="lhcl_fakelink" onclick="_d(\'{rotateFunc}\', \'ROTATE90\')" />',this.Nd);o(this.Nd.rotateFunc,this.uu.bind(this))}o(this.e.zoomID,ib(this.p,
this.p.Qd));this.dg(false);this.zoom=false;this.ln=m("prev");this.cn=m("next");var e={src:"img/left_normal.gif",id:this.ln,alt:"Previous"},f={src:"img/right_normal.gif",id:this.cn,alt:"Next"},g=N(jk,e),h=N(jk,f);g.style.visibility="hidden";h.style.visibility="hidden";k(this.e.prevboxID).appendChild(g);k(this.e.nextboxID).appendChild(h);o(this.ln,Yb(this,this.yo,-1));o(this.cn,Yb(this,this.yo,1));this.jd(true);this.DF=this.rl.bind(this)}Eb.prototype.r=function(){if(this.g)z(this.g);x(this.e.zoomID);
x(this.ln);x(this.cn);if(this.Nd)x(this.Nd.rotateID);for(var a in this)this[a]=null};Eb.prototype.jd=function(a){var b=a||!this.p.nh();if(this.Nd){var c=k(this.Nd.leftID),d=k(this.Nd.rightID);if(b){c.src=this.Nd.leftOff;d.src=this.Nd.rightOff;qa(c,"lhcl_fakelink");qa(d,"lhcl_fakelink")}else{c.src=this.Nd.leftOn;d.src=this.Nd.rightOn;fa(c,"lhcl_fakelink");fa(d,"lhcl_fakelink")}this.gD=b}};Eb.prototype.Al=function(a,b){var c=k(this.ln),d=k(this.cn);if(a){c.style.visibility="";c.href=location.href;c.hash=
a}else{c.style.visibility="hidden";c.blur()}if(b){d.style.visibility="";d.href=location.href;d.hash=b}else{d.style.visibility="hidden";d.blur()}};Eb.prototype.uc=function(a){this.Kd(this.bb[a])};Eb.prototype.Kd=function(a){this.dg(false);this.n=a;this.Za=this.n.id;var b=a.user?a.user.name:_user.name,c=a.album?a.album.ctitle:"";if(!c&&_album){c=_album.name}var d=["uname="+b,"aname="+c,"iid="+this.Za],e="/lh/emailPhoto?"+d.join("&");k(this.e.emailID).href=e;k(this.e.emailID+"_t").innerHTML=this.n.vsurl?
"Share Video":jh;var f=k(this.e.albumlinkID);if(f){f.href=this.e.albumlink}this.jd(!(!this.n.vsurl))};Eb.prototype.pB=function(a){var b=k(this.e.indextextID);if(b){W(b,a)}};Eb.prototype.dg=function(a,b){var c=k(this.e.zoomID),d=k(this.e.zoomTextID);if(b){a=false;c.src="img/zoom_ghosted.gif";c.title=""}else{c.src=a?"img/zoom_active.gif":"img/zoom_normal.gif";c.title=a?"Zoom out":"Zoom in"}d.style.display=a?"":"none";c.className=b?"":"lhcl_fakelink";this.zoom=a};Eb.prototype.uu=function(a){if(this.gD||
!this.p.cg())return;var b=this.Za,c=_album.id,d=_user.name;if(this.n&&this.n.album&&this.n.user){b=this.n.id;c=this.n.album.id;d=this.n.user.name}var e=["selectedphotos="+b,"optgt="+a,"uname="+d,"aid="+c,"noredir=true"];this.Qf=b;var f=_selectedPhotosPath+"&"+e.join("&");ye(f,Eb.prototype.rl.bind(this),"POST")};Eb.prototype.rl=function(a){if(this.p.db(a)||this.p.xb(a)){this.p.md();return}this.p.ld(this.Qf,true)};Eb.prototype.yo=function(a,b){if(b==0){this.mouseups++}else if(b==1||b==2&&this.mouseups>=
2){this.p.nb(a);this.mouseups=0}};var Ro='<div><table class="lhcl_photonav"><tr><td width="50%"><table width="100%"><tr><td width="100%"><span class="lhcl_albumlink" ><a id="{albumlinkID}" href="{albumlink}">&laquo; '+mh+'</a></span></td><td><div class="lhcl_photoArrowBox" id="{prevboxID}" style="background-image:url(img/left_ghosted.gif)"></div></td></tr></table></td><td><table width="100%" class="lhcl_editbuttons"><tr><td><div class="lhcl_photoArrowBox" id="{nextboxID}" style="background-image:url(img/right_ghosted.gif)"></div></td><td width="100%"></td><td class="lhcl_toolspace"><span id="{toolID}"></span></td><td><span><a class="lhcl_nounderline" id="{emailID}"><div class="lhcl_cbbox lhcl_cbox_disabled"><p class="lhcl_cbdesc"></p><p class="lhcl_cblink"><em><img src="img/share_icon.gif"  /> <span id="{emailID}_t">'+
jh+'</span></em></p></div></a><span></td><td class="lhcl_toolspace"><span><img src="img/zoom_normal.gif" title="Zoom In" class="lhcl_fakelink"id="{zoomID}" onclick="_d(\'{zoomID}\')" /></span></td></tr></table></td></tr></table><div class="lhcl_zoomtext" id="{zoomTextID}" style="display:none">'+Qj+"</div></div>",jk='<a href="" id="{id}" onclick="return false"><img src="{src}" title="{alt}" onmouseup="_d(\'{id}\', 0); return false" onmousedown="_d(\'{id}\', 1); return false" ondblclick="_d(\'{id}\', 2); return false" /></a>',
So='<div><table class="lhcl_photonav"><tr><td width="50%"><table width="100%"><tr><td width="100%"></td><td><div class="lhcl_photoArrowBox" id="{prevboxID}" style="background-image:url(img/left_ghosted.gif)"></div></td></tr></table></td><td><table width="100%" class="lhcl_editbuttons"><tr><td id="{lhui_indexbox}"><span><b id="{indextextID}">'+id+'</b></span></td><td><div class="lhcl_photoArrowBox" id="{nextboxID}" style="background-image:url(img/right_ghosted.gif)"></div></td><td width="100%"></td><td class="lhcl_toolspace"><span id="{toolID}"></span></td><td><span><a class="lhcl_nounderline" id="{emailID}"><div class="lhcl_cbbox lhcl_cbox_disabled"><p class="lhcl_cbdesc"></p><p class="lhcl_cblink"><em><img src="img/share_icon.gif"  /> <span id="{emailID}_t">'+
jh+'</span></em></p></div></a><span></td><td class="lhcl_toolspace"><span><img src="img/zoom_normal.gif" title="Zoom In" class="lhcl_fakelink"id="{zoomID}" onclick="_d(\'{zoomID}\')" /></span></td></tr></table></td></tr></table><div class="lhcl_zoomtext" id="{zoomTextID}" style="display:none">'+Qj+"</div></div>";function eb(a,b,c,d,e){this.p=a;this.bb=c?c:_photo;this.vs=e;this.Og=null;var f={lhui_albumtitle:Pe(_album.title),lhui_indexbox:m("indexbox"),lhui_infobox:m("infobox"),lhui_exifbox:m("exifbox"),lhui_downloadlink:m("download"),lhui_albumlink:m("lhid_viewalbum"),lhui_slideshowlink:m("slideshow"),lhui_togglelink:m("toggle"),lhui_links:m("links")};if(d){f.lhui_slideshow_link_markup=""}else{f.lhui_slideshow_link_markup=V('<a href="#" id="{lhui_slideshowlink}" onclick="_d(\'hideSlideshow\');">Slideshow</a><br />',
f)}var g=this.vs?Qo:Po;if(_features.newStrings){f.flash_str="You need Adobe&reg; Flash&reg; Player 7 or higher to watch videos."}else{f.flash_str=Oj}this.b=N(g,f);b.appendChild(this.b);this.qD=k(f.lhui_indexbox);this.Gy=k(f.lhui_infobox);this.Yp=k(f.lhui_exifbox);this.Np=k(f.lhui_downloadlink);this.Zo=k(f.lhui_albumlink);if(d){this.Ws=null}else{this.Ws=k(f.lhui_slideshowlink)}this.KE=k(f.lhui_togglelink);if(_features.cart&&Q(_updateCartPath)&&(e||_album.prints)){this.hf=q("span");k(f.lhui_links).appendChild(this.hf);
this.cartMsgId=m("cartmsg");var h=N('<div id="{cartMsgId}" class="lhcl_output"></div>',this);k(f.lhui_links).appendChild(h);this.mE=Yb(this,this.Qo,false);this.GC=Yb(this,this.Qo,true);this.PC=this.Bt.bind(this);this.QC=this.Ct.bind(this);var i=vc("_cart1","");if(i.length){var j="/lh/listCart";if(!e){j+="?uname="+_user.name}L.Ga(j,this.QC)}}this.et=f.lhui_togglelink;o(this.et,this.dv.bind(this));this.Os=false;var l=document.getElementById("hdf_profile");if(l){l.innerHTML+='<div id="debug_meta_rss"></div>'}}
eb.prototype.r=function(){if(this.nD)z(this.nD);if(this.b)z(this.b);if(this.et)x(this.et);for(var a in this)this[a]=null};eb.prototype.uc=function(a){this.B=a;var b=this.bb[a];if(!b){return}b.album=b.album||_album;if(!Q(b.B)){b.B=a}this.Kd(b)};eb.prototype.Eq=function(){return(this.jc?this.jc.album:null)||_album};eb.prototype.Nx=function(){return this.jc?this.jc.user:_user};eb.prototype.Mj=function(){return this.b};eb.prototype.Kd=function(a){this.jc=a;if(_photo&&_photo.length){this.qD.innerHTML=
Wj(a.B+1,_photo.length)}this.W(a.e||null);if(a.vsurl){this.Np.innerHTML="";k("lhid_flashMsg").style.display=Ge?"none":""}else{this.Np.href=a.s+"?imgdl=1";W(this.Np,hh);k("lhid_flashMsg").style.display="none"}if(this.Zo&&a.album){W(this.Zo,mh);this.Zo.href=a.album.link}if(this.Ws){this.Ws.href=location.href.replace(/#/,"#s")}if(_features.cart&&this.hf){this.Bl(a,false)}};eb.prototype.W=function(a){if(!a||!a.exif){if(!this.Og){this.Og=N(sh,{})}xc(this.Gy,this.Og);this.Ro(null);return}var b=k("debug_meta_rss");
if(b){b.innerHTML=V('<a href="/lh/rssPhoto?uname={username}&amp;iid={id}&js=1">RSS</a><br />',{username:_user.name,id:a.id})}a.datestring=a.exif.time||a.A;var c=this.Nx();a.username=c?c.name:id;var d=this.Eq();a.albumname=d?d.name:id;a.sizestring=to(a.width+"&times;"+a.height)+" &#8211; "+wo(a.kbytes);this.Gy.innerHTML=V('<div class="lhcl_photoinfo">{datestring}<br />{sizestring}<br /></div>',a);a.exif.title=a.title;{a.exif.latitude=null;a.exif.longitude=null}this.Ro(a.exif)};eb.prototype.Ro=function(a){if(a){if(a.exposure){var b=
parseFloat(a.exposure);if(b&&b<=0.5)a.exposure="1/"+Math.round(1/b)}if(a.focallength){var c=parseFloat(a.focallength);if(c)a.focallength=Math.round(c*10)/10}}var d=[];for(var e=0;e<nj.length;e++){var f=nj[e],g=f[0],h=f[1],i="";if(a){i=a[g];if(!i||i=="0"||i=="0.0"){i="n/a"}else{if(f.length>=3)i=V(f[2],{s:i});i="<em>"+Pe(i)+"</em>"}}d.push(h+": "+i)}var j='<div class="lhcl_exifbox">'+d.join("<br />")+"</div>";te(this.Yp);this.Yp.innerHTML=j};eb.prototype.dv=function(){var a=this.Yp,b=this.KE;if(!(a&&
b))return;if(this.Os){a.className="lhcl_exifoff";b.innerHTML="more info";this.Os=false}else{a.className="lhcl_photoinfo";b.innerHTML="less info";this.Os=true}};eb.prototype.Qo=function(a){this.xv=a;var b=this.jc;this.nE=(this.B=b.index);var c=["uname="+(b.user?b.user.name:_user.name),"iid="+b.id,"noredir=true"];if(!a){c.push("cartop=remove")}var d=vc("_rtok","");c.push("rtok="+d);L.Ga(_updateCartPath,this.PC,c.join("&"))};eb.prototype.Bt=function(a){if(this.p.db(a)){return}var b=false;if(a.text.indexOf("<id>1</id>")>=
0){b=true}else if(this.p.xb(a)){return}this.jc.inCart=this.xv;if(this.nE==this.B){this.Bl(this.jc,true)}var c=k("lhid_cartDiv"),d=k("lhid_cartCount");if(c&&d){c.style.display="";var e=d.innerHTML?parseInt(d.innerHTML,10):0;if(!b){d.innerHTML=this.xv?e+1:e-1}}};eb.prototype.Ct=function(a){if(this.p.db(a)){return}this.dw=eval("("+a.text+")");var b=this.jc?this.jc:this.bb[this.B];if(b){this.Bl(b,false)}};eb.prototype.Sy=function(a){if(Q(a.inCart)){return a.inCart}if(!this.dw){return false}var b=a.user?
a.user.name:_user.name,c=this.dw[b];return c&&re(c,a.id)>=0};eb.prototype.Bl=function(a,b){var c=this.Eq();if(c&&c.prints&&!a.vsurl){u(this.hf,true);if(this.Sy(a)){if(b){k(this.cartMsgId).innerHTML=Oo}else{k(this.cartMsgId).innerHTML=""}this.hf.innerHTML='<img src="img/clearcart.gif"> <span class="lhcl_fakelink">Remove from order</span><br />';this.hf.onclick=this.mE}else{this.hf.innerHTML='<img src="img/order.gif"> <span class="lhcl_fakelink">Order Prints</span>';this.hf.onclick=this.GC;k(this.cartMsgId).innerHTML=
""}}else{u(this.hf,false);k(this.cartMsgId).innerHTML=""}};var nj=[["title","Filename"],["make","Camera"],["model","Model"],["iso","ISO"],["exposure","Exposure","{s} sec"],["fstop","Aperture","f/{s}"],["focallength","Focal Length","{s}mm"]],sh='<div class="lhcl_photoinfo">'+id+"<br />&nbsp;</div>",Oo="<span>"+Tn('<a href="/lh/viewCart" onclick="javascript:_setBackLink()" >',"</a>")+"</span>",Po='<div class="lhcl_toolbox"><div class="lhcl_tools lhcl_hideoverflow"><div id="{lhui_indexbox}">&nbsp;</div><div class="lhcl_albumtitle">{lhui_albumtitle}</div><div id="{lhui_infobox}">'+
sh+'</div><div class="lhcl_exifoff" id="{lhui_exifbox}"></div><div style="text-align:right"><span class="lhcl_toollink lhcl_fakelink" id="{lhui_togglelink}" onclick="_d(\'{lhui_togglelink}\')">more info</span></div><div class="lhcl_pseudo_hr"></div><div id="{lhui_links}"><a href="#" id="{lhui_downloadlink}">'+hh+'</a><br />{lhui_slideshow_link_markup}</div><div id="lhid_flashMsg" class="lhcl_output" style="display:none;"><span>{flash_str}</span><br /><br /><a href="http://www.macromedia.com/go/getflashplayer">'+
gh+"</a></div></div></div>",Qo='<div class="lhcl_toolbox"><div class="lhcl_tools lhcl_hideoverflow"><a class="lhcl_albumtitle" id="lhid_main_albumtitle" href="#"><b>Album: </b><span id="lhid_main_albumtitle_text">{lhui_albumtitle}</span></a><div id="{lhui_infobox}">'+sh+'</div><div class="lhcl_exifoff" id="{lhui_exifbox}"></div><div style="text-align:right"><span class="lhcl_toollink lhcl_fakelink" id="{lhui_togglelink}" onclick="_d(\'{lhui_togglelink}\')">more info</span></div><div class="lhcl_pseudo_hr"></div><div id="{lhui_links}"><a href="#" id="{lhui_downloadlink}" style="display:block;">'+
hh+'</a>{lhui_slideshow_link_markup}<a href="#" id="{lhui_albumlink}" style="display:block;">'+mh+'</a></div><div id="lhid_flashMsg" class="lhcl_output" style="display:none;"><span>'+Oj+'</span><br /><br /><a href="http://www.macromedia.com/go/getflashplayer">'+gh+"</a></div></div></div>";function zc(a,b){this.p=a;var c={lhui_albumFunc:m("SetAlbumCover"),lhui_snippetFunc:m("UpdateSnippet"),lhui_snippetId:m("SnippetPanel"),lhui_snippetCheckBoxId:m("SnippetCheckBox"),lhui_snippetTextBoxId:m("SnippetTextBox"),lhui_deleteFunc:m("DeletePhoto"),lhui_copyFunc:m("CopyPhoto"),lhui_moveFunc:m("MovePhoto"),lhui_outputId:m("output"),lhui_deleteId:m("delete")};this.e=c;c.embed_html=V(Xo,c);this.g=N(Yo,c);b.appendChild(this.g);o(c.lhui_albumFunc,Yb(this,this.zo,"BANNER"));o(c.lhui_snippetFunc,this.Cl.bind(this));
o(c.lhui_deleteFunc,Yb(this,this.zo,"DELETE"));o(c.lhui_copyFunc,this.gu.bind(this));o(c.lhui_moveFunc,this.su.bind(this));this.FC=this.tt.bind(this);this.aj=null;this.Qf=null;this.Ew=k(this.e.lhui_deleteId)}zc.prototype.r=function(){if(this.g)z(this.g);var a=this.e;if(a){x(a.lhui_albumFunc);x(a.lhui_deleteFunc);x(a.lhui_copyFunc);x(a.lhui_moveFunc);x(a.lhui_snippetFunc)}for(var b in this)this[b]=null};zc.prototype.uc=function(a){this.Za=_photo[a].id;this.e.snippet={l:_album.slideshowlink+"#"+this.Za,
a:_album.titleshort,al:_album.link,u:_photo[a].s};if(_photo[a].vsurl){this.Cl(mk)}else{this.Cl(lk)}var b=this.kr;this.kr=!(!_photo[a].vsurl);if(this.kr){this.Ew.innerHTML="Delete this video"}else{this.Ew.innerHTML=Mj}if(this.aj=="DELETE")if(b)this.Wi("Video deleted.");else this.Wi("Photo deleted.");else this.Wi(null);this.aj=null};zc.prototype.Wi=function(a){var b=k(this.e.lhui_outputId);if(!b)return;if(a){b.innerHTML="<span>"+a+"</span>";b.style.display=""}else{b.style.display="none"}};zc.prototype.jd=
function(a){};zc.prototype.zo=function(a){if(!this.p.cg())return;var b=["selectedphotos="+this.Za,"noredir=true","optgt="+a];if(a=="DELETE"){var c;if(_album.blogger){c="Are you sure you want to delete this photo? It will no longer appear in your blog if you delete it."}else{c=this.kr?"Are you sure you want to delete this video?":"Are you sure you want to delete this photo?"}if(!confirm(c)){this.p.md();return}}this.aj=a;this.Qf=this.Za;var d=_selectedPhotosPath+"&uname="+_user.name+"&aid="+_album.id;
L.Ga(d,this.FC,b.join("&"))};zc.prototype.tt=function(a){if(this.p.db(a)||this.p.xb(a)){this.p.md();return}if(this.aj=="DELETE"){this.p.Nt(this.Qf)}else if(this.aj=="BANNER"){this.p.md();this.Wi("Album cover set.")}};zc.prototype.Cl=function(a){var b=k("lhid_embed");if(a==mk){u(b,false)}else{u(b,true);var c=k(this.e.lhui_snippetId),d;if(a==Zo){d=true}else if(a==lk){d=false}else{d=c.style.display=="none"}u(c,d);k("lhid_zippy").src=d?"img/opentriangle.gif":"img/triangle.gif";var e=k(this.e.lhui_snippetCheckBoxId),
f=this.e.snippet.u;b.className=d?"lhcl_embed_on":"lhcl_embed";if(d){k("lhid_link").value=this.e.snippet.l;var g="/s"+k("lhid_sizeSelect").value+"/$1";this.e.snippet.s=f.replace(/\/([^\/]*)$/,g);var h=e.checked?'<table style="width:auto;"><tr><td><a href="{l}"><img src="{s}" /></a></td></tr><tr><tr><td style="font-family:arial,sans-serif; font-size:11px; text-align:right">From <a href="{al}">{a}</a></td></tr></table>':'<a href="{l}"><img src="{s}" /></a>',i=V(h,this.e.snippet);k(this.e.lhui_snippetTextBoxId).value=
i}else{e.checked=false}}};zc.prototype.gu=function(){gb("hideVideo");LH_copyDialog([this.Za])};zc.prototype.su=function(){if(!_album.blogger||confirm("Are you sure you want to move this photo? It will no longer appear in your blog if you move it.")){gb("hideVideo");LH_moveDialog([this.Za])}};var Zo=1,lk=-1,mk=-2,Yo='<div class="lhcl_toolbox"><div class="lhcl_tools"><a href="javascript:_d(\'{lhui_albumFunc}\')">Set as album cover</a><br /><a href="javascript:_d(\'{lhui_copyFunc}\')">Copy to another album</a><br /><a href="javascript:_d(\'{lhui_moveFunc}\')">Move to another album</a><br /><div class="lhcl_pseudo_hr"></div>{embed_html}<a id="{lhui_deleteId}" href="javascript:_d(\'{lhui_deleteFunc}\')">'+
Mj+'</a><div id="{lhui_outputId}" class="lhcl_output"></div></div>',Xo='<ul class="lhcl_albumcontrols"><li style="padding-top:0.2em;width:216px"><div id="lhid_embed" class="lhcl_embed"><span class="lhcl_fakelink" onclick="_d(\'{lhui_snippetFunc}\')">Link to this Photo</span> <img src="img/triangle.gif" class="hand" id="lhid_zippy" onclick="_d(\'{lhui_snippetFunc}\')"><div id="{lhui_snippetId}" class="lhcl_embedlinks" style="display:none;"><div id="lhid_snippetinfo" style="margin-top:0.2em;">'+mo("<b>",
"</b>")+'<br/><input class="lhcl_embedtextbox" onclick="this.select()" id="lhid_link"></div><div class="lhcl_pseudo_hr_embed"></div><div style="margin-top: 0.4em;">'+lo("<b>","</b>")+'<input class="lhcl_embedtextbox" onclick="this.select()" type="text" id="{lhui_snippetTextBoxId}" /></div><div style="white-space:nowrap;">Select size<select id="lhid_sizeSelect" onchange="_d(\'{lhui_snippetFunc}\', 1)"><option value="144">Thumbnail '+Nc(144)+'</option><option value="288">Small '+Nc(288)+'</option><option value="400">Medium '+
Nc(400)+'</option><option value="800">Large '+Nc(800)+'</option></select></div><div style="margin-top:0.3em">Show link to album <input id="{lhui_snippetCheckBoxId}" type="checkbox" style="margin:0;" onclick="_d(\'{lhui_snippetFunc}\', 1)"/></div></div></div></li></ul>';function db(a,b,c){this.p=a;this.n=null;this.qb=q("div");b.appendChild(this.qb);this.lf=q("div");b.appendChild(this.lf);this.hw=m("comment");this.Hl=m("addcommentbox");this.pC=m("unauthcommentbox");this.dq=m("addcomment");this.Lg=N(No,{lhui_commentbox:this.hw,lhui_addcommentbox:this.Hl,lhui_unauthcommentbox:this.pC,signInStr:ik(_authuser),lhui_focuscomment:this.dq});c.appendChild(this.Lg);this.Lg.style.display="none";o(this.dq,this.Ut.bind(this));this.iE=this.Cu.bind(this);this.fD=this.Mt.bind(this);
this.nt=m("viewAll");o(this.nt,this.iv.bind(this));this.Hp=m("deleteCommentFunc");o(this.Hp,this.Lt.bind(this));this.fq=m("focusFunc");o(this.fq,this.Vt.bind(this));this.ip=_authuser.user}db.prototype.r=function(){this.Be();if(this.qb)z(this.qb);if(this.lf)z(this.lf);if(this.Lg)z(this.Lg);x(this.dq);x(this.nt);x(this.Hp);x(this.fq);for(var a in this)this[a]=null};db.prototype.Be=function(){this.qb.innerHTML="&nbsp;";this.lf.innerHTML="";if(this.bh){L.fo(this.bh);this.bh=0}if(this.Cj)x(this.Cj);if(this.Uk)x(this.Uk)};
db.prototype.Bx=function(){return this.Lg};db.prototype.So=function(a){this.n=a;this.W(a.e)};db.prototype.W=function(a){this.Za=a.id;var b=a.comment;this.qb.innerHTML="&nbsp;";if(b.length>0){var c=['<table class="lhcl_comments">'],d=this.n?this.n.user:null,e=_authuser.name,f=d?d.name==e:_authuser.isOwner;for(var g=0;g<b.length;++g){var h=b[g];h.lhui_date=h.timestamp;h.lhcl_ownerclass=_authuser.name==h.username?"lhcl_ownercomment":"";var i=wl(h.comment);i=i.replace(/\n\n+/g,"\n\n").replace(/\n/g,"<br />");
h.lhui_comment=Pe(xk(i));if(h.link){h.lhui_linkstart='<a href="'+h.link+'">';h.lhui_linkend="</a>"}if(f||e==h.username){h.lhui_deletelink=V('<span class="lhcl_fakelink" tabindex="0" onclick="_d(\'{lhui_func}\', \'{lhui_commentId}\')">delete</span>',{lhui_commentId:h.id,lhui_func:this.Hp})}c.push(V('<tr class="{lhcl_ownerclass}" ><td rowspan="2" class="lhcl_commentimg">{lhui_linkstart}<img src="{portrait}" />{lhui_linkend}</td><th width="100%">{lhui_linkstart}{nickname}{lhui_linkend}</th><th>{lhui_date}</th><th>{lhui_deletelink}</th></tr><tr><td colspan="3" class="lhcl_commenttext">{lhui_comment}</td></tr>',
h))}c.push("</table>");this.qb.innerHTML=c.join("")}var j=k(this.hw);if(b.length){var h=b[b.length-1];h.lhui_date=h.timestamp;h.lhui_viewallbox=m("viewall");xc(j,N('<div class="lhcl_lastcomment"><table><tr><td width="100%"><b>Latest comment</b></td><td id="{lhui_viewallbox}"></td></tr></table><div class="lhcl_pseudo_hr"></div><div>&#8220;{lhui_comment}&#8221;</div><div class="lhcl_commentauthor">{nickname} &#8211; {lhui_date}</div><div class="lhcl_pseudo_hr"></div></div>',h));j.style.display="";if(b.length>
1){var l=k(h.lhui_viewallbox);if(l){l.appendChild(N('<a class="lhcl_toollink" href="javascript:_d(\'{lhui_viewallfunc}\')">view all</a>',{lhui_viewallfunc:this.nt}))}}}else{j.innerHTML="";j.style.display="none"}this.Lg.style.display="";k(this.Hl).style.display=this.ip?"":"none";k(this.pC).style.display=this.ip?"none":"";this.du(b.length)};db.prototype.du=function(a){te(this.lf);if(!this.ip){this.signInBoxId=m("signInBox");var b=V(Mo,{lhui_signInBoxId:this.signInBoxId,signInStr:ik(_authuser)})}else{if(this.aF||
a>=100){k(this.Hl).style.display="none";this.lf.innerHTML="Commenting is closed for this photo.";return}else{k(this.Hl).style.display=""}this.Cj=m("commentForm");this.$k=m("commentText");this.Uk=m("commentLength");this.DE=m("submitButton");var b=V('<form class="lhcl_commentform" id="{lhui_formId}" action="javascript:_d(\'{lhui_formId}\')"><div class="lhcl_title">Add a comment</div><textarea id="{lhui_id}" onfocus="_d(\'{lhui_focusFunc}\', this)" onkeydown="_d(\'{lhui_sizeId}\', this)" onkeyup="_d(\'{lhui_sizeId}\', this)"></textarea><table><tr><td width="100%"><div id="{lhui_sizeId}">&nbsp;</div></td><td><input type="submit" id="{lhui_submitId}" value="Post Comment"  /></td></tr></table></form>',
{lhui_formId:this.Cj,lhui_id:this.$k,lhui_sizeId:this.Uk,lhui_submitId:this.DE,lhui_focusFunc:this.fq})}this.lf.innerHTML=b;this.Ow=false;o(this.Cj,this.Bu.bind(this));o(this.Uk,this.Pu.bind(this))};db.prototype.Bu=function(){var a=k(this.Cj),b=k(this.$k);if(!(b&&a))return;var c=Wc(b.value);if(!c){alert("Please enter a comment first.");return}if(c.length>512){alert("Your comment seems to be a bit long. Please, do try to be more efficient with your words.");return}var d=["uname="+(this.n?this.n.user.name:
_user.name),"aname="+(this.n?this.n.album.name:_album.name),"iid="+this.Za,"AddComment="+Xc(c),"noredir=true"];for(var e=0;e<a.elements.length;e++){var f=a.elements[e];f.disabled=true;f.blur()}this.Qf=this.Za;this.TC=c;L.Ga(_addCommentPath,this.iE,d.join("&"))};db.prototype.Cu=function(a){if(this.p.db(a)||this.p.xb(a)){var b=k(this.$k);if(b)b.value=this.TC;return}this.p.ld(this.Qf,true)};db.prototype.Lt=function(a){if(!confirm("Are you sure you want to delete this comment?"))return;var b=["uname="+
(this.n?this.n.user.name:_user.name),"mode=delete","cid_"+a+"=on","iid="+this.Za,"noredir=true"];this.Qf=this.Za;L.Ga(_selectedCommentsPath,this.fD,b.join("&"))};db.prototype.Mt=function(a){this.p.ld(this.Qf,true)};db.prototype.Pu=function(a){var b=k(this.Uk);if(!(b&&a))return;if(a.value.length>480){var c=a.value.length,d=q("span"),e=Pk(ao(c,512));d.appendChild(e);if(c>512)d.style.color="red";xc(b,d)}else{b.innerHTML=""}};db.prototype.iv=function(){window.scrollTo(0,mg(this.qb)-50)};db.prototype.Ut=
function(){window.scrollTo(0,mg(this.lf)-50);if(this.$k){var a=k(this.$k);if(a&&!a.disabled)a.focus()}};db.prototype.Vt=function(a){if(this.Ow)return;a.value="";a.style.color="#000";this.Ow=true};var ik=function(a){var b=new F(Va(_loginUrl));b.ya("continue",location.href);var c=new F(Va(_activateUrl)),d=new F(c.sb("continue"));d.ya("continue",location.href);c.ya("continue",d.toString());if(_features.newStrings){if(typeof a.user=="undefined"&&typeof a.isLoggedIn!="undefined"){return Qn('<a href="'+
c.toString()+'">',"</a>")}else{return Fo('<a href="'+b.toString()+'">','<a href="'+c.toString()+'">',"</a>")}}else{return Eo('<a href="'+b.toString()+'">','<a href="'+c.toString()+'">',"</a>")}},No='<div class="lhcl_toolbox"><div class="lhcl_tools"><div id="{lhui_commentbox}"></div><div id="{lhui_addcommentbox}"><a href="javascript:_d(\'{lhui_focuscomment}\')">'+eh+'</a></div><div id="{lhui_unauthcommentbox}"><b>'+eh+"</b><div>{signInStr}</div></div></div></div>",Mo='<div id="{lhui_signInBoxId}" class="lhcl_toolbox lhcl_photoCommentSignIn"><div class="lhcl_tools"><b>'+
eh+"</b><div>{signInStr}</div></div></div>";function oc(a,b,c){this.p=a;this.Ha=q("div");this.Ha.className="lhcl_caption";b.appendChild(this.Ha);this.zh=q("div");c.appendChild(this.zh);this.Rp=m("edit_caption");o(this.Rp,this.Ou.bind(this))}oc.prototype.r=function(){x(this.Rp);if(this.zh)z(this.zh);if(this.Ha)z(this.Ha);for(var a in this)this[a]=null};oc.prototype.Be=function(){this.Ha.innerHTML="&nbsp;";this.zh.innerHTML="";if(this.Xa&&this.Xa.id){x(this.Xa.id);x(this.Xa.cancelID);x(this.Xa.sizeID)}};oc.prototype.uc=function(a){this.Za=a.id;
var b=a.c||"",c=Pe(xk(b));c=c.replace(/  /g,"&nbsp; ").replace(/\n/g,"<br />");var d={caption:c},e=false;if(!a.user){e=_authuser.isOwner}if(e){d.id=this.Rp;d.text=b?"edit":"Add a Caption";d.addtext=V('&nbsp;<span id="{id}" class="lhcl_fakelink" onclick="_d(\'{id}\')">{text}</span>',d);this.Xa={caption:b}}this.Be();this.Ha.innerHTML=V("<b>{caption}</b>{addtext}",d);this.Ha.style.display=""};oc.prototype.Ou=function(){this.Ha.style.display="none";this.Xa={caption:this.Xa.caption,id:m("lhid_capform"),
saveID:m("lhid_capsave"),sizeID:m("lhid_capsize"),cancelID:m("lhid_capcancel")};this.zh.appendChild(N('<div class="lhcl_captionform"><div id="{sizeID}" style="color:#999"></div><textarea name="description" id="{id}" rows="0" comments="0" onkeydown="_d(\'{sizeID}\')" onkeyup="_d(\'{sizeID}\')">{caption}</textarea><div><input type="button" value="Save Caption"class="lhcl_default" id="{saveID}" onclick="_d(\'{id}\')" /><input type="button" value="Cancel" id="{cancelID}" onclick="_d(\'{cancelID}\')"/></div></div>',
this.Xa));this.Ko();o(this.Xa.id,this.Du.bind(this));o(this.Xa.cancelID,this.io.bind(this));o(this.Xa.sizeID,this.Ko.bind(this));var a=k(this.Xa.id);a.focus();cq(a,a.value.length)};oc.prototype.io=function(){this.Ha.style.display="";this.zh.innerHTML=""};oc.prototype.Ko=function(a){var b=k(this.Xa.sizeID),c=k(this.Xa.id),d=k(this.Xa.saveID);if(!(b&&c&&d))return;if(c.value.length>992){var e=c.value.length,f=1024,g=q("span");g.appendChild(Pk(Zn(e,f)));if(e>f){g.style.color="red"}xc(b,g)}else{b.innerHTML=
""}};oc.prototype.Du=function(){var a=k(this.Xa.id);if(!a)return;var b=Wc(a.value);if(b==this.Xa.caption){this.io();return}if(b.length>1024){alert(Kj);return}var c=["description="+Xc(b),"noredir=true"];k(this.Xa.saveID).disabled=true;k(this.Xa.cancelID).disabled=true;var d=this.Za,e=Yb(this,this.At,d,b),f=_updatePhotoPath+"&uname="+_user.name+"&aname="+_album.name+"&iid="+d;L.Ga(f,e,c.join("&"))};oc.prototype.At=function(a,b,c){if(!this.p)return;if(this.p.db(c)||this.p.xb(c)){k(this.Xa.saveID).disabled=
false;k(this.Xa.cancelID).disabled=false;return}this.p.Rd(a,ga(b))};function Yg(){K.Sa(this);o("ClearCart",this.Ft.bind(this))}Yg.prototype.r=function(){K.Ta(this);x("ClearCart")};Yg.prototype.Ft=function(){if(confirm("Are you sure you want to clear your order?")){var a=k("lhid_clearform"),b=new F(_updateCartPath);b.ya("cartop","clear");b.ya("rtok",vc("_rtok",""));a.action=b.toString();a.submit()}};function Nr(a,b,c){var d="uname="+a+"&iid="+c+"&cartop=remove&noredir=true",e=vc("_rtok","");d+="&rtok="+e;L.Ga(_updateCartPath,null,d);var f=k("lhid_cart_"+c);if(f)z(f);
cartPhotoCount--;k("lhid_cartcount").innerHTML=cartPhotoCount;cartAlbumCount[b]--;if(cartAlbumCount[b]<=0){var g=k("lhid_cartalbum_"+b);if(g)z(g)}if(cartPhotoCount<=0){k("lhid_emptycart").style.display="";k("lhid_instructions3_photos").style.display="";k("lhid_nonemptycart").style.display="none";k("lhid_instructions3_none").style.display="none";k("lhid_instructions3").style.display="none";k("lhid_instructions").className="lhcl_cartinstructions lhcl_instep1"}}function Xr(a){var b=vc("printProvider");
if(!b){return true}Gc(ah,"1");var c="/lh/sendToProvider?provider="+b;if(a){window.open(c,"selectProviderWnd");var d='<a href="javascript:void(0)" onclick="return window._sendToProvider(false);">';k("msg").innerHTML=ro(d,"</a>");k("lhid_feedback").style.display=""}else{window.location=c}return false}function En(a,b){var c=k("lhid_orderform"),d=vc("_rtok",""),e=new F(c.action);e.ya("rtok",d);e.ya("uname",a);e.ya("aid",b);c.action=e.toString();c.submit()}function Bn(){if(Le){return}Le=true;L.Ga("/lh/selectProvider",
An)}function An(a){if(a.status==200&&a.text.length==0){alert("We're sorry.  Picasa Web Albums does not currently work with any photo processing providers that ship to your country.");Le=false;return}else if(a.status>=400||a.text.length==0){alert("Failed to retrieve list of Print Providers.  Please try again later.");Le=false;return}gb("hideVideo");new Id(a.text)}function Id(a){K.Sa(this);var b={lhui_ok_func:m("func"),lhui_cancel_func:m("func")};this.e=b;this.Ua=q("div");this.Ua.className="lhcl_cover";
document.body.appendChild(this.Ua);this.Wa();this.nc=this.Wa.bind(this);Qa(window,"resize",this.nc);window.scrollTo(0,0);Be();this.g=N('<div class="lhcl_dialog" style="width:400px; top:100px"><div class="lhcl_dialog_body"><form id="lhid_chooseProviderForm"><div class="lhcl_selectProviderTitle">Please select a print provider from the list below:</div><div style="padding:0 25px 15px 0;">'+a+'</div><table style="width:100%"><tr><td style="width:50%; text-align:right;"><input type="button" value="Cancel" onclick="_d(\'{lhui_cancel_func}\')"/></td><td><input id="lhid_accept_provider" type="button" value="OK" onclick="_d(\'{lhui_ok_func}\')"/></td></tr></table></form></div></div>',
this.e);document.body.insertBefore(this.g,document.body.firstChild);var c=vc("printProvider");if(!c){document.getElementById("lhid_accept_provider").disabled=true}o(this.e.lhui_ok_func,this.st.bind(this));o(this.e.lhui_cancel_func,this.ho.bind(this));this.Gd=ib(this,this.ia);Qa(document,"keydown",this.Gd)}Id.prototype.ia=function(a){if(a.keyCode==27){this.ho()}};Id.prototype.r=function(){K.Ta(this);if(this.e){x(this.e.lhui_ok_func);x(this.e.lhui_cancel_func)}Xa(document,"keydown",this.Gd);Xa(window,
"resize",this.nc);Le=false;for(var a in this)this[a]=null};Id.prototype.ma=function(){z(this.g);z(this.Ua);gb("restoreVideo");this.r()};Id.prototype.Wa=function(){var a=Math.max(document.body.offsetHeight,document.body.scrollHeight);a=Math.max(a,document.body.clientHeight);a=Math.max(a,document.documentElement.clientHeight);this.Ua.style.height=a+"px"};Id.prototype.ho=function(){this.ma()};function Ti(a){Gc("printProvider",a,2592000);var b=q("img");b.width=150;b.height=50;b.src="/lh/providerLogo/"+
a;var c=k("lhid_currentprovider");xc(c,b);k("lhid_hasprovider").style.display="";k("lhid_noprovider").style.display="none";c=k("lhid_instructions3");if(c){k("lhid_instructions3_none").style.display="none";if(cartPhotoCount>0){c.style.display="";k("lhid_instructions").className="lhcl_cartinstructions lhcl_instep3"}}}Id.prototype.st=function(){var a=k("lhid_chooseProviderForm").provider;if(typeof a.length=="undefined"){Ti(a.value)}else{for(var b=0;b<a.length;b++){if(a[b].checked){Ti(a[b].value);break}}}this.ma()};
function me(){var a=0,b="";for(var c=1;c<=4;c++){var d=vc("_cart"+c);if(d){b+=d}}var e=b.split("@");if(e.length>=2){var f=e[1].match(/\:/g);if(f){a=f.length}}if(a>0){k("lhid_cartDiv").style.display="";k("lhid_cartCount").innerHTML=a}}var Le=false,ah="_lh_cartRedirect";function v(a){K.Sa(this);this.n=_photo;this.Ll=_album;var b=k("lhid_main"),c=k("lhid_tools");this.lk=k("lhid_login");this.Tk=k("lhid_signup");this.Ja=new Eb(this,b);this.ka=q("div");this.ka.className="lhcl_photobox";b.appendChild(this.ka);this.g=q("div");this.ka.appendChild(this.g);this.ga=new eb(this,c);this.Ha=new oc(this,this.ka,b);this.De=_authuser;if(this.De.isOwner){this.Xf=new zc(this,c)}else{var d=q("div");d.className="lhcl_toolbox";c.appendChild(d);var e=q("div");e.className="lhcl_tools";
d.appendChild(e);this.de=new mc(e);this.tf=d}this.qb=new db(this,b,c);this.Fa=null;if(_features.tags){this.Fa=new Ha(this,c)}var f=new Ba(this,this.g,this.n);f.hd=this.xu.bind(this);f.onload=this.rh.bind(this);f.Pc=this.Ui.bind(this);f.onstopped=this.yu.bind(this);f.onresize=this.Wa.bind(this);this.N=f;this.Vy=ib(this,this.ia);this.Wy=ib(this,this.yb);this.Pv=this.ob.bind(this);Qa(document,"keydown",this.Vy);Qa(document,"keyup",this.Wy);Qa(window,"blur",this.Pv);this.ub=new qb(this.Hb.bind(this));
this.Nc=false;this.zc=0;this.cD=this.It.bind(this);this.B=-1;this.Ue=zh(this.n,"id");this.gz={};this.W(a);o("hideSlideshow",this.Pd.bind(this));o("hideVideo",this.qh.bind(this));o("restoreVideo",this.uh.bind(this))}v.prototype.r=function(){K.Ta(this);if(this.fc)window.clearTimeout(this.fc);x("hideSlideshow");x("hideVideo");x("restoreVideo");if(this.ga)this.ga.r();if(this.Xf)this.Xf.r();if(this.Ha)this.Ha.r();if(this.qb)this.qb.r();if(this.Ja)this.Ja.r();if(this.N)this.N.r();if(this.Fa)this.Fa.r();
if(this.g)z(this.g);if(this.ka)z(this.ka);if(this.de)this.de.ma();if(this.tf)z(this.tf);Xa(document,"keydown",this.Vy);Xa(document,"keyup",this.Wy);Xa(window,"blur",this.Pv);for(var a in this)this[a]=null};v.prototype.ma=function(){Be();this.ub.reset();if(this.bh)L.fo(this.bh);this.r()};v.prototype.W=function(a){var b=a[1],c=this.Ue[b];if(c==undefined){location.replace(location.href.replace(/#.*/,"#unknown-"+b));return}this.B=c;this.title=" - "+this.n[c].t;var d=this.n,e=c>0?d[c-1].id:null,f=c<d.length-
1?d[c+1].id:null;this.Ja.Al(e,f);if(this.de)this.de.Xi(_user.name,_album.id,b,!(!this.n[c].vsurl));this.ga.uc(c);if(this.Fa)this.Fa.Be();this.N.ph(c);if(this.lk){this.lk.href=this.lk.href.replace(/photo(%23\d+)?/,"photo%23"+b)}if(this.Tk){this.Tk.href=this.Tk.href.replace(/photo(%23\d+)?/,"photo%23"+b)}};v.prototype.nb=function(a,b){var c=this.B+a,d=this.n.length;if(b){while(c<0)c+=d;c%=d}if(c<0||c>=d)return false;location=location.href.replace(/#.*/,"#"+this.n[c].id);return true};v.prototype.sc=
function(){this.nb(1)};v.prototype.tc=function(){this.nb(-1)};v.prototype.oh=function(){location=_album.link};v.prototype.Wc=function(a){return Pd()-mg(this.ka.firstChild)-50};v.prototype.Ui=function(){};v.prototype.xu=function(){var a=this.N.kd();this.md();this.Ja.uc(a);this.Ha.uc(this.n[a]);if(this.Xf)this.Xf.uc(a);this.rc();if(this.Nc)this.nb(this.$g)};v.prototype.rh=function(){};v.prototype.yu=function(){this.ld(this.n[this.N.kd()].id)};v.prototype.Wa=function(){this.rc()};v.prototype.rc=function(){var a=
this.N.Gj();if(!a||a.Ma()||a.Bq()>=1){this.Ja.dg(false,true);if(a)a.sh(false)}else{this.Ja.dg(a.getZoom(),false)}};v.prototype.ld=function(a,b){var c=this.Ue[a],d=this.n[c],e=(new Date).getTime(),f=this.gz[a];if(!b&&f&&e-f<60000)e=f;this.gz[a]=e;var g="/lh/rssPhoto?uname="+_user.name+"&iid="+d.id+"&v="+e+"&js=1";this.bh=L.Ga(g,this.cD)};v.prototype.Nt=function(a){var b=this.N.kd(),c=this.Ue[a];this.n.splice(c,1);this.Ue=zh(this.n,"id");this.N.lp();Be(true);if(b==c){if(this.n.length==0){location.replace(_album.link)}else if(this.n.length==
c){location.replace(location.href.replace(/#.*$/,"#"+this.n[c-1].id))}else{location.replace(location.href.replace(/#.*$/,"#"+this.n[c].id))}}else{var d=this.n[b].id;location.replace(location.href.replace(/#.*$/,"#"+d));this.W(["",d])}};v.prototype.It=function(a){if(this.db(a)){this.md();return}var b=L.no(a);if(!b){alert(fh);location.replace(_album.link);return}var c=this.Ue[b.id];if(c<0)return;var d=this.N.kd(),e=this.n[c];if(e.v!=b.version){e.v=b.version;e.w=parseInt(b.width,10);e.h=parseInt(b.height,
10);e.s=b.imgsrc;if(c==d){this.N.ql()}return}if(c==d){this.ga.W(b);if(this.Fa)this.Fa.W(b.tags,b.id);this.qb.W(b)}};v.prototype.Qd=function(){var a=this.N.Gj(),b=a.Bq(),c=a.getZoom();if(c){this.Ja.dg(false);a.sh(false)}else if(!a.Ma()&&b<1){this.Ja.dg(true);a.sh(true)}};v.prototype.Rd=function(a,b){var c=this.Ue[a],d=this.n[c];if(!d)return;d.c=b;this.Ha.uc(d)};v.prototype.cg=function(){if(this.nC)return false;this.nC=true;this.Ja.jd(true);if(this.Xf)this.Xf.jd(true);return true};v.prototype.md=function(){this.nC=
false;this.Ja.jd(false);if(this.Xf)this.Xf.jd(false)};v.prototype.db=function(a){var b=a.status;if(b>=400){var c;if(b==403){c=Pj}else if(b==404){c=Rj}else if(b>=500){c=Zj+"\n"+Of(b)}else{c=bk+"\n"+Of(b)}alert(c);return true}return false};v.prototype.xb=function(a){var b=a.text;if(a.target&&a.target.vf){b=a.target.vf()}if(b.indexOf("success")<0){var c=b.replace(/\<[^>]*\>/g,"");alert(c);return true}return false};v.prototype.ia=function(a){if(a.altKey||a.metaKey||a.ctrlKey)return;var b=a.target.nodeName.toLowerCase();
if(b=="textarea"||b=="input"||b=="select")return;switch(a.keyCode){case 27:this.oh();Ad(a);break;case 37:if(this.zc!=37){this.tc();this.gc(-1)}this.zc=37;Ad(a);break;case 39:if(this.zc!=39){this.sc();this.gc(1)}this.zc=39;Ad(a);break}};v.prototype.yb=function(a){if(a.keyCode==37||a.keyCode==39){this.ob()}};v.prototype.gc=function(a){this.ob();this.$g=a;if(a!=0)this.ub.J(400)};v.prototype.ob=function(){this.ub.reset();this.Nc=false;this.zc=0};v.prototype.Hb=function(){this.Nc=true;this.nb(this.$g)};
v.prototype.Ma=function(){if(!this.N)return false;var a=this.N.Gj();if(!a)return false;return a.Ma()};v.prototype.nh=function(){if(this.Ma())return false;var a=this.N.kd();if(this.n[a].br)return false;return true};v.prototype.Pd=function(){if(this.N.I)this.N.I.ef()};v.prototype.qh=function(){if(this.Ma()&&this.N.I&&this.N.I.ud){this.N.I.ud.style.visibility="hidden"}};v.prototype.uh=function(){if(this.Ma()&&this.N.I&&this.N.I.ud){this.N.I.ud.style.visibility=""}};var vg=function(a,b){this.p=a;this.lj=b;this.b=q("td");Ya(this.b,"lhcl_searchtab");this.dt=q("div");C(this.b,this.dt);this.Wm=q("span");W(this.Wm,this.lj.name);C(this.dt,this.Wm);n(this.Wm,na,this.bj.bind(this));this.qg=q("span");C(this.dt,this.qg);this.Hi=q("td");Ya(this.Hi,"lhcl_nav_border");this.Hi.setAttribute("width","9");this.Hi.innerHTML='<img src="img/spacer.gif" width="9" height="1" />';u(this.Hi,false);C(this.p,this.b);C(this.p,this.Hi);this.WD=-1;this.hE=-1;var c=b.gb;if(c.isLoaded()){this.Wn()}else{this.WD=
c.addEventListener("nophotos",this.Wn.bind(this));this.hE=c.addEventListener(Sf,this.Wn.bind(this))}};vg.prototype.Wn=function(){var a=this.lj.gb;if(a.isLoaded()){var b=a.totalPhotos;W(this.qg," ("+b+")")}};vg.prototype.Li=function(){var a=Pl(),b=a.Ia==this.lj.search_corpus,c,d="";if(b){c="lhcl_searchtab_on"}else{d="lhcl_fakelink";c="lhcl_searchtab"}u(this.Hi,b);Ya(this.Wm,d);Ya(this.b,c);var e=a.Kg()||b;u(this.b,e)};vg.prototype.bj=function(){var a=tg,b=a.Ia==this.lj.search_corpus;if(b){return}a.ec(this.lj.search_corpus)};function Ld(a,b,c){this.U=null;this.bl=144;this.ZC=64;this.vw=false;this.nF=0;this.e=null;if(a&&b){var d=b.author[0].email.$t,e=b.author[0].name.$t;this.s=b.media$group.media$content[0].url;this.id=b.gphoto$id.$t;this.w=Number(b.gphoto$width.$t);this.h=Number(b.gphoto$height.$t);this.c=ga(b.media$group.media$description.$t);this.t=ga(b.title.$t);this.snippet=b.gphoto$snippet.$t;this.snippetType=b.gphoto$snippettype.$t;this.user=a.Nq(d,e);this.truncated=b.gphoto$truncated.$t=="1";this.album=a.fx(d,
b.gphoto$albumid.$t,b.gphoto$albumtitle.$t,b.gphoto$albumctitle.$t,b.gphoto$allowprints.$t);this.Ii()}this.B=c}Ld.D(O);var kd="photoDataReady";Ld.prototype.Bd=function(){if(this.e){this.dispatchEvent(kd)}else{var a="/lh/rssPhoto?uname="+this.user.name+"&iid="+this.id+"&v="+ya()+"&js=1";ye(a,this.yw.bind(this))}};Ld.prototype.wC=function(){if(!this.xC){this.xC=this.id+"@"+this.user.name}return this.xC};Ld.prototype.yw=function(a){if(this.e){return}var b=a.target;try{this.e=b.ym();if(this.e.video){this.vsurl=
this.e.video.streamer_url;this.vdurl=this.e.video.download_url}}catch(a){return}this.dispatchEvent({type:kd})};Ld.prototype.Ii=function(){if(!this.U){var a=1;if(this.h&&this.w){a=this.w/this.h}var b=0,c=0,d=this.bl;if(this.vw){d=this.ZC;b=d;c=d}else{if(a<1){b=Math.max(Math.floor(this.bl*a),1);c=this.bl}else{b=this.bl;c=Math.max(Math.floor(this.bl/a),1)}}this.U={url:this.s+"?imgmax="+d+(this.vw?"&crop=1":""),width:b,height:c};(new Image).src=this.U.url}return this.U};function Vi(a,b,c,d,e){this.username=a;this.id=b;this.title=c;this.ctitle=d;this.link="/lh/sredir?uname="+this.username+"&target=ALBUM&id="+this.id;this.prints="1"==e};function oe(a,b){this.name=a;this.nickname=b;this.icon="img/noportrait.jpg";this.galleryName=Pf(this.nickname);this.loaded=false}oe.D(O);var uh="userDataReady";oe.prototype.Bd=function(){var a="/data/feed/base/user/"+this.name+"?alt=json";ye(a,oe.prototype.Sq.bind(this))};oe.prototype.Sq=function(a){var b=a.target,c=b.ym();if(c){this.loaded=
true;var d=c.feed.icon.$t;this.icon=d?d:this.icon;this.galleryName=c.feed.title.$t;this.dispatchEvent({type:uh})}};function ea(a){this.HC=a;this.va=24;this.Ee=true;this.jl=null;this.ff=null;this.dr=null;this.Sb="";this.ei=null;this.Ia="G";this.totalPhotos=null;this.crowdedLength=0;this.LA()}var gk;ea.D(O);var Sf="itemsadded",rh="too_many_results_requested",qh="query_string_too_long";ea.prototype.LA=function(){this.Sb="";this.Ia="G";this.reset()};ea.prototype.reset=function(){this.totalPhotos=null;
this.crowdedLength=0;this.jl={};this.ff={};this.dr={};this.bb=[];this.gE=[];this.Ng=new Array(Math.ceil(1000/this.va))};ea.prototype.Is=function(a,b){if(this.Sb!=a){this.reset();this.Sb=a}if(Q(b)){this.Ee=b}};ea.prototype.As=function(a){if(this.Ia!=a){this.reset();this.Ia=a||"G";this.Ee=this.Ia=="G"}};ea.prototype.nB=function(a){this.ei=a};ea.prototype.Bs=function(a){if(this.Ee!=a){this.reset();this.Ee=a}};ea.prototype.fh=function(a){this.wF=true;this.va=a};ea.prototype.Sl=function(a){return Math.floor(a/
this.va)};ea.prototype.xd=function(a){var b=this.Sl(a),c=true;if(!this.Ng[b]){this.Ym(b);c=false}var d=a/this.va,e=d-b;if(e<0.1){b=Math.max(0,b-1)}if(e>0.9){b=Math.min(this.Ng.length-1,b+1)}if(!this.Ng[b]){Se(this.Ym.bind(this,b))}return c};ea.prototype.Ym=function(a){this.Ng[a]=true;var b=a*this.va+1;if(b>1000){return}var c=Math.min(this.va,1000-b+1);if(c<=0){return}var d=["q="+Xc(this.Sb),"start-index="+b,"max-results="+c,"psc="+this.Ia,"category=photo&alt=json"];if(this.ei){d.push("hl="+this.ei)}if(this.Ee){d.push("filter=1")}if(this.Ia!=
"G"){d.push("uname="+this.rd)}var e=new T;n(e,de,ea.prototype.ls.bind(this,a*this.va,this.va));e.HB(30000);n(e,"timeout",this.Wq.bind(this));n(e,"error",this.Rq.bind(this));n(e,"ready",e.j,false,e);e.send(this.HC+"?"+d.join("&"))};ea.prototype.Wq=function(a){var b=a.target;D(b,"timeout",this.Wq.bind(this));var c={type:"error",status:"timeout",value:a.currentTarget.Kq()};this.dispatchEvent(c)};ea.prototype.Rq=function(a){var b=a.target;D(b,"error",this.Rq.bind(this));var c,d;if(!b){c="unknown"}else{c=
b.vf();var e=new F(b.um());if(rh==c){d=e.sb("start-index")}else if(qh==c){var f=e.sb("q");if(f){d=f.length}else{d=-1}}}var g={type:"error",status:c,value:""+d};this.dispatchEvent(g)};ea.prototype.ls=function(a,b,c){var d=c.target;if(d.Xh()==500){var e=d.vf(),f="";if(rh==e){f=""+a}else if(qh==e){f=""+this.Sb.length}this.dispatchEvent({type:"error",status:e,value:f});return}this.ks(a,d.ym())};ea.prototype.ks=function(a,b){if(b){this.totalPhotos=Number(b.feed.openSearch$totalResults.$t);this.crowdedLength=
Math.max(this.crowdedLength,Number(b.feed.gphoto$crowded_length.$t));if(0==this.totalPhotos){this.dispatchEvent("nophotos")}this.vv(a,b.feed.entry);Bb(this.CF)}};ea.prototype.Nq=function(a,b){var c=this.jl[a];if(!c){c=new oe(a,b);this.jl[a]=c;this.gE.push(c)}return c};ea.prototype.fx=function(a,b,c,d,e){var f=a+b,g=this.ff[f];if(!g){g=new Vi(a,b,c,d,e);this.ff[f]=g}return g};ea.prototype.vv=function(a,b){if(!b){return}var c=Math.min(a+b.length,this.totalPhotos),d=c-a;this.bb.length=Math.max(this.bb.length,
c);if(this.Of){var e=this.Of.B-a,f=this.Of.id,g=-1;if(e>=0&&e<d){if(b[e].id==f){g=e}else{for(var h=0;h<d;++h){if(b[h].gphoto$id.$t==f){g=h;break}}}}if(g>=0&&g!=e){var i=b[e];b[e]=b[g];b[g]=i}}for(var h=0;h<d;++h){var j=a+h,l=null;if(this.Of&&this.Of.B==j){l=this.Of}else{l=new Ld(this,b[h],j)}this.dr[l.wC()]=l;l.Zm=true;this.bb[j]=l}var p=Math.max(this.crowdedLength,this.bb.length);this.dispatchEvent({type:Sf,offset:a,count:d,crowdedCount:this.fb()})};ea.prototype.ua=function(a,b,c){var d=this.Sl(a),
e=this.Sl(a+b),f=[];for(var g=d;g<=e;++g){if(!this.Ng[g]){f.push(g)}}if(f.length==0){c(a,b);return true}else{var h=new ph(this,f,a,b,c);return h.xc()}return false};ea.prototype.isLoaded=function(){return null!=this.totalPhotos};ea.prototype.fA=function(a){this.Of=a;this.bb[this.Of.B]=this.Of};ea.prototype.fb=function(){if(this.Ee){return this.crowdedLength||0}else{return this.totalPhotos||0}};ea.prototype.qC=function(){return this.totalPhotos||0};function ph(a,b,c,d,e){this.gb=a;this.yh=b;this.B=
c;this.Qa=d;this.ee=e;this.NF=this.yh.length;this.sp=false;this.gb.addEventListener(gk,this.ua.bind,false,this);for(var f=0;f<this.yh.length;++f){this.gb.Ym(this.yh[f])}}ph.prototype.xc=function(){return this.sp};ph.prototype.ua=function(){if(this.sp){return true}var a=[];for(var b=0;b<this.yh.length;++b){var c=this.yh[b];if(!this.gb.Ng[c]){a.push(c)}}if(a.length==0){this.sp=true;this.gb.removeEventListener(gk,this.ua.bind,false,this);this.ee(this.B,this.Qa);return true}else{this.yh=a}return false};function sk(a,b){this.name=a;this.weight=b}var hp=function(a,b){if(a.name==b.name){return 0}else if(a.name<b.name){return-1}else{return 1}};sk.prototype.toString=function(){return"["+this.name+","+this.weight+"]"};var jp=function(a){var b=[];if(a){for(var c=0;c<a.length;++c){var d=a[c],e=d.name;b.push(e)}}return b},ip=function(a){var b=[];if(a){for(var c=0;c<a.length;++c){var d=new sk(a[c],0);b.push(d)}}return b},kp=function(a){var b=[];if(a){for(var c=0;c<a.length;++c){var d=a[c].name;if(d.indexOf(" ")!=
-1){b.push('"'+d+'"')}else{b.push(d)}}}return b.join(" ")},lp=function(a){var b=a.match(/[^,'" \t\r\n][^, \t\r\n]*|\"[^"]*(?:\"|$)|\'[^']*(?:\'|$)/g),c={},d=[];if(b){for(var e=0;e<b.length;e++){var f=tk(tk(fr(b[e]),"'"),'"');if(f.length>0&&!c[f]){d.push(f);c[f]=1}}}return d},tk=function(a,b){if(a.charAt(0)==b&&a.charAt(a.length-1)==b){if(a.length>1){return a.substring(1,a.length-1)}else{return""}}return a};var wg=function(a,b,c,d){this.Nr=a;this.il=b;this.Ck=c;this.Kc=null;this.fs=d};wg.prototype.mh=function(a){var b=a.currentTarget;if(this.Kc.name==b.name){this.Ck.src=b.icon}};wg.prototype.gl=function(a){if(this.Kc==a){return}this.Kc=a;W(this.Nr,Va(a.nickname));this.Ck.src=a.icon;this.il.href="/"+this.Kc.name+"/";W(this.il,ck(Va(this.Kc.nickname)));this.fs.href="/"+this.Kc.name+"/";if(!a.loaded){a.addEventListener(uh,wg.prototype.mh.bind(this));a.Bd()}};function Uf(a,b,c,d){this.Nr=a;this.il=b;this.Ck=c;this.Kc=null;this.fs=d}Uf.prototype.mh=function(a){var b=a.currentTarget;if(this.Kc.name==b.name){this.Ck.src=b.icon}};Uf.prototype.gl=function(a){if(this.Kc==a){return}this.Kc=a;W(this.Nr,Va(a.nickname));this.Ck.src=a.icon;this.il.href="/"+this.Kc.name+"/";W(this.il,ck(Va(this.Kc.nickname)));this.fs.href="/"+this.Kc.name+"/";if(!a.loaded){a.addEventListener(uh,Uf.prototype.mh.bind(this));a.Bd()}};function Ce(a,b,c,d,e,f){this.De=a;this.ga=b;this.Ha=
c;this.Fa=d;this.qb=e;this.Ja=f;this.jc=null;u(k("email"),false);var g=k("lhid_tools"),h=q("div");h.className="lhcl_toolbox";g.appendChild(h);var i=q("div");i.className="lhcl_tools";h.appendChild(i);this.de=new mc(i);this.tf=h;g.insertBefore(this.Fa.g,h);g.insertBefore(this.ga.b,this.qb.Lg);this.nk=k("lhid_main_albumtitle");this.Ir=k("lhid_main_albumtitle_text")}Ce.prototype.Te=function(a,b){this.jc=a;this.ga.Kd(a);if(this.de){if(a.user.name==this.De.name){u(this.tf,false)}else{u(this.tf,true);var c=
!(!a.vsurl);this.de.Xi(a.user.name,a.album.id,a.id,c)}}this.Ja.jd(!(!a.vsurl));this.Ja.n=a;if(b&&this.ga.totalPhotoCount>0){this.Ja.Kd(a);this.Ja.Al(a.B>0,a.B+1<this.ga.bb.length)}if(b){if(a.e){this.lb({currentTarget:a})}else{a.addEventListener(kd,Ce.prototype.lb.bind(this));a.Bd()}}};Ce.prototype.Ok=function(a){this.ga.bb=a;this.Ja.bb=a};Ce.prototype.lb=function(a){var b=a.currentTarget;if(!b){return}if(this.jc!==b){return}var c=b.e;if(!c){alert(fh);return}this.Ha.uc(b);this.ga.Kd(b);if(this.Fa){this.Fa.n=
b;this.Fa.W(c.tags,c.id)}if(this.qb&&c.comment){this.qb.So(b)}var d=b.album;if(this.nk&&d){this.nk.href=d.link;W(this.Ir,Va(d.title))}};function G(a){K.Sa(this);ef("_lh_sl_u");ef("_lh_sl_p");this.ib=null;if(Eg){var b=Eg.photo,c=b.user,d=b.album;this.ib=new Ld(null,null,-1);var e=new oe(c.uname,c.nickname);e.icon=c.icon;var f=new Vi(d.username,d.id,d.title,d.ctitle,d.prints);this.ib.user=e;this.ib.album=f;this.ib.s=b.s;this.ib.id=b.id;this.ib.w=Number(b.w);this.ib.h=Number(b.h);this.ib.c=b.c;this.ib.t=
b.t;this.ib.vsurl=b.vsurl;this.ib.vdurl=b.vdurl;this.ib.e=null}var g=Dk(E.document.location.href);this.Sb=g.sb("q");this.Ia=g.sb("psc");this.B=-1;this.rd=g.sb("cuname");this.ej=_authuser;this.zj=g.sb("filter")==1?true:false;this.va=24;this.$C=g.sb("id");this.C=null;this.n=[];var h=k("lhid_main"),i=k("lhid_tools");this.lk=k("lhid_login");this.Tk=k("lhid_signup");var j=k("lhid_user_nickname"),l=j.parentNode,p=q("a");cg(p,{id:"lhid_user_gallery_link"});l.appendChild(p);var s=k("lhid_portraitlink"),y=
k("lhcl_portrait_id");this.ze=new Uf(j,p,y,s);var t=k("lhid_query"),B=t?t.firstChild:null;if(B&&this.Sb){if(!B.innerHTML){W(B,Va(this.Sb))}}var S=new Eb(this,h,true);this.lh();this.ka=q("div");this.ka.className="lhcl_photobox";h.appendChild(this.ka);this.g=q("div");this.ka.appendChild(this.g);var M=_features.tags?new Ha(this,i,true):null;M.searchCorpus=this.Ia;var kc=new db(this,h,i);this.ga=new Ce(this.ej,new eb(this,i,[],true,true),new oc(this,this.ka,h),M,kc,S);this.Ja=S;this.N=new Ba(this,this.g,
this.n);this.N.hd=G.prototype.bi.bind(this);this.N.Pc=G.prototype.$h.bind(this);this.N.onload=G.prototype.ai.bind(this);this.N.onstopped=G.prototype.ci.bind(this);this.N.onresize=G.prototype.rc.bind(this);n(document,sc,this.ia,false,this);n(document,"keyup",this.yb,false,this);n(document,"blur",this.ob,false,this);this.ub=new qb(v.prototype.Hb.bind(this));this.Nc=false;this.zc=0;this.W(a);this.addEventListener("onLoadStart",G.prototype.Eg.bind(this));this.addEventListener("onstop",G.prototype.Fg.bind(this));
o("hideSlideshow",v.prototype.Pd.bind(this));o("hideVideo",v.prototype.qh.bind(this));o("restoreVideo",v.prototype.uh.bind(this))}var Eg;G.D(O);G.prototype.Eg=function(a){var b=a.photo;if(!b){return}if(!b.e){b.addEventListener(kd,this.lb.bind(this))}this.ga.Te(b,false);this.ze.gl(b.user)};G.prototype.Fg=function(a){var b=a.photo;if(!b){return}this.ga.Te(b,true)};G.prototype.Fi=function(){if(this.C.totalPhotos!=null&&this.B>=this.C.totalPhotos){this.B=this.C.totalPhotos-1;window.location.hash=this.B;
this.Ud=this.B}this.N.ph(this.B)};G.prototype.r=function(){K.Ta(this);if(this.N)this.N.r();if(this.F)this.F.r();if(this.ub)this.ub.r()};G.prototype.W=function(a){this.B=Number(a[1])||0;if(!window.location.hash){window.location.hash=this.B}var b=this.B>this.n.length-1||!this.C;if(!this.C){this.C=new ea("/data/feed/api/search");if(this.ib){this.ib.B=this.B;this.C.fA(this.ib);this.ib.addEventListener(kd,G.prototype.lb.bind(this));this.ib.Bd();b=false}this.n=this.C.bb;this.N.n=this.n;this.C.Is(this.Sb);
this.C.As(this.Ia);this.C.Ee=this.zj==1;this.C.rd=this.rd;this.C.fh(24);this.Ue=this.C.dr;this.lF=this.C.addEventListener(Sf,this.Dc.bind(this))}if(b){this.C.xd(this.B)}else{this.Fi()}};G.prototype.Ky=function(){if(!this.Lm){this.Lm=true;var a=k("lhid_searchmain"),b=k("lhid_searchload");u(a,true);u(b,false)}};G.prototype.Dc=function(a){this.n=a.currentTarget.bb;this.N.n=this.n;this.ga.ga.totalPhotoCount=this.C.totalPhotos;this.ga.Ok(this.n);this.Ky();this.Fi()};G.prototype.nb=function(a,b){var c=
this.B+a,d=this.n.length;if(b){while(c<0)c+=d;c%=d}if(c<0||c>=d)return false;this.B=c;location.replace(location.href.replace(/#.*/,"#"+this.B));return true};G.prototype.sc=v.prototype.sc;G.prototype.tc=v.prototype.tc;G.prototype.Wc=v.prototype.Wc;G.prototype.Ma=function(){var a=this.kc();if(a&&a.vsurl){return true}};G.prototype.rc=v.prototype.rc;G.prototype.Qd=v.prototype.Qd;G.prototype.Rd=v.prototype.Rd;G.prototype.ia=v.prototype.ia;G.prototype.yb=v.prototype.yb;G.prototype.gc=v.prototype.gc;G.prototype.ob=
v.prototype.ob;G.prototype.Hb=v.prototype.Hb;G.prototype.db=v.prototype.db;G.prototype.xb=v.prototype.xb;G.prototype.cg=function(){return true};G.prototype.md=function(){};G.prototype.nh=function(){return false};G.prototype.ld=function(a,b){var c=this.kc();if(c){c.e=null;c.Bd()}};G.prototype.ma=function(){this.ub.reset();this.r()};G.prototype.bi=function(){var a=this.kc();if(!a){return}if(this.Nc)this.nb(this.$g);this.C.xd(this.N.kd());this.dispatchEvent({type:"onShow",photo:a})};G.prototype.$h=function(){this.jb=
true;this.lh();var a=this.kc();if(!a){return}this.dispatchEvent({type:"onLoadStart",photo:a})};G.prototype.ai=function(){this.jb=false};G.prototype.ci=function(){var a=this.kc();if(!a){return}this.dispatchEvent({type:"onstop",photo:a})};G.prototype.kc=function(){var a=this.N.kd(),b=this.n[a];if(!b&&this.ib&&this.ib.B==a){b=this.ib}return b};G.prototype.Te=function(a){if(a.e){this.lb({currentTarget:a})}else{a.addEventListener(kd,G.prototype.lb.bind(this));a.Bd()}};G.prototype.lb=function(a){var b=
a.currentTarget;if(!b){return}if(b.vsurl){this.N.I.xl(b.s,b.w,b.h,b.vsurl);this.N.ql()}if(b.e){this.ga.lb({currentTarget:b})}};G.prototype.lh=function(){var a=["q="+this.Sb];if(this.Ia){a.push("psc="+this.Ia)}if(this.rd){a.push("uname="+this.rd)}if(this.N){var b=this.N.kd();if(b>this.va){var c=Math.floor(b/this.va)*this.va;c=Math.min(c,1000-this.va);a.push("start="+c)}}a.push("filter="+(this.zj?"1":"0"));var d=k("lhid_backlink"),e="/lh/search?"+a.join("&");d.href=e;this.Un(e)};G.prototype.pg=function(){if("G"==
this.Ia){return Qf}else if("S"==this.Ia){return"My Photos"}else if("C"==this.Ia){return"My Favorites"}else if("F"==this.Ia){var a=this.C.jl[this.rd];if(a){return Pf(a.nickname)}}return"Unknown"};G.prototype.Un=function(a){if(!this.C){return}var b=k("lhid_active_tab_link"),c=k("lhid_active_tab_count");W(b,Va(this.pg()));b.href=a;W(c,this.C.totalPhotos)};var Yl=function(a,b){Gc("_lh_sl_u",a);Gc("_lh_sl_p",b)};var lf=function(a,b,c,d,e,f,g){this.xF=a;this.De=b;this.ga=c;this.Ha=d;this.Fa=e;this.qb=f;this.Ja=g;this.jc=null;this.totalPhotoCount=0;this.fb=0;u(k("email"),false);var h=k("lhid_tools"),i=q("div");i.className="lhcl_toolbox";h.appendChild(i);var j=q("div");j.className="lhcl_tools";i.appendChild(j);this.de=new mc(j);this.tf=i;if(this.Fa){h.insertBefore(this.Fa.Mj(),i)}h.insertBefore(this.ga.Mj(),this.qb.Bx());this.nk=k("lhid_main_albumtitle");this.Ir=k("lhid_main_albumtitle_text")};lf.prototype.Te=
function(a,b){this.jc=a;this.ga.Kd(a);if(this.de){if(a.user.name==this.De.name){u(this.tf,false)}else{u(this.tf,true);var c=!(!a.vsurl);this.de.Xi(a.user.name,a.album.id,a.id,c)}}this.Ja.jd(!(!a.vsurl));this.Ja.n=a;if(b&&this.totalPhotoCount>0){this.Ja.pB(Wj(a.B+1,this.totalPhotoCount));this.Ja.Kd(a);this.Ja.Al(a.B>0,a.B+1<this.fb)}if(b){if(a.e){this.lb({currentTarget:a})}else{a.Bd()}}};lf.prototype.show=function(a){u(k("lhid_rightbox"),a)};lf.prototype.Ok=function(a){this.ga.bb=a;this.Ja.bb=a};lf.prototype.lb=
function(a){var b=a.currentTarget;if(!b){return}if(this.jc!==b){return}var c=b.e;if(!c){alert(fh);return}this.Ha.uc(b);this.ga.Kd(b);if(this.Fa){this.Fa.n=b;this.Fa.W(c.tags,c.id)}if(this.qb&&c.comment){this.qb.So(b)}var d=b.album;if(this.nk&&d){this.nk.href=d.link;W(this.Ir,Va(d.title))}};var w=function(){K.Sa(this);var a=Dk(location.href);this.Sb=a.sb("q");this.ei=a.sb("hl");this.Ia=a.sb("psc")||"G";this.B=-1;this.rd=a.sb("cuname")||a.sb("uname");this.ej=_authuser;this.zj=!(!a.sb("filter"));this.va=24;this.$C=a.sb("id");this.C=null;this.n=[];this.pr=new Nb(this);this.Lm=false;tg=this;this.oa=new Nb(this);this.Jy();this.qd();Ii=this.Kg();this.ub=new qb(v.prototype.Hb.bind(this));this.Nc=false;this.zc=0;var b=k("lhid_query"),c=b?b.firstChild:null;if(c&&this.Sb){if(!c.firstChild){W(c,
Va(this.Sb))}}if(!Zc){Zc=this.Ia}else{this.Ia=Zc}if(!Ji){Ji=this.rd}else{this.rd=Ji}this.C=this.zg().gb;this.n=this.C.n;this.Xn();this.on()},ug;w.D(O);var Dr=new Image,zd={},Zc=null,Ji=null,tg=null,Ii=true;var Pl=function(){return tg};w.prototype.yn=function(a){var b=location.toString();if(b.indexOf("#")>0){b=b.replace(/#.*/,"")}location.replace(b+"#"+a)};w.prototype.df=function(a){this.yn(this.$m(a))};w.prototype.qd=function(){this.oa.ta(document,sc,this.ia,false);this.oa.ta(document,"keyup",this.yb,
false);this.oa.ta(document,"blur",this.ob,false);this.Xn()};w.prototype.Jp=function(){this.oa.Ek();this.pr.Ek()};w.prototype.Kg=function(){return false};w.prototype.r=function(){this.Jp();K.Ta(this);if(this.ub)this.ub.r()};w.prototype.Tn=function(){if(this.C){this.C.Bs(false);this.C.xd(this.B)}this.zj=false};w.prototype.Dc=function(a){this.n=a.currentTarget.bb;var b=k("lhid_searchload");u(b,false);if(!this.Lm){this.Lm=true;var c=k("lhid_searchmain");u(c,true);this.Ld(true)}};w.prototype.nb=function(a,
b){var c=this.B+a,d=this.n.length;if(b){while(c<0)c+=d;c%=d}if(c<0||c>=d)return false;this.df(c);return true};w.prototype.sc=v.prototype.sc;w.prototype.tc=v.prototype.tc;w.prototype.Wc=v.prototype.Wc;w.prototype.Ma=function(){var a=this.kc();if(a&&a.vsurl){return true}};w.prototype.ia=function(a){var b=a.target.nodeName.toLowerCase();if(b=="textarea"||b=="input"||b=="select")return;v.prototype.ia.call(this,a)};w.prototype.rc=v.prototype.rc;w.prototype.Qd=v.prototype.Qd;w.prototype.Rd=v.prototype.Rd;
w.prototype.yb=v.prototype.yb;w.prototype.gc=v.prototype.gc;w.prototype.ob=v.prototype.ob;w.prototype.Hb=v.prototype.Hb;w.prototype.db=v.prototype.db;w.prototype.xb=v.prototype.xb;w.prototype.cg=function(){return true};w.prototype.md=function(){};w.prototype.nh=function(){return false};w.prototype.ld=function(a,b){};w.prototype.ma=function(){this.ub.reset();this.Jp();this.Ld(false)};w.prototype.Ld=function(a){};w.prototype.vb=function(a){var b=this.Cx()+"?"+a.join("&");Dr.src=b};w.prototype.Cx=function(){return"/lh/ajaxlog"};
w.prototype.ed=function(){var a=["page="+this.Uh(),"ts="+ya()],b=this.zg();if(b){a.push("psc="+b.search_corpus);var c=b.gb;if(c){a.push("q="+c.Sb)}}return a};w.prototype.Uh=function(){return-1};w.prototype.W=function(a){var b=false;if(!a){this.B=0;b=true}else{if(a.length<2){this.B=0;b=true}else{this.B=parseInt(a[1],10);if(isNaN(this.B)){this.B=0;b=true}if(this.B<0){this.B=0;b=true}}}if(b){this.df(this.B)}var c=this.Kg();if(Ii!=c){Ii=c;this.hi()}};w.prototype.$m=function(a){return a};w.prototype.hi=
function(){tg=this;this.ec(Zc);this.on();this.qd();this.Ld(true);this.vb(this.ed())};w.prototype.kc=function(){if(!this.n){return null}return this.n[this.B]};w.prototype.pg=function(a){var b=a||this.Ia;if("G"==b){return Qf}else if("S"==b){return"My Photos"}else if("C"==b){return"My Favorites"}else if("F"==b){var c=this.C.jl[this.rd];if(c){return Pf(c.nickname)}}return Qf};w.prototype.Un=function(a){if(!this.C){return}var b=k("lhid_active_tab_link"),c=k("lhid_active_tab_count");if(b){W(b,Va(this.pg()));
b.href=a;c.innerHTML=this.C.fb()}};w.prototype.on=function(){var a=["S","C","F","G"],b=k("lhid_searchbar");for(var c=0;c<a.length;++c){var d=zd[a[c]];if(!d){continue}if(!d.tab){d.tab=new vg(b,d)}d.tab.Li()}};w.prototype.zg=function(){var a=zd[Zc];if(!a){Zc="G";a=zd["G"]}return a};w.prototype.Xn=function(){this.pr.Ek();if(this.C){this.pr.ta(this.C,Sf,this.Dc.bind(this))}};w.prototype.ec=function(a){var b=zd[a],c=this.zg();if(c){c.savedIndex=this.B}var d=false;if(b!=c){d=true;this.ub.reset();this.C=
b.gb}this.Ia=b.search_corpus;this.C=b.gb;this.n=this.C.bb;var e=b.savedIndex;Zc=a;this.on();this.Xn();this.df(e);if(d){this.vb(this.ed())}return e};w.prototype.Sh=function(){var a=this.zg();return a?a.lastError:null};w.prototype.qp=function(){var a=this.zg();if(a){a.lastError=null}};w.prototype.Mh=function(a,b){a.lastError=b};w.prototype.oi=function(){var a=k("lhid_searchload");u(a,false)};w.prototype.Jy=function(){if(!ug){ug=window["LH_SEARCH_CONTEXT_INFO"];Er(this)}var a=[];for(var b in zd){var c=
zd[b],d=c.gb;d.addEventListener("nophotos",this.oi.bind(this));d.addEventListener("error",this.Mh.bind(this,c));if(b==this.Ia){if(!d.isLoaded()){d.xd(0)}}else{a.push(d)}}for(var e=0;e<a.length;++e){if(!a[e].isLoaded()){a[e].xd(0)}}};var Er=function(a){for(var b in ug){var c=ug[b],d=false;c.savedIndex=0;if(Q(c)&&Q(c.search_corpus)){if(c.is_primary&&c.search_corpus=="G"&&a.zj==1){d=true}else if(c.search_corpus=="G"){d=true}var e=new ea("/data/feed/api/search");e.Is(a.Sb,d);if(a.ei){e.nB(a.ei)}e.As(c.search_corpus);
var f=a.ej.name;if(c.search_corpus=="F"){f=c.target_user||f}e.rd=f;e.fh(a.va);if(c.target_user&&c.foreign_nickname){e.Nq(c.target_user,c.foreign_nickname)}if(c.json){e.Ng[0]=c.is_primary;e.ks(0,c.json)}c.gb=e;zd[c.search_corpus]=c}}};function Ha(a,b,c){this.De=_authuser;this.n=null;this.vs=c;this.searchCorpus="G";this.F={pnlListID:m("lhid_listPanel"),pnlAddID:m("lhid_addPanel"),pnlInputID:m("lhid_inputPanel"),pnlAlterID:m("lhid_alterPanel"),btnAddID:m("lhid_addButton"),btnDeleteID:m("lhid_deleteButton"),btnSaveID:m("lhid_saveButton"),btnCancelID:m("lhid_cancelButton"),txtNewTagsID:m("lhid_newTagsText")};this.g=N(Vo,this.F);b.appendChild(this.g);this.cs=k(this.F.pnlListID);this.hA=k(this.F.pnlAddID);this.jA=k(this.F.pnlInputID);
this.iA=k(this.F.pnlAlterID);this.el=k(this.F.txtNewTagsID);this.ZE=k(this.F.btnAddID);this.NC=k(this.F.btnSaveID);this.MC=k(this.F.btnCancelID);o(this.F.btnAddID,this.Yt.bind(this));o(this.F.btnDeleteID,this.au.bind(this));o(this.F.btnSaveID,this.qo.bind(this));o(this.F.btnCancelID,this.Zt.bind(this));this.LF=n(this.el,ud,this.Yu,true,this);this.p=a;this.Fa=[];this.Za=0;this.th(false);if(!this.ri()){this.iA.style.display="none"}}Ha.prototype.Yu=function(a){if(a.keyCode==13){this.rr=true;this.qo();
a.preventDefault()}};Ha.prototype.ri=function(){if(this.n){return this.n.uname==this.De.name}return this.De.isOwner};Ha.prototype.r=function(){if(this.g)z(this.g);if(this.F.btnAddID){x(this.F.btnAddID)}if(this.F.btnDeleteID){x(this.F.btnDeleteID)}if(this.F.btnSaveID){x(this.F.btnSaveID)}if(this.F.btnCancelID){x(this.F.btnCancelID)}for(var a in this){this[a]=null}};Ha.prototype.Mj=function(){return this.g};Ha.prototype.Be=function(){this.th(false);xc(this.cs,N(kk,{}))};Ha.prototype.W=function(a,b){if(!a){if(!this.ri()){this.Be()}else{xc(this.cs,
N("<div></div>",{}))}}else{this.Za=b;this.fv(a,Zc);this.g.style.display=""}if(a&&a.length||this.ri()){this.g.style.display="";u(this.iA,this.ri())}else{this.g.style.display="none"}};Ha.prototype.fv=function(a,b){var c=[];if(a){this.Fa=a.sort(hp);var d=_user.name;if(this.n&&this.n.user){d=this.n.user.name}var e;this.searchCorpus=b||(d?"F":"G");if(this.vs){e=Uo}else if(this.ri()){e=To;this.searchCorpus="S";d=this.De.name}else{e=Wo}var f=0;if(this.p&&this.p.C&&this.p.C.Ee){f=1}var g=["psc="+this.searchCorpus,
"filter="+f,"uname="+d],h="&"+g.join("&");for(var i=0;i<a.length;++i){var j=a[i];if(!Q(j.tagId)){j.tagId=m("lhcl_tag_");j.name=Va(j.name)}var l=j.name,p=l.length<=30?ga(l):ga(l.substring(0,30))+"&#8230;",s=V(e,{tagid:j.tagId,aname:Xc(l),name:ga(l),displayName:p,username:d,searchParams:h,func:this.F.btnDeleteID});c.push(s)}}var y='<ul class="lhcl_taglist">'+c.join("")+"</ul>";this.cs.innerHTML=y};Ha.prototype.th=function(a){this.rr=false;this.HF=a;if(a){this.jA.style.display="";this.hA.style.display=
"none";this.el.value="";this.el.focus()}else{this.hA.style.display="";this.jA.style.display="none"}};Ha.prototype.ut=function(a){var b=Wc(a);if(b.length<=0){return}if(b.length>4096){alert(po(4096,b.length));return}var c=lp(b),d=jp(this.Fa);for(var e=0;e<c.length;++e){Ri(d,c[e])}this.Fo(ip(d))};Ha.prototype.Ot=function(a){var b=[];for(var c=0;c<this.Fa.length;++c){var d=this.Fa[c];if(d["tagId"]!=a){b.push(d)}}this.Fo(b)};Ha.prototype.hv=function(a){if(a.length>100){alert(no(100,a.length));return false}if(a.length==
this.Fa.length){var b=0;for(var c=0;c<a.length;++c){if(this.Fa[c]==a[c]){++b}else{break}}if(b==this.Fa.length){return false}}for(var c=0;c<a.length;++c){var d=a[c].name;if(d.length>128){alert(oo(128,d.length));return false}}return true};Ha.prototype.Fo=function(a){if(!this.hv(a)){return}k(this.F.btnSaveID).disabled=true;k(this.F.btnCancelID).disabled=true;var b=["tags="+Xc(kp(a)),"noredir=true"].join("&"),c=this.Za,d=Yb(this,this.Ju,c,a),e=_updatePhotoPath+"&uname="+_user.name+"&aname="+_album.name+
"&iid="+c;L.Ga(e,d,b)};Ha.prototype.Yt=function(){this.th(true)};Ha.prototype.Zt=function(){this.th(false)};Ha.prototype.qo=function(){this.ut(this.el.value)};Ha.prototype.au=function(a){this.Ot(a)};Ha.prototype.Ju=function(a,b,c){if(!this.p){return}this.NC.disabled=false;this.MC.disabled=false;if(this.p.db(c)||this.p.xb(c)){return}if(this.rr){this.el.value=""}else{this.th(false)}this.rr=false;this.W(b,a)};var kk='<div class="lhcl_photoinfo">Loading&#8230;<br />&nbsp;</div>',th=_features.feedpage?
"searchbrowse":"search",Uo='<li><div class="lhcl_tagname"><a href="/lh/'+th+'?q={aname}{searchParams}"  title="{name}">{displayName}</a></div></li>',Wo='<li><div class="lhcl_tagname"><a href="/lh/'+th+'?q={aname}{searchParams}" title="{name}">{displayName}</a></div></li>',To='<li><a href="/lh/'+th+'?q={aname}{searchParams}" title="{name}">{displayName}</a><a class="lhcl_tagdelete" href="javascript:_d(\'{func}\', \'{tagid}\')"> &nbsp;&nbsp;</a></li>',Vo='<div id="lhcl_tagbox" class="lhcl_toolbox" style="display: none;"><div class="lhcl_tools lhcl_hideoverflow"><div id="{lhui_tagsHeaderPanel}" style="margin: 0 0 1em 0"><div><b>Tags</b></div></div><div id="{pnlListID}">'+
kk+'</div><div id="{pnlAlterID}"><div class="lhcl_pseudo_hr"></div><div id="{pnlAddID}"><div style="text-align:right"><span class="lhcl_fakelink" id="{btnAddID}" onclick="_d(\'{btnAddID}\')">Add Tag</span></div></div><div id="{pnlInputID}"><div class="lhcl_addtagform"><table class="lhcl_addtag"><tr><td width="100%"><input class="lhcl_taginputfield" type="text" id="{txtNewTagsID}" maxlength="4096" /></td></tr><tr><td class="lhcl_addtagbuttoncell"><input id="{btnSaveID}" onclick="_d(\'{btnSaveID}\')" type="button" value="Add" /><input id="{btnCancelID}" onclick="_d(\'{btnCancelID}\')" type="button" value="Cancel" /></td></tr></table></div><div class="lhcl_addtaghelp">You can enter a space separated list of tags.<br>For example: beach "pacific ocean"</div></div></div></div></div>';var va=function(a){w.call(this);this.Zl=-1;var b=k("lhid_rightbox");u(b,false);var c=q("tr"),d=q("td");this.mk=q("table");this.jk=q("tbody");this.qa=null;this.Ka=null;this.jk.id="lhid_listview";cg(this.jk,{"class":"lhcl_search_results_content"});var e=k("lhid_searchmain");C(e,c);C(c,d);C(d,this.mk);C(this.mk,this.jk);this.Tm=Cc(window);this.sk=null;this.W(a)};va.D(w);va.prototype.Kg=function(){return true};va.prototype.qd=function(){w.prototype.qd.call(this);this.oa.ta(window,"resize",this.Vq.bind(this))};
va.prototype.Vq=function(){if(this.Ka){this.Tm=Cc(window);this.Ka.ps(this.Tm)}};va.prototype.Ni=function(){var a=k("lhid_searchmain");u(a,true);if(this.Ka){this.Ka.Zg()}if(this.Xg){this.Xg.Ix().qc();this.Xg.qc()}if(this.Ka){this.Mi(this.Sh());this.Ka.Cs(Math.max(this.B,0))}};va.prototype.Ld=function(a){if(this.Xg){this.Xg.show(a)}u(this.mk,a);u(this.jk,a);if(!a){this.Rs(null)}};va.prototype.ed=function(){var a=w.prototype.ed.call(this);if(this.qa){a.push("start="+this.qa.wf(this.qa.vd()));a.push("num="+
this.qa.wm())}return a};va.prototype.Uh=function(){return 118};va.prototype.W=function(a){w.prototype.W.call(this,a);if(!window.location.hash){this.df(this.B)}if(!this.C){var b=this.zg();this.C=b.gb}if(!this.qa){this.qa=new Pa(0,this.va);this.qa.Cn(this.C.fb());this.Ka=new yb(this.jk,this.C,this.qa);var c=this.qa,d=function(j){c.fh(j.gridSize)};this.Ka.addEventListener("gridsizechanged",d);this.Ka.ps(Cc());var e=k("lhid_searchmain");this.sk=k("lhid_searchbody");this.zr=null;var f=q("tr"),g=q("td");
g["align"]="center";var h=q("center");h["id"]="pager";C(g,h);C(f,g);C(e,f);this.Xg=new Me(h,this.qa,10);this.qa.addEventListener(jd,this.ww.bind(this));this.C.xd(this.B);var i=k("lhid_searchload");u(i,false)}if(this.B+1>=this.C.fb()){this.B=Math.max(0,this.C.fb()-1)}this.qa.Kk(this.qa.Kj(this.B));this.qa.un(this.B);this.Ni()};va.prototype.$m=function(a){return a+"+1"};va.prototype.hi=function(){w.prototype.hi.call(this);var a=Cc(window);if(this.Tm.width!=a.width||this.Tm.height!=a.height){this.Vq()}};
va.prototype.ww=function(){var a=this.qa.vd(),b=this.qa.wf(a),c=this.qa.wm();if(this.B<b||this.B>=b+c){this.df(b)}var d=this.C.ua(b,c,function(){}),e=this.qa.vd(),f=-1;if(this.Zl<e){f=b+c}else{f=b-c}this.Zl=e;if(f>=0&&f<this.C.fb()){this.C.ua(f,c,function(){})}this.Ka.Ov();this.Ka.hh(!d);this.Mi(this.Sh());this.vb(this.ed())};va.prototype.Rs=function(a,b){if(this.zr){z(this.zr)}var c=k("lhid_searchload");if(a){C(this.sk,a);if(b){if(c){this.sk.insertBefore(a,c)}}}this.zr=a};va.prototype.gx=function(){var a=
[],b=["S","C","F","G"];for(var c=0;c<b.length;++c){var d=zd[b[c]];if(!d){continue}if(d.gb){if(d.gb.fb()>0){a.push(d)}}}if(a.length==0){return null}var e=q("div"),f=q("div");f.className="lhcl_search_results_help";var g=q("div");g.className="lhcl_search_results_no_results";var h=ga(this.Sb);g.innerHTML=Sj('<span class="lhcl_search_results_query">'+h+"</span>",this.pg());f.innerHTML=ko('<span class="lhcl_search_results_query">'+h+"</span>");var i=q("div");i.className="lhcl_search_results_help_related";
C(e,g);C(e,f);C(f,i);for(var c=0;c<a.length;++c){var d=a[c],j=q("span");j.className="lhcl_fakelink";W(j,d.name);C(i,j);n(j,na,this.ec.bind(this,d.search_corpus));var l=q("span");W(l," ("+d.gb.fb()+") ");C(i,l)}return e};va.prototype.Mi=function(a){var b=null;a=a||this.Sh();var c=false;if(a){c=true;var d="";if(rh==a.status){d=ak(a.value)}else if(qh==a.status){d="You entered a query string that was too long.  Please enter one that is less than 128 characters."}else if("empty_query_string"==a.status){d=
'You didn\'t enter any query in the search box.  Please enter some terms in the search box and click the "Search Photos" button again.'}else{d=Ho(a.value)}if(d){b=q("div");Ya(b,"lhcl_error_msg");W(b,d)}}u(this.mk,true);var e;if(!b&&this.qa&&this.C.isLoaded()){var f=this.qa.vd(),g=this.qa.Dm(),h=f+1>=g,i=this.C.Ee,j=this.C.fb(),l=0==j,p=false;if(h&&i&&j>0&&j<this.C.qC()){var s=Go('<span class="lhcl_fakelink" id="lhid_uncrowded_link">',"</span>"),y=k("lhid_uncrowded_link");if(y){z(y)}b=Ia("div",{className:"lhcl_search_crowded_results"});
C(b,bq(s));p=true}if(!b&&h&&j>1000){b=q("div");Ya(b,"lhcl_error_msg");W(b,ak(this.qa.wf(f)+1));c=true}if(l&&!b){u(this.mk,false);b=this.gx();if(!b){b=N(Cr,{query:ga(this.Sb),corpusName:this.pg()})}}}this.qp();this.Rs(b,c);if(p){e=k("lhid_uncrowded_link")}if(e){n(e,na,this.Tn.bind(this))}};va.prototype.Tn=function(){if(this.C){var a=this.qa.wf(this.qa.vd());this.C.Bs(false);this.C.ua(a,this.qa.wm(),function(){});if(this.Ka){this.Ka.hh(true)}}};va.prototype.Dc=function(a){w.prototype.Dc.call(this,a);
if(this.qa){this.qa.Cn(Math.min(1000,this.C.fb()))}this.Ni();if(this.Ka){this.Ka.hh(false)}};va.prototype.ia=function(a){var b=a.target.nodeName.toLowerCase();if(b=="textarea"||b=="input"||b=="select")return;if(a.keyCode==13){location.replace(location.href.replace(/#.*/,"#"+this.B));a.stopPropagation();return}w.prototype.ia.call(this,a)};va.prototype.ec=function(a){if(this.C&&this.C.Ia==a){return}if(this.Ka){this.Ka.Um=true}var b=w.prototype.ec.call(this,a);if(this.qa){var c=Math.min(1000,this.C.fb());
b=Math.min(b,c-1);b=Math.max(b,0);this.qa.Cn(c);this.qa.un(b);this.Ka.kB(this.C);var d=true;if(this.C.isLoaded()&&this.C.totalPhotos>0){d=this.C.xd(b)}if(d){if(fc){Se(this.Ka.Zg.bind(this.Ka),0)}else{this.Ka.Zg()}this.Mi(this.Sh());this.Ka.hh(false)}else{this.Ka.hh(true)}if(this.Xg){this.Xg.qc()}}};va.prototype.oi=function(){w.prototype.oi.call(this);if(this.Ka){this.Ka.hh(false)}this.Mi(this.Sh())};va.prototype.Mh=function(a,b){w.prototype.Mh.call(this,a,b);if(Zc==a.search_corpus){this.Mi();this.qp()}};
var Cr='<div class="lhcl_search_results_no_results">'+Sj('<span class="lhcl_search_results_query">{query}</span>',"{corpusName}")+'<div class="lhcl_search_results_help"><div>In order to find more items, consider the following tips:</div><div><ul><li>'+Co("<b>Hawaii</b>")+"</li><li>"+Bo("Hawaiian vacation","<b>vacation Hawaii</b>")+"</li><li>Don't worry about capitalization.  Google searches are not case sensitive.</li><li>"+Ao("the long and winding road")+"</li></ul></div></div>";var la=function(a){w.call(this);var b=k("lhid_main"),c=k("lhid_tools");this.$D=b;this.lk=k("lhid_login");this.Tk=k("lhid_signup");var d=k("lhid_user_nickname"),e=d.parentNode,f=q("a");cg(f,{id:"lhid_user_gallery_link"});e.appendChild(f);var g=k("lhid_portraitlink"),h=k("lhcl_portrait_id");this.ze=new wg(d,f,h,g);var i=new Eb(this,b,true);this.ka=q("div");this.ka.className="lhcl_photobox";b.appendChild(this.ka);this.g=q("div");this.ka.appendChild(this.g);if(_features.tags){var j=new Ha(this,c,true);
j.searchCorpus=this.Ia}var l=new db(this,b,c);this.ga=new lf(this,this.ej,new eb(this,c,[],true,true),new oc(this,this.ka,b),j,l,i);this.Ja=i;this.N=new Ba(this,this.g,this.n);this.N.hd=this.bi.bind(this);this.N.Pc=this.$h.bind(this);this.N.onload=this.ai.bind(this);this.N.onstopped=this.ci.bind(this);this.N.onresize=this.rc.bind(this);this.addEventListener("loadstart",la.prototype.Eg.bind(this));this.addEventListener("loadstop",la.prototype.Fg.bind(this));o("hideSlideshow",v.prototype.Pd.bind(this));
o("hideVideo",v.prototype.qh.bind(this));o("restoreVideo",v.prototype.uh.bind(this));this.W(a)};la.D(w);la.prototype.qd=function(){w.prototype.qd.call(this);var a=k("lhid_backlink");this.oa.ta(a,na,this.Oq,true)};la.prototype.Eg=function(a){var b=a.photo;if(!b){return}if(!b.e){var c=this.lb.bind(this);b.removeEventListener(kd,c);b.addEventListener(kd,c)}this.ga.Te(b,false);this.ze.gl(b.user)};la.prototype.Fg=function(a){var b=a.photo;if(!b){return}this.ga.Te(b,true)};la.prototype.Fi=function(){var a=
this.C.fb();if(this.B>=a){this.df(a-1);return}this.N.ph(this.B);this.df(this.B)};la.prototype.r=function(){K.Ta(this);if(this.N)this.N.r();if(this.F)this.F.r();if(this.ub)this.ub.r()};la.prototype.Uh=function(){return 119};la.prototype.W=function(a){w.prototype.W.call(this,a);if(!window.location.hash){this.df(this.B)}this.lh();var b=this.C.xd(this.B);if(b){var c={currentTarget:this.C,offset:this.B,crowdedCount:this.C.fb()};this.Dc(c)}this.vb(this.ed())};la.prototype.Dc=function(a){w.prototype.Dc.call(this,
a);this.ht();this.Fi()};la.prototype.Ma=function(){var a=this.kc();return a&&a.vsurl};la.prototype.ia=function(a){var b=a.target.nodeName.toLowerCase();if(b=="textarea"||b=="input"||b=="select")return;if(a.keyCode==85){this.Oq(a)}else{w.prototype.ia.call(this,a)}};la.prototype.ld=function(a,b){var c=this.kc();if(c){c.e=null;c.Bd()}};la.prototype.Ld=function(a){u(k("lhid_backlink_holder"),a);u(this.$D,a);if(this.ga){this.ga.show(a)}};la.prototype.bi=function(){var a=this.kc();if(!a){return}if(this.Nc)this.nb(this.$g);
this.C.xd(this.N.kd());this.dispatchEvent({type:"onShow",photo:a})};la.prototype.$h=function(){this.jb=true;this.lh();var a=this.kc();if(a){this.dispatchEvent({type:"loadstart",photo:a})}};la.prototype.ai=function(){this.jb=false};la.prototype.ci=function(){var a=this.kc();if(!a){return}this.dispatchEvent({type:"loadstop",photo:a})};la.prototype.lb=function(a){var b=a.currentTarget;if(!b){return}var c=this.kc();if(c!=b){return}if(b.vsurl){this.N.I.xl(b.s,b.w,b.h,b.vsurl);this.N.ql()}if(b.e){this.ga.lb({currentTarget:b})}};
la.prototype.lh=function(){var a=window.location.toString(),b=a+"+1";if(b!=a){var c=k("lhid_backlink");c.href=b}};la.prototype.Oq=function(a){a.stopPropagation();this.yn(this.B+"+1")};la.prototype.ht=function(){this.n=this.C.bb;this.N.n=this.n;this.ga.Ok(this.n);this.ga.totalPhotoCount=this.C.totalPhotos;this.ga.fb=this.C.fb();this.ga.ga.totalPhotoCount=this.C.fb()};la.prototype.ec=function(a){var b=w.prototype.ec.call(this,a),c=this.C.xd(b);if(c){this.ht()}};function nk(a){if((!location.hash||location.hash=="#")&&_photo.length){var b="http://"+location.host+location.pathname+location.search+"#"+_photo[0].id;location.replace(b);return}window.setTimeout('location.replace("'+_album.link+'")',1000);var c=k("lhid_main");this.g=q("div");c.appendChild(this.g);this.g.innerHTML="The requested photo is invalid or unavailable.<br />You will be redirected to the album page."}nk.prototype.ma=function(){if(this.g)z(this.g)};function pk(a){var b=location.href.replace("#.*","#0+1");if(b.indexOf("#0+1")<0){b=location.href.toString()+"#0+1"}if(!location.hash||location.hash=="#"){location.replace(b)}}pk.prototype.ma=function(){};function Bd(a,b){this.Gc=a;this.b=b;this.xh=q("div");this.xh.className="lhcl_bandselect";wd(this.xh,0.2);this.Re=this.Pb.bind(this);this.le=this.Ed.bind(this);this.me=this.ra.bind(this);this.Sg=this.Ea.bind(this);this.Zk=[];this.ab={};this.TB=A||fc;this.lz=false;n(this.b,"mousedown",this.Re);this.b.onselectstart=function(){return false}}Bd.prototype.Pb=function(a){D(this.b,"mousedown",this.Re);n(document,"mousemove",this.le);n(document,"mouseup",this.me);n(document,"mouseout",this.Sg);var b=Sb(),
c=a.clientX+b.scrollLeft,d=a.clientY+b.scrollTop;this.Qi=c;this.Ri=d;var e=this.xh.style;e.left=c+"px";e.top=d+"px";e.width="0";e.height="0";this.wr=new Ua(d,c,d,c);this.Zk.length=0;if(!(a.shiftKey||a.ctrlKey)){this.Gc.cm()}document.body.appendChild(this.xh);a.stopPropagation();a.preventDefault()};Bd.prototype.Ed=function(a){var b=Sb(),c=a.clientX+b.scrollLeft,d=a.clientY+b.scrollTop,e=new Ua(Math.min(d,this.Ri),Math.max(c,this.Qi),Math.max(d,this.Ri),Math.min(c,this.Qi)),f=this.xh.style;f.left=e.left+
"px";f.top=e.top+"px";f.width=e.right-e.left+"px";f.height=e.bottom-e.top+"px";var g=ml(e,this.wr),h=nl(g,this.wr),i=nl(g,e),j=a.ctrlKey?2:1;for(var l=0;l<h.length;l++){this.ws(e,h[l],j)}for(var l=0;l<i.length;l++){this.ws(e,i[l],0)}this.wr=e};Bd.prototype.ws=function(a,b,c){var d=this.Gc.Aj(b.right,b.top),e=this.Gc.Aj(b.left,b.bottom),f=this.Gc.slide,g=false;for(var h=d.row;h<=e.row;h++){var i=h*d.rowLength+e.col,j=Math.min(h*d.rowLength+d.col,(h+1)*d.rowLength-1);j=Math.min(j,f.length-1);for(var l=
i;l<=j;l++){var p=f[l],s=p.zx(),y=pa(s),t=new Ua(y.y,y.x+s.offsetWidth,y.y+s.offsetHeight,y.x);if(c==0){if(!li(a,t)){od(this.Zk,p);g=true;this.ab[p.iid]=[p,p.selected]}}else if(li(b,t)){Hh(this.Zk,p);g=true;this.ab[p.iid]=[p,c==2?!p.selected:true]}}}if(g){if(this.TB&&!this.lock){Xf(this,this.ar,0)}else{this.ar()}}};Bd.prototype.ar=function(){for(var a in this.ab){var b=this.ab[a];b[0].$q(b[1]);delete this.ab[a]}if(this.TB){this.lz=true;Xf(this,function(){this.lz=false},0)}};Bd.prototype.ra=function(a){n(this.b,
"mousedown",this.Re);D(document,"mousemove",this.le);D(document,"mouseup",this.me);D(document,"mouseout",this.Sg);for(var b=0;b<this.Zk.length;b++){var c=this.Zk[b];if(a.ctrlKey){this.Gc.Ye(c,!c.selected)}else{this.Gc.Ye(c,true)}}document.body.removeChild(this.xh)};Bd.prototype.Ea=function(a){if(!a.relatedTarget){this.ra(a)}};function Pc(a,b,c,d,e,f,g){this.Gc=a;this.g=N('<div class="lhcl_slide" style="left:0"><div class="lhcl_slideImage"style="background-image:url({url})"><div class="lhcl_selectBox" style="visibility:hidden"><div class="lhcl_innerSelectBox"></div></div></div></div>',{url:e});this.I=this.g.firstChild;this.Re=this.Pb.bind(this);this.le=this.Ed.bind(this);this.me=this.ra.bind(this);n(this.I,"mousedown",this.Re);this.If=f;this.am=new Date(g);this.iid=d;this.old_layout=c;this.layout_num=b;this.src=e;this.selected=
false}Pc.prototype.remove=function(){z(this.g)};Pc.prototype.Va=function(){return this.g};Pc.prototype.zx=function(){return this.I};Pc.prototype.Pb=function(a){if(!this.selected||a.shiftKey||a.ctrlKey){this.Gc.jy(this,a.shiftKey,a.ctrlKey)}if(this.selected){n(document,"mousemove",this.le);n(document,"mouseup",this.me);D(this.I,"mousedown",this.Re);this.Qi=a.clientX;this.Ri=a.clientY}a.stopPropagation();a.preventDefault()};Pc.prototype.Ed=function(a){var b=a.clientX-this.Qi,c=a.clientY-this.Ri;if(b*
b+c*c>=16){this.ra(a);b+=this.I.offsetTop;c+=this.I.offsetLeft;this.Gc.fy(this,a.clientX,a.clientY,b,c)}a.stopPropagation();a.preventDefault()};Pc.prototype.ra=function(a){D(document,"mousemove",this.le);D(document,"mouseup",this.me);n(this.I,"mousedown",this.Re)};Pc.prototype.select=function(a){this.selected=!(!a);this.$q(a)};Pc.prototype.$q=function(a){this.I.firstChild.style.visibility=a?"":"hidden"};var dp=function(a,b){if(a.layout_num<b.layout_num){return-1}else if(a.layout_num>b.layout_num){return 1}else{return 0}},
cp=function(a,b){return gr(a.If,b.If)},bp=function(a,b){if(a.am<b.am){return-1}else if(a.am==b.am){return 0}else{return 1}};function Od(a){this.Gc=a;this.Ml=false;this.Bv=this.Cv.bind(this);this.aa=[]}Od.prototype.Nk=function(a){var b=a.first,c=a.last,d=a.mid;a.t0=ya();a.x0.length=(a.x1.length=c-b);var e=this.Gc.slide;for(var f=b;f<c;f++){var g=f-b,h=parseInt(e[f].Va().style.left,10);a.x0[g]=h;if(d>=0){a.x1[g]=f<d?-10:10}else{a.x1[g]=0}}};Od.prototype.WB=function(a,b,c){var d=a*c,e=d+b;if(this.aa.length){var f=this.aa[0];if(f.first==d){if(f.mid!=e){f.mid=e;this.Nk(f);this.Mn()}return}else{if(f.mid>=0){f.mid=-1;this.Nk(f)}for(var g=
1;g<this.aa.length;g++){var h=this.aa[g];if(h.first==d){this.aa.splice(g,1);this.aa.unshift(h);this.Nk(h);this.Mn();return}}}}var i=Math.min(d+c,this.Gc.slide.length),a={first:d,last:i,mid:e,x0:[],x1:[],t0:-1};this.Nk(a);this.aa.unshift(a);this.Mn()};Od.prototype.Mn=function(){if(!this.Ml){this.Ml=true;Vf(this.Bv)}};Od.prototype.at=function(){if(this.Ml){this.Ml=false;Mi(this.Bv)}};Od.prototype.reset=function(){var a=this.Gc.slide;while(this.aa.length){var b=this.aa.pop(),c=b.first+b.x0.length;for(var d=
b.first;d<c;d++){a[d].Va().style.left="0"}}this.at()};Od.prototype.Cv=function(a){var b=this.Gc.slide,c=false;for(var d=this.aa.length-1;d>=0;d--){var e=this.aa[d];if(e.t0<0)continue;c=true;var f=a-e.t0;if(f<100){var g=f/100;for(var h=0;h<e.x0.length;h++){b[e.first+h].Va().style.left=e.x0[h]+(e.x1[h]-e.x0[h])*g+"px"}}else{for(var h=0;h<e.x1.length;h++){b[e.first+h].Va().style.left=e.x1[h]+"px"}e.t0=-1;if(e.mid==-1)this.aa.splice(d,1)}}if(!c)this.at()};function Y(a,b,c){this.g=q("div");this.Zw=q("div");this.Zw.className="lhcl_tableEnd";a.appendChild(this.g);a.appendChild(this.Zw);this.YE=new Bd(this,a);this.NA=new Od(this);this.Oa=[];this.td=null;this.slide=[];this.le=this.Ed.bind(this);this.me=this.ra.bind(this);this.Sg=this.Ea.bind(this);o(m("reorder"),this.qn.bind(this));o(m("copyToAlbum"),this.mw.bind(this));o(m("moveToAlbum"),this.Fz.bind(this));o(m("deleteSelected"),this.Fw.bind(this));o(m("sortSlides"),this.Vz.bind(this));this.hD=b;this.Nw=
c;this.gm(true)}Y.prototype.wv=function(a,b,c,d,e){c+="?crop=1&imgmax=64";var f=new Pc(this,this.slide.length,a,b,c,d,e);this.slide.push(f);this.g.appendChild(f.Va())};Y.prototype.Ly=function(a,b){b.sort(dp);if(a>=this.slide.length){for(var c=0;c<b.length;c++){this.slide.push(b[c]);this.g.appendChild(b[c].Va())}}else{var d=this.g.childNodes[a];for(var c=0;c<b.length;c++){this.g.insertBefore(b[c].Va(),d);this.slide.splice(a,0,b[c]);a++}}for(var c=0;c<this.slide.length;c++){this.slide[c].layout_num=
c}};Y.prototype.Jq=function(){return Hp(this.Oa,function(a){return a.iid})};Y.prototype.JA=function(a){var b=Sb(),c=a.clientX+b.scrollLeft,d=a.clientY+b.scrollTop,e=this.Aj(c,d,true),f=e.index;for(var g=this.slide.length-1;g>=0;g--){var h=this.slide[g];if(h.selected){this.slide.splice(g,1);h.remove();if(g<f)f--}}this.Ly(f,this.Oa)};Y.prototype.cm=function(){while(this.Oa.length){this.Ye(this.Oa.pop(),false)}};Y.prototype.Ye=function(a,b,c){od(this.Oa,a);if(b){if(c){this.Oa.unshift(a)}else{this.Oa.push(a)}}a.select(b);
if(this.Oa.length<2){this.gm(this.Oa.length==0)}};Y.prototype.jy=function(a,b,c){if(qi(qg,"Mac")){c=b;b=false}if(b){if(this.Oa.length){var d=this.Oa[0].layout_num,e=a.layout_num;if(!c)this.cm();if(d<e){for(var f=d;f<=e;f++){this.Ye(this.slide[f],true)}}else{for(var f=d;f>=e;f--){this.Ye(this.slide[f],true)}}}else{this.Ye(a,true)}}else if(c){this.Ye(a,!a.selected,true)}else{this.cm();this.Ye(a,true)}};Y.prototype.fy=function(a,b,c,d,e){if(this.td)z(this.td);var f=pa(a.Va());this.Qi=b;this.Ri=c;this.Op=
f.x+d;this.km=f.y+e;var g=N('<div style="position:absolute;left:{x}px;top:{y}px"><div class="lhcl_slideImage" style="background-image:url({src})"></div></div>',{x:this.Op,y:this.km,src:a.src});wd(g.firstChild,0.5);document.body.appendChild(g);if(this.Oa.length>1){var h=q("div");h.className="lhcl_draginfo";g.appendChild(h);h.innerHTML=xo(this.Oa.length-1)}n(document,"mousemove",this.le);n(document,"mouseup",this.me);n(document,"mouseout",this.Sg);this.xz=document.documentElement.scrollHeight-Pd();
this.td=g};Y.prototype.Ed=function(a){var b=a.clientX,c=a.clientY,d=b-this.Qi,e=c-this.Ri;this.Kr(d,e);var f=Sb(),g=b+f.scrollLeft,h=c+f.scrollTop,i=this.Aj(g,h,true);this.NA.WB(i.row,i.col,i.rowLength);var j=Pd(),l=0;if(c<40){l=c-40}else if(j-c<40){l=40-(j-c)}if(l){l=2000*(l/40);l=Ic(l,-2000,2000)}this.Rl(l)};Y.prototype.Ea=function(a){if(!a.relatedTarget)this.Rl(0)};Y.prototype.Kr=function(a,b){this.td.style.left=this.Op+a+"px";this.td.style.top=this.km+b+"px"};Y.prototype.ra=function(a){D(document,
"mousemove",this.le);D(document,"mouseup",this.me);D(document,"mouseout",this.Sg);this.NA.reset();this.JA(a);this.Rl(0);if(this.td)z(this.td);this.td=null};Y.prototype.Rl=function(a){if(a==0){if(this.Hk){Mi(this.Hk);this.Hk=null}}else{this.pE=a;if(!this.Hk&&this.xz>0){this.Zy=ya();this.Hk=this.QA.bind(this);Vf(this.Hk)}}};Y.prototype.QA=function(a){var b=(a-this.Zy)*0.0010;this.Zy=a;var c=this.pE*b,d=Sb(),e=d.scrollTop;if(c!=0){d.scrollTop=Ic(e+c,0,this.xz);if(this.td){var f=this.td.offsetLeft-this.Op,
g=this.td.offsetTop-this.km;this.km+=d.scrollTop-e;this.Kr(f,g)}}};Y.prototype.MA=function(){if(this.slide.length==0)return 0;var a=this.g.offsetWidth,b=Math.floor(a/this.slide[0].Va().offsetWidth);return Math.max(b,1)};Y.prototype.Aj=function(a,b,c){var d=0,e=0,f=this.MA();if(f>0){var g=this.slide[0].Va(),h=g.offsetWidth,i=g.offsetHeight,j=pa(g),l=Math.max(a-j.x,0),p=Math.max(b-j.y,0);if(c)l+=h/2;var s=Math.floor((this.slide.length-1)/f);d=Math.min(Math.floor(p/i),s);var y=d!=s?f:this.slide.length%
f||f;e=Math.min(Math.floor(l/h),y)}var t=d*f+e;return{index:t,row:d,col:e,rowLength:f}};Y.prototype.Ls=function(a){this.qn();var b=this.Jq();if(b.length>100){alert(kh(b.length,100));return}this.Ih(true);this.Ts(false);new xa(a,b,this.aw.bind(this))};Y.prototype.aw=function(){this.Ih(false);this.Ts(true)};Y.prototype.Ts=function(a){var b=Qh("select");for(var c=0;c<b.length;c++){b[c].style.visibility=a?"":"hidden"}};Y.prototype.mw=function(){this.Ls(3)};Y.prototype.Fz=function(){if(!_album.blogger||
confirm("Are you sure you want to move these photos? They will no longer appear in your blog if you move them.")){this.Ls(4)}};Y.prototype.Fw=function(){this.qn();this.Ih(true);if(!confirm(_album.blogger?"Are you sure you want to delete the selected photos? They will no longer appear in your blog if you delete them.":go("\n\n"))){this.Ih(false);return}var a=["noredir=true","optgt=DELETE","aid="+_album.id,"selectedphotos="+this.Jq()];document.body.style.cursor="wait";L.Ga(_selectedPhotosPath,this.Dw.bind(this,
this.Oa.length),a.join("&"))};Y.prototype.Dw=function(a,b){if(b.status>=400||b.text.indexOf("success")<0){alert(ih);document.body.style.cursor="";return}if(a>=this.slide.length){location.href=_album.link}else{location.reload()}};Y.prototype.qn=function(a){if(a)this.Ih(true);var b=Infinity,c=-1;for(var d=0;d<this.slide.length;d++){if(this.slide[d].old_layout!=d){b=d;break}}for(var d=this.slide.length-1;d>b&&d>0;d--){if(this.slide[d].old_layout!=d){c=d+1;break}}var e=[],f=Infinity,g=-1;for(var d=b;d<
c;d++){var h=this.slide[d];e.push(h.iid);f=Math.min(f,h.old_layout);g=Math.max(g,h.old_layout)}if(e.length){var i=["aid="+_album.id,"uname="+Xc(_authuser.name),"start="+f,"stop="+g,"iids="+e.join(",")];L.Ga(_reorderPath,Yb(this,this.KA,a),i.join("&"))}else{if(a){document.location=a}}};Y.prototype.KA=function(a,b){if(b.status>=400||b.text.indexOf("success")<0){alert(ih);return}if(a){document.location=a}};Y.prototype.Ih=function(a){this.hD.disabled=a;this.gm(a)};Y.prototype.gm=function(a){if(this.Oa.length==
0)a=true;for(var b=0;b<this.Nw.length;b++){this.Nw[b].disabled=a}};Y.prototype.Xs=function(a){this.slide.sort(a);for(var b=0;b<this.slide.length;b++){var c=this.slide[b];c.remove();this.g.appendChild(c.Va());c.layout_num=b}};Y.prototype.Vz=function(a){if(a.value=="name"){this.Xs(cp)}else if(a.value=="date"){this.Xs(bp)}a.value="default"};var tf={},Zl=[],dm=true,Cd=[];function bm(a,b,c,d){d.className="transnote";if(tf[a]){tf[a].push(d)}else{tf[a]=[d]}Zl.push(d);if(!dm){d.style.display="none"}d.onclick=function(e){if(!e){e=window.event}e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}am(a,b,c);return false}}function am(a,b,c){var d=tf[a],e;for(e=0;e<d.length;e++){d[e].className="transnoteviewed"}window.open("http://www.google.com/transconsole/context?project="+c+"&msg_id="+a+"&lang="+b,"","width=800, height=600, resizable=1, scrollbars=1")}
function $l(a,b,c){var d=document.createElement("span");d.innerHTML="[TC]";bm(a,b,c,d);return d}function sf(a,b,c){this.docId=a;this.lang=b;this.proj=c}function cm(a){for(var b=0;b<Cd.length;b++){var c=Cd[b],d=$l(c.docId,c.lang,c.proj);if(a.nextSibling){a.parentNode.insertBefore(d,a.nextSibling)}else{a.parentNode.appendChild(d)}}Cd=[]}function Fg(a,b){var c,d=[];for(c=a.firstChild;c;c=c.nextSibling){d.push(c)}for(var e=0;e<d.length;e++){c=d[e];if(c.nodeType==3){var f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.data);
while(f){c.data=c.data.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,"");Cd.push(new sf(f[1],f[2],f[3]));f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.data)}}else if(c.nodeType==1){var g=c.tagName.toLowerCase();switch(g){case "input":var h=c.type.toLowerCase();if(h=="button"||h=="submit"||h=="reset"){f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.value);while(f){c.value=c.value.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,
"");Cd.push(new sf(f[1],f[2],f[3]));f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.value)}}break;case "script":var f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.text);while(f){c.text=c.text.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,"");Cd.push(new sf(f[1],f[2],f[3]));f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.text)}break;case "img":var f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.alt);
while(f){c.alt=c.alt.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,"");c.title=c.title.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,"");Cd.push(new sf(f[1],f[2],f[3]));f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.alt)}break;case "a":Fg(c,b+1);break;default:Fg(c,b);break}}if(!b){cm(c)}}}function Xi(){Fg(document.body,0);window.setTimeout(Xi,500)};function Tf(a,b){U.call(this,"lhcl_menu");this.kl=1000;this.Ud=a;this.ok=b;this.rF=false;this.zs(this.Ud,3);Bb(this.wg);this.wg=n(this.ok,na,this.Wg.bind(this));n(this.ok,"dblclick",this.zw,false,this)}Tf.D(U);Tf.prototype.Wg=function(a){U.prototype.Wg.call(this);a.preventDefault()};Tf.prototype.zw=function(){if(this.Bb){this.da(false)}};var Ne=function(a){ub.call(this,Va(a));this.Yc=false};Ne.D(ub);Ne.prototype.Rf=function(a){this.Yc=a;if(this.b){this.Li()}};Ne.prototype.Li=function(){if(!this.b){return}if(this.Yc){fa(this.b,
"lhcl_active")}else{qa(this.b,"lhcl_active")}};Ne.prototype.Zd=function(){if(!this.Cd){throw Error("MenuItem is not attached to a menu");}this.b=Ia("div",{className:this.Cd.vq()},this.Ha,this.Tc?Ia("span",null,"\u25b6"):null);this.b.onselectstart=function(){return false};return this.b};function Wb(a){Nb.call(this);var b=a.query,c=null;this.aa=[];for(var d in a){if("primary"==d||"query"==d){continue}this.aa.push(a[d])}this.cc=k("lhid_searchbox");this.FF=k("lhid_searchform");this.mn=k("lhid_querytext");
this.Yf=!ze(Wc(b));this.EF=k("lhid_searchbox_context");this.qE=k("lhid_psc");this.rE=k("lhid_crowdfilter");this.ok=k("lhid_btn");var e=k("lhid_searchanchor");if(!e){e=k("lhid_searchanchor_on")}this.Cd=new Tf(e,this.ok);this.cc.value=Va(b);this.mn.value=this.Yf?this.cc.value:"";var f=null;for(var g=0;g<this.aa.length;++g){var d=this.aa[g],h=d.name;d.name=h;var i=null;if(h=="-"){i=new Ai}else{i=new Ne(h);i.bf(d)}this.Cd.add(i);if(d.is_primary){i.Rf(true);this.xa=i;c=d}i.Li();if("G"==d.search_corpus){f=
i}}this.ta(this.Cd,Ci,this.NB,true,this);this.ta(this.cc,na,this.pp,true,this);this.ta(this.cc,"focus",this.pp,true,this);this.ta(this.cc,"keyup",this.Mm,true,this);this.ta(this.cc,sc,this.Mm,true,this);this.ta(this.cc,"change",this.Mm,true,this);this.ta(this.cc,"blur",this.it,true,this);this.ta(document,"selectstart",this.SA,true,this);if(f){this.bf(f)}else{var j=c?c.search_corpus:"G",l=c?c.name:Qf;this.ec(j,l)}}Wb.D(Nb);Wb.prototype.j=function(){if(this.Ab())return;Nb.prototype.j.call(this)};Wb.prototype.SA=
function(a){if(this.Cd.Bb){a.preventDefault()}};Wb.prototype.NB=function(a){this.bf(a.item)};Wb.prototype.pp=function(){this.cc.focus();if(!this.Yf){this.cc.value="";this.mn.value="";qa(this.cc,"lhcl_nosearch")}};Wb.prototype.Mm=function(a){var b=Wc(this.cc.value),c=ze(b);this.mn.value="";if(this.Yf&&c){this.Yf=false}else{this.Yf=!c;if(this.Yf){this.mn.value=b}}};Wb.prototype.it=function(){if(!this.Yf){fa(this.cc,"lhcl_nosearch");var a=this.xa.tb().name;if(a){a=Va(a);this.cc.value=a}}else{qa(this.cc,
"lhcl_nosearch")}};Wb.prototype.bf=function(a){if(this.xa){this.xa.Rf(false)}a.Rf(true);this.xa=a;var b=this.xa.tb();this.ec(b.search_corpus,b.name)};Wb.prototype.ec=function(a,b){this.VE=a;var c=vo(b);this.ok.title=c;if(!this.Yf){this.cc.value=Va(b)}this.qE.value=a;this.rE.value="G"==a?1:0;this.it()};function H(a,b,c,d,e){Na(a,"element passed to DP_DatePicker constructor is null");this.g=a;this.Da=c?c:this.g.id+"_";this.ba=d?d:"DP_";xf[this.Da]=this;if(e){ad(e,wb,"opt_today is not an ICAL_Date");this.Wf=e}else{this.Wf=fn()}this.sg=xb(this.Wf.q,this.Wf.o,1);this.Bj=0;this.lD=!(!b);this.kt=false;this.uA=null;this.Kz=null;this.oj={};this.Ig={};this.Wj={};this.Ca={};this.xg=null;this.fk=null;this.ZA=new Kd(this);this.QD=new Kd(this);this.Us=false;this.Bb=false;this.Fc=new cd;this.Tg=0;this.bm=null;
this.Aw=null;this.vE=true;this.is=null;this.Bp=null;this.Mr=null;this.ui();this.yE=false;this.EB(0);this.cB(0);this.er=false;this.Dj=null;this.Lb=null;this.Je=null;this.xi=null;this.wi=null;this.Yy=null;this.Zj=false;this.BC=null;this.AC=null;var f=this,g=function(h){var i=h.startDate,j=h.endDate,l;if(!i){l=Ee[this.Bi]}else if(!j||i.equals(j)){l="Selected: "+f.rm(i,true)}else{l="Selected: "+f.rm(i)+" - "+f.rm(j)}f.xA(l)};if(this.Us)this.Yo(g);this.LD=new Kd(this)}var Ee={};Ee[0]="Select a date";Ee[1]=
"Select a range of dates";Ee[2]="Select dates";Ee[3]="&nbsp;";H.prototype.cB=function(a,b){if(a!=0&&a!=1&&a!=7&&a!=30&&a!=-1&&!(b instanceof Function)){throw new Error("Invalid click mode: "+a);}this.SC=a;this.ew=b};H.prototype.MB=function(a){if(a!=this.kt){this.kt=a;this.ui()}};H.prototype.jx=function(){return this.SC};H.prototype.EB=function(a){if(!(0<=a&&a<=3)){He("Invalid selection mode: "+a)}if(this.Bi==a){return}this.Bi=a;this.mg()};H.prototype.Am=function(){return this.Bi};H.prototype.show=
function(){this.Bb=true;this.ui()};H.prototype.hide=function(){this.g.innerHTML="";this.Bb=false};H.prototype.$a=function(){return this.Bb};H.prototype.Cm=function(){return hb(this.Da+"tbl")};H.prototype.mB=function(a){Na(0<=a&&a<=6,a+" not a valid first day of week");this.Bj=a;this.ui()};H.prototype.tq=function(){return this.Bj};H.prototype.BB=function(a){ad(a,Function);this.is=a};H.prototype.eB=function(a){ad(a,Function);this.Bp=a};H.prototype.vB=function(a){ad(a,Function);this.Mr=a};H.prototype.ui=
function(){if(!this.Bb){return}var a=this.Da,b,c=this.sg.o,d=this.sg.q,e=[c==1?12:c-1,c,c==12?1:c+1],f=xb(this.Wf.q,this.Wf.o,1),g=xg(d,c-1,1).Tb(),h=xg(d,c+1,1).Tb();if(this.is){e[0]=this.is(g)}else{var i=g.X()>=f.X()?"&laquo;":"&lsaquo;&nbsp;";e[0]=i+nb.MONTHS[e[0]]}if(this.Bp){e[1]=this.Bp(this.sg)}else{e[1]=nb.MONTHS[e[1]]+" "+d}if(this.Mr){e[2]=this.Mr(h)}else{var j=h.X()-f.X()<=0?"&raquo;":"&nbsp;&rsaquo;";e[2]=nb.MONTHS[e[2]]+j}var l=fd(d,c),p=fd(g.q,g.o),s=new Array(49),y=this.sg.mx()-this.Bj;
if(y<0)y+=7;if(l<30||y<5)y+=7;for(var t=0;t<y;++t){s[t]=xb(g.q,g.o,p-y+t+1)}for(var t=y,B=0;B<l;++t){s[t]=xb(d,c,++B)}for(var t=y+l,B=0;t<s.length;++t){s[t]=xb(h.q,h.o,++B)}this.BC=s[0];this.AC=s[s.length-1];var S=[],M=this.lD?[2,3,2]:[1,5,1];S.push('<table cols=7 cellspacing="0" cellpadding="3" id="',a,'tbl"',' class="',this.ba,'monthtable" ',' style="-moz-user-select:none; cursor:pointer;">','<tr class="',this.ba,'heading" id="',a,'header">',"<td colspan=",M[0]," unselectable=on",' onmousedown="'+
Ng(rm)+"(",xh(this.Da),')"',' id="',a,'mhl" class="',this.ba,'prev">',e[0],"</td>","<td colspan=",M[1],' unselectable="on"',' id="',a,'mhc" class="',this.ba,'cur">',e[1],"</td>","<td colspan=",M[2],' unselectable="on"',' onmousedown="'+Ng(qm)+"(",xh(this.Da),')"',' id="',a,'mhr" class="',this.ba,'next">',e[2],"</td>","</tr>");if(this.kt){S.push('<tr class="',this.ba,'days" id="',a,'dow">');for(var t=0;t<nb.NARROWWEEKDAYS.length;++t){S.push('<td unselectable="on"',' class="',this.ba,'dayh" id="',a,
"day_",t,'">',nb.NARROWWEEKDAYS[(t+this.Bj)%7],"</td>")}S.push("</tr>")}var kc=(7-this.Bj)%7,Lc=(kc+6)%7;this.oj={};var b=null,Aa=null,Vg=Ng(pm);for(var t=0,B=-1;t<7;++t){S.push('<tr id="',a,"week_",t,'">');for(var lc=0;lc<nb.WEEKDAYS.length;++lc){++B;var Df=this.Fc.contains(s[B]);Aa=[];if(t==0)Aa.push(this.ba+"day_top");if(lc==0)Aa.push(this.ba+"day_left");else if(lc==6)Aa.push(this.ba+"day_right");Aa.push(this.ba+"week"+(lc==kc||lc==Lc?"end":"day")+(Df?"_selected":""));if(B<y||B>=y+l){Aa.push(this.ba+
"offmonth");if(s[B].A<=7){Aa.push(this.ba+"month_top");if(s[B].A==1&&lc!=0){Aa.push(this.ba+"month_left")}}}else{Aa.push(this.ba+"onmonth");if(s[B].A<=7){Aa.push(this.ba+"month_top");if(s[B].A==1&&lc!=0){Aa.push(this.ba+"month_left")}}if(s[B].A==this.Wf.A&&c==this.Wf.o&&d==this.Wf.q){Aa.push(this.ba+"today"+(Df?"_selected":""))}}var Fd="";if(this.Aw){var Mc=this.Aw(s[B]);if(Mc){Fd=' style="'+Mc+'"'}}S.push('<td id="',a,"day_",t,"_",lc,'"',' class="',Aa.join(" "),'"',Fd,' onclick="',Vg,'(this)"',' unselectable="on">',
s[B].A,"</td>")}S.push("</tr>")}if(this.Us){S.push('<tr class="',this.ba,'months">','<td colspan="7" id="',a,'sel"></td></tr>')}S.push("</table>");this.g.innerHTML=S.join("");this.xg=hb(a+"day_0_0");this.fk=hb(a+"day_6_6");var b=this.xg,Ub=b.parentNode,Gd=null,Ef=null,B=-1,Je=-1;while(Ub!=null){++Je;if(Je==7)break;var Ff=-1;while(b!=null){++B;++Ff;var Wg=a+"day_"+Je+"_"+Ff;this.Ca[Wg]=s[B];this.oj[s[B].toString()]=b;this.Wj[Wg]=Gd;if(Gd)this.Ig[Ef]=b;Gd=b;Ef=Wg;b=b.nextSibling}Ub=Ub.nextSibling;if(Ub!=
null){b=Ub.firstChild}}this.Tg=7;if(!this.vE){var kn=hb(a+"week_4"),zj=hb(a+"week_5"),Xg=hb(a+"week_6");if(this.Ca[a+"day_4_0"].o!=c){kn.style.display="none";zj.style.display="none";Xg.style.display="none";this.Tg=4}else if(this.Ca[a+"day_5_0"].o!=c){zj.style.display="none";Xg.style.display="none";this.Tg=5}else if(this.Ca[a+"day_6_0"].o!=c){Xg.style.display="none";this.Tg=6}}this.uA=g;this.Kz=h;if(this.bm){this.bm.call(null,this)}this.sv()};H.prototype.refresh=function(){if(this.bm){this.bm.call(null,
this)}};H.prototype.Yo=function(a){return this.ZA.add(a)};H.prototype.mg=function(a){a=arguments.length===0||a;var b=this.Fc.Nl();for(var c=0;c<b.length;++c){var d=this.oj[b[c].toString()];this.$e(d,false)}this.Fc.clear();if(!this.Zj){this.Ds(null);this.wn(null)}if(a)this.rf()};H.prototype.np=function(a){if(this.ew){this.ew.call(null,a);return}var b=hb(a),c=this.Fc;switch(this.Bi){case 1:var d=this.jx();if(d==0)break;if(d!=1&&(d!=-1||!c.contains(this.Ca[a]))){var e=this.Ca[b.id],f;switch(d){case -1:if(c.getSize()>
7&&this.dk()){var g=b.id.substr(b.id.length-3,1);e=this.Ca[this.Da+"day_"+g+"_0"]}f=c.getSize()-1;break;case 7:var g=b.id.substr(b.id.length-3,1);e=this.Ca[this.Da+"day_"+g+"_0"];f=6;break;case 30:e=this.Ca[b.id];e=xb(e.q,e.o,1);var h=mf(e);f=fd(e.q,e.o)-1;break;default:He("Invalid click mode: "+d)}Na(typeof f!="undefined","duration should have been defined");var h=mf(e);h.A+=f;var i=h.Tb();this.oe(e,i);return}Na(d==1||d==-1&&c.contains(this.Ca[a]),"not a case for single date selection");this.mg(false);
case 0:if(c.getSize()>0){var j=c.Nl()[0];c.remove(j);var l=this.oj[j.toString()];if(l)this.$e(l,false)}c.add(this.Ca[b.id]);this.$e(b);this.rf(this.Ca[b.id]);break;case 2:break;case 3:default:break}};H.prototype.Ds=function(a){this.Lb=a;this.xi=a?this.Ca[a.id]:null};H.prototype.wn=function(a){this.Je=a;this.wi=a?this.Ca[a.id]:null};H.prototype.Ey=function(){return this.Zj};H.prototype.Gb=function(a,b){this.mg(false);this.Zj=true;this.Ds(this.xj(a));var c=this.Ca[this.Lb.id];this.Fc.add(c);this.$e(this.Lb);
this.oe(c);this.wn(this.Lb)};H.prototype.Nh=function(a,b,c){this.Zj=false;this.Je=this.xj(a);if(this.dk()){this.rf(this.xi,this.wi,false);return}var d,e;if(this.Ca[this.Je.id].X()<this.Ca[this.Lb.id].X()){d=this.Ca[this.Je.id];e=this.Ca[this.Lb.id]}else{d=this.Ca[this.Lb.id];e=this.Ca[this.Je.id]}this.rf(d,e,false)};H.prototype.fd=function(a,b,c,d){this.Yy=Yi(a);if(this.Bi!=1||this.er)return;this.er=true;var e=this;window.setTimeout(function(){try{if(e.Zj){e.Xw.call(e,b,c,d)}}finally{e.er=false}},
50)};H.prototype.dk=function(){return this.yE};H.prototype.Xw=function(a,b,c){var d=this.Yy,e=this.xj(d);if(e===this.Je)return;var f=this.Je;this.wn(e);Na(f!=e);var g=this.Ca,h=g[f.id].X()<g[e.id].X(),i=g[f.id].X()<g[this.Lb.id].X(),j=g[e.id].X()<g[this.Lb.id].X(),l=g[this.Lb.id].X()<g[e.id].X(),p=g[this.Lb.id].X()<g[f.id].X(),s,y,t,B,S=j?this.Je:this.Lb,M=j?this.Lb:this.Je;if(this.dk()){var kc=vj(g[M.id],g[S.id]);if(kc>=7){var Lc,Aa;Lc=parseInt(S.id.charAt(S.id.length-3),10);Aa=parseInt(M.id.charAt(M.id.length-
3),10);S=hb(this.Da+"day_"+Lc+"_0");M=hb(this.Da+"day_"+Aa+"_6")}this.Tf(this.xg,S,false);this.Tf(M,this.fk,false);this.Tf(S,M,true);this.xi=g[S.id];this.wi=g[M.id]}else{if(h){if(i){y=j?this.Wj[e.id]:this.Wj[this.Lb.id];this.Tf(f,y,false)}if(l){s=p?this.Ig[f.id]:this.Ig[this.Lb.id];this.Tf(s,e,true)}}else{if(p){s=l?this.Ig[e.id]:this.Ig[this.Lb.id];this.Tf(s,f,false)}if(j){y=j?this.Wj[this.Lb.id]:this.Wj[f.id];this.Tf(e,y,true)}}}t=g[S.id];B=g[M.id];this.rf(t,B,true)};H.prototype.Tf=function(a,b,
c){Na(a);Na(b);ad(c,Boolean);var d=false;while(a){if(c){d=this.Fc.add(this.Ca[a.id])}else{d=this.Fc.remove(this.Ca[a.id])}if(d){this.$e(a,c)}if(a.id===b.id)break;a=this.Ig[a.id];Na(a,"did not find endCell: "+b.id)}};var gj={4:"day_3_6",5:"day_4_6",6:"day_5_6",7:"day_6_6"};H.prototype.Fv=function(a,b){if(!this.Dj)return;if(b){a.x-=this.Dj.x;a.y-=this.Dj.y}else{a.x+=this.Dj.x;a.y+=this.Dj.y}};H.prototype.xj=function(a){var b=gc(this.xg),c=this.Vx(),d=dd(a);this.Fv(d);var e=7,f=this.aq(c.x,b.w,e,d.x),
g=this.aq(c.y,b.h,this.Tg,d.y);return hb(this.Da+"day_"+g+"_"+f)};H.prototype.aq=function(a,b,c,d){if(d<a)return 0;var e=Math.floor((d-a)/b);return e>=c?c-1:e};H.prototype.Vx=function(){var a=this.Da,b=this.Tg,c=gc(this.xg),d=gc(hb(a+gj[b]));return new Oc(c.x,c.y,d.x+d.w-c.x,d.y+d.h-c.y,c.coordinateFrame)};H.prototype.rm=function(a,b){return nb.MONTHS[a.o]+" "+a.A};H.prototype.rf=function(a,b,c){var d={};d.startDate=a;d.endDate=b||a;d.Ey=!(!c);d.mode=this.Am();this.ZA.fireEvent(d)};H.prototype.ap=
function(a){if(a instanceof wb)return a;if(a instanceof Ga){return xb(a.q,a.o,a.A)}else{Na(false,"Invalid arg: "+a)}};H.prototype.oe=function(a,b,c){var d=this.Am();c=c!==false;if(a)a=this.ap(a);if(b)b=this.ap(b);if(a)this.Ns(a);if(!a||d==3){this.mg(c);return}if(d==0){this.mg(false);var e=this.oj[a.toString()];this.Fc.add(a);this.$e(e);if(c)this.rf(a)}else if(d==1){if(!b)b=a;var f=vj(b,a),g=false;if(this.dk()&&f>=7){var h=Tg(a)+7,i=Tg(b)+7;h=(h-this.tq())%7;i=(i-this.tq())%7;var j;j=xg(a.q,a.o,a.A-
h);a=j.Tb();j=xg(b.q,b.o,b.A+(6-i));b=j.Tb();g=this.Ns(a)}if(g){this.mg(false)}var e=this.xg;this.xi=a;this.wi=b;var l=this.fk,p=a.X(),s=b.X();for(;e;e=this.Ig[e.id]){var y=this.Ca[e.id],t=this.Fc.contains(y),B=y.X()>=p&&y.X()<=s;if(t!=B){if(B){this.Fc.add(y);this.$e(e)}else{this.Fc.remove(y);this.$e(e,false)}}if(e===l)break}if(!e){l=this.fk;var j=mf(this.Ca[this.fk.id]),S=null;do{j.A+=1;S=j.Tb();this.Fc.add(S)}while(!S.equals(b))}if(c)this.rf(a,b)}};H.prototype.Kn=function(a,b){if(this.sg.o==a.o&&
this.sg.q==a.q)return false;b=arguments.length==1||b;this.sg=xb(a.q,a.o,1);this.ui();if(b)this.QD.fireEvent();return true};H.prototype.Ns=function(a,b){if(a.X()>=this.BC.X()&&a.X()<=this.AC.X()){return false}return this.Kn(a,b)};H.prototype.getSelection=function(){switch(this.Am()){case 0:if(this.Fc.getSize()){return this.Fc.Nl()[0]}else{return null}case 1:var a=this.xi?this.xi:null,b=this.wi?this.wi:null;if(!a||!b)return null;return[a,b];case 2:return null;case 3:default:return null}};H.prototype.xA=
function(a){if(this.Us){hb(this.Da+"sel").innerHTML=a}};H.prototype.$e=function(a,b){if(!a)return;if(!Ie(b))b=true;var c=[],d=[],e=" "+a.className+" ",f=" "+this.ba;if(b){if(-1!=e.indexOf(f+"today ")){c.push(f+"today ");d.push(f+"today_selected ")}if(-1!=e.indexOf(f+"weekday ")){c.push(f+"weekday ");d.push(f+"weekday_selected ")}else if(-1!=e.indexOf(f+"weekend ")){c.push(f+"weekend ");d.push(f+"weekend_selected ")}}else{if(-1!=e.indexOf(f+"today_selected ")){d.push(f+"today ");c.push(f+"today_selected ")}if(-1!=
e.indexOf(f+"weekday_selected ")){d.push(f+"weekday ");c.push(f+"weekday_selected ")}else if(-1!=e.indexOf(f+"weekend_selected ")){d.push(f+"weekend ");c.push(f+"weekend_selected ")}}for(var g=0;g<c.length;++g){e=e.replace(c[g],d[g])}if(c.length!=0){a.className=e}};var xf={};function rm(a){var b=xf[a];return b.Kn(b.uA)}function qm(a){var b=xf[a];return b.Kn(b.Kz)}function pm(a){var b=a.id,c=b.match(/(.*)day_\d+_\d+/),d=xf[c[1]];return d.np(b)};H.prototype.sv=function(){if(this.ED===true)return;this.ED=
true;var a=this.Da,b=this,c=this.g;om(function(d){if(b.Bi==1&&d===c){var e=new vb(d);e.escapedStartPoint=false;e.Gb=function(f,g){var h=dd(f),i=gc(b.xg),j=gc(hb(a+gj[b.Tg]));if(h.x<i.x||h.x>=j.x+j.w||h.y<i.y||h.y>=j.y+j.h)return false;this.startPoint=h.fa();this.startEvent=f;var l=hb(a+"lasso");if(!l){l=document.createElement("div");l.id=a+"lasso";l.style.position="absolute";l.style.display="none";document.body.appendChild(l)}ia=5;ba=3;r=l;return true};e.fd=function(f,g,h,i){if(!this.escapedStartPoint){var j=
Ym(this.startPoint,dd(f));if(j>5){this.escapedStartPoint=true;b.Gb.call(b,this.startEvent,g)}else{return true}}b.fd.apply(b,arguments);return true};e.Nh=function(f,g,h){if(this.escapedStartPoint){b.Nh.apply(b,arguments)}else{if(this.startPoint){var i=b.xj(this.startEvent).id;b.np.call(b,i)}}return true};return e}else{return undefined}})};H.prototype.log=function(){this.LD.fireEvent(arguments)};H.prototype.Fh=function(a){};function cd(){this.of={};this.za=0}cd.prototype.getSize=function(){return this.za};
cd.prototype.add=function(a){var b=this.Zn(a);if(b in this.of)return false;this.of[b]=a.Tb();++this.za;return true};cd.prototype.remove=function(a){var b=this.Zn(a);if(!(b in this.of))return false;delete this.of[b];--this.za;return true};cd.prototype.clear=function(a){this.of={};this.za=0};cd.prototype.contains=function(a){var b=this.Zn(a);return b in this.of};cd.prototype.Nl=function(){var a=new Array(this.getSize()),b=-1;for(var c in this.of)a[++b]=this.of[c];return a};cd.prototype.Zn=function(a){Na(a instanceof
wb||a instanceof Ga,"expected a date or datetime: "+a);return a.toString().substr(0,9)};function Kd(a){this.kE=a;this.Pe=[]}Kd.prototype.add=function(a){ad(a,Function);if(!a)return false;for(var b=0;b<this.Pe.length;++b){if(a===this.Pe[b])return false}this.Pe.push(a);return true};Kd.prototype.remove=function(a){if(!a)return false;for(var b=0;b<this.Pe.length;++b){if(a===this.Pe[b]){this.Pe.splice(b,1);return true}}return false};Kd.prototype.fireEvent=function(a){for(var b=0;b<this.Pe.length;++b){this.Pe[b].apply(this.kE,
arguments)}};Kd.prototype.getSize=function(){return this.Pe.length};function Pn(a){this.Hf=a;this.B=0;this.Yb=null};Pn.prototype.remove=function(){if(!this.Yb)throw new Error("no current element!");this.Hf.remove(this.Yb);this.Yb=null;--this.B};function xa(a,b,c){K.Sa(this);this.Pa=a;var d={body_id:m("dlg"),toggle_id:m("toggle"),form_id:m("form"),submit_id:m("input"),cancel_id:m("input"),album_id:m("input"),title_id:m("input"),desc_id:m("input"),location_id:m("input"),dayselect:m("select"),monthselect:m("select"),yearselect:m("select"),albumlist:m("list"),datefunc:m("func"),choosefunc:m("func"),createfunc:m("func"),selectfunc:m("func"),onsubmit:m("func"),oncancel:m("func"),title:"Untitled Album",description:"",location:"",publicChecked:"checked",
privateChecked:"",uname:_user.name};switch(a){case 5:d.header="Edit album information";d.action=_editAlbumPath;d.dialog="updateAlbumDialog";d.redir="SAME_ALBUM";d.id=_album.id;d.title=_album.title;d.description=_album.description;d.location=_album.location;d.publicChecked=_album.unlisted?"":"checked";d.privateChecked=_album.unlisted?"checked":"";break;case 3:d.header=co(b.length);d.action=_copyOrMovePath;d.dialog="CopyOrMovePhotosDialog";d.selected=b.join(",");d.photoop="copy";d.uname=_user.name;
break;case 4:d.header=qo(b.length);d.action=_copyOrMovePath;d.dialog="CopyOrMovePhotosDialog";d.selected=b.join(",");d.photoop="move";break;case 0:d.header="Create a new album";d.action=_createAlbumPath;d.dialog="NewOrExistingDialog";d.dest="new";break;case 2:d.header="Upload Photos: Create Album";d.action=_createAlbumPath;d.dialog="NewOrExistingDialog";d.redir="upload";d.dest="new";break;case 1:default:d.header="Upload Photos: Create or Select Album";d.action=_createAlbumPath;d.dialog="NewOrExistingDialog";
d.redir="upload";d.dest="new";break}if(a==5||a==0||a==2)this.js=true;this.Ll=_album;this.e=d;this.gF=b;this.Kf=c;this.Oa=-1;this.Ua=q("div");this.Ua.className="lhcl_cover";document.body.appendChild(this.Ua);this.Wa();this.nc=this.Wa.bind(this);Qa(window,"resize",this.nc);window.scrollTo(0,0);Be();gb("hideVideo");this.g=N('<div class="lhcl_dialog"><form id="{form_id}" method="post" action="{action}" onsubmit="_d(\'{onsubmit}\'); return false"><input type="hidden" name="uname" value="{uname}" /><input type="hidden" name="dialogName" value="{dialog}" /><input type="hidden" name="redir" value="{redir}" /><input type="hidden" name="dest" value="{dest}" /><input type="hidden" name="photoop" value="{photoop}" /><input type="hidden" name="selectedphotos" value="{selected}" /><div class="lhcl_dialog_body"><h1>{header}</h1><div id="{toggle_id}"></div><div id="{body_id}"></div></div><div class="lhcl_buttons"><input type="submit" class="lhcl_default" id="{submit_id}" /><input type="button" id="{cancel_id}" value="Cancel" onclick="_d(\'{oncancel}\')" /></div></form></div>',
this.e);document.body.insertBefore(this.g,document.body.firstChild);o(this.e.oncancel,this.ma.bind(this));o(this.e.onsubmit,this.zu.bind(this));o(this.e.datefunc,this.Jo.bind(this));o(this.e.choosefunc,this.wo.bind(this));o(this.e.createfunc,this.ol.bind(this));o(this.e.selectfunc,this.Vi.bind(this));this.Gd=ib(this,this.ia);Qa(document,"keydown",this.Gd);if(_features.displaylanguage){Pm(nb);ij(nb)}if(_album&&_album.id&&a==1)this.wo();else this.ol()};xa.prototype.r=function(){K.Ta(this);if(this.e){x(this.e.oncancel);
x(this.e.onsubmit);x(this.e.datefunc);x(this.e.choosefunc);x(this.e.createfunc);x(this.e.selectfunc)}Xa(document,"keydown",this.Gd);Xa(window,"resize",this.nc);for(var a in this)this[a]=null};xa.prototype.ma=function(){if(this.g)z(this.g);if(this.Ua)z(this.Ua);if(this.Kf)this.Kf();this.r()};xa.prototype.ol=function(){this.jg=null;if(this.Pa==3||this.Pa==4)this.e.albumop="new";var a=k(this.e.submit_id);if(this.Pa==5){a.value="Save changes"}else if(this.Pa==0){a.value="Create"}else{a.value="Continue"}a.disabled=
false;this.Io(!_user.noalbums);var b=k(this.e.body_id),c=V('<a href="{link}">{link}</a>',_user);this.e.publicSearchable="";if(_features.globalsearch){this.e.public_desc=zo(c);if(_user.searchable){this.e.publicSearchable="_searchable"}}else{this.e.public_desc=yo(c)}xc(b,N(pn(_features.displaylanguage),this.e));var d=k(this.e.title_id);if(_album.blogger&&this.Pa==5){d.disabled=true;d=k(this.e.desc_id)}d.focus();d.select();if(!_features.displaylanguage){var e=this.Pa==5?zg(_album.datestring):new Date;
if(e==null){e=new Date}var f=e.getMonth(),g=e.getFullYear(),h=(new Date).getFullYear(),i,j=k(this.e.monthselect);j.innerHTML="";for(i=0;i<ke.length;i++){var l=q("option");j.appendChild(l);l.value=i;l.innerHTML=ke[i];if(i==f)l.selected=true}var p=k(this.e.yearselect);p.innerHTML="";for(i=1970;i<=h;i++){var s=q("option");p.appendChild(s);s.value=(s.innerHTML=i);if(i==g)s.selected=true}this.Jo()}else{this.bu()}};xa.prototype.wo=function(){this.Oa=-1;if(typeof L=="undefined"||!L.gg()){if(this.js){this.ma()}else{this.js=
true;this.ol()}return}if(this.Pa==3||this.Pa==4)this.e.albumop="existing";var a=k(this.e.submit_id);a.value="Select Album";a.disabled=true;this.Io(false);var b=k(this.e.body_id);xc(b,N(nn,this.e));if(this.Ib){this.to()}else{var c="/data/feed/back_compat/user/"+_user.name+"?alt=json&kind=album";L.Ga(c,this.Xt.bind(this))}};xa.prototype.Io=function(a){var b=k(this.e.toggle_id);if(this.js){b.innerHTML="";b.style.display="none"}else{b.style.display="";xc(b,N(a?qn:on,this.e))}};xa.prototype.Xt=function(a){var b=
L.no(a);if(!b){return}this.Ib=b.feed.entry;this.to()};xa.prototype.Jo=function(){var a=k(this.e.dayselect),b=k(this.e.yearselect).value,c=k(this.e.monthselect).value,d;if(a.value>=1){d=a.value}else{var e=this.Pa==5?zg(_album.datestring):new Date;if(e==null){e=new Date}d=e.getDate()}var f,g;for(g=31;g>0;g--){var h=new Date(b,c,g);if(h.getMonth()==c){f=g;break}}a.innerHTML="";for(g=1;g<=f;g++){var i=q("option");a.appendChild(i);i.value=(i.innerHTML=g);if(g==d)i.selected=true}};xa.prototype.to=function(){if(!this.Ib){return}var a=
k(this.e.albumlist);a.innerHTML="";var b=-1;for(var c=0;c<this.Ib.length;++c){var d=this.Ib[c];if(_album&&_album.id==d.gphoto$id.$t){if(this.Pa==4||this.Pa==3){this.Ib.splice(c,1);c--;continue}b=c}var e=false;for(var f=0;f<d.link.length;f++){e|=d.link[f].rel=="edit"}if(!e){if(this.Pa==4||this.Pa==3||this.Pa==1){this.Ib.splice(c,1);c--;continue}}d.selectfunc=this.e.selectfunc;d.onsubmit=this.e.onsubmit;d.name=ga(d.title.$t);d.icon=d.photo$thumbnail.$t;if(d.rights.$t!="public"){d.access='<span class="lhcl_unlisted">Unlisted</span>'}else{d.access=
'<span class="lhcl_public">Public</span>'}d.num=c;a.appendChild(N('<table class="lhcl_fakelink" onmousedown="_d(\'{selectfunc}\', {num}); return false" ondblclick="_d(\'{onsubmit}\')" onselectstart="return false"><tr><td><img src="{icon}" width="32" height="32" /></td><td width="100%">{name}<br />{access}</td></tr></table>',d))}if(!this.Ib){return}if(b>=0)this.Vi(b)};xa.prototype.zu=function(){var a=k(this.e.form_id);if(!a)return;var b=k(this.e.title_id);if(b&&Wc(b.value)==""){alert("The title of your album must not be blank. Please enter a title.");
return}var c=k("lhid_datefield");if(c){var d=k(this.e.yearselect).value,e=parseInt(k(this.e.monthselect).value,10)+1,f=k(this.e.dayselect).value;c.value=e+"/"+f+"/"+d}var g=k(this.e.desc_id);if(g&&g.value.length>1000){alert(Ir(Un(g.value.length,1000),Vn(g.value.length,1000)));return}k(this.e.submit_id).disabled=true;k(this.e.cancel_id).disabled=true;if(this.Pa==1&&this.jg){location.href="/lh/webUpload?uname="+_user.name+"&aid="+this.jg}else{a.submit()}};xa.prototype.ia=function(a){if(this.Oa<0)return;
switch(a.keyCode){case 38:window.scrollTo(0,0);this.Vi(Math.max(this.Oa-1,0));Ad(a);break;case 40:window.scrollTo(0,0);this.Vi(Math.min(this.Oa+1,this.Ib.length-1));Ad(a);break}};xa.prototype.Vi=function(a){var b=k(this.e.albumlist);if(this.Oa>=0)b.childNodes[this.Oa].className="lhcl_fakelink";b.childNodes[a].className="lhcl_selected lhcl_fakelink";this.Oa=a;this.jg=this.Ib[a].gphoto$id.$t;k(this.e.album_id).value=this.jg;var c=k(this.e.submit_id);c.disabled=false;c.focus();c.parentNode.style.textAlign=
"right";var d=b.childNodes[this.Oa],e=d.offsetTop,f=e+d.offsetHeight,g=b.scrollTop,h=g+b.offsetHeight;if(e<g)b.scrollTop=Math.max(e-(f-e)*0.3,0);else if(f>h)b.scrollTop=e+(f-e)*1.3-(h-g)};xa.prototype.Wa=function(){var a=Math.max(document.body.offsetHeight,document.body.scrollHeight);a=Math.max(a,document.body.clientHeight);a=Math.max(a,document.documentElement.clientHeight);this.Ua.style.height=a+"px"};xa.prototype.bu=function(){this.sm=k("lhid_date");this.nA=k("lhid_dp");var a=this.Pa==5?zg(_album.datestring):
new Date;if(a==null){a=new Date}this.vc=Ak(a);var b=new H(this.nA,false,"lhid_dp_","DP_",this.vc);b.mB(_LH.calDay);b.MB(true);this.ul();this.Yi();$c(this.sm,"focus",this.iu.bind(this),false);$c(this.sm,"blur",this.hu.bind(this),false);b.Fh=this.ju.bind(this);b.Yo(this.ev.bind(this));b.eB(function(c){return fo(ke[c.o-1],c.q)});b.BB(function(c){return"&laquo;"});b.vB(function(c){return"&raquo;"});this.ad=b};xa.prototype.iu=function(){this.nA.style.display="";this.ad.show();Jo(this.ad);return true};
xa.prototype.hu=function(a){if(!this.ad.$a()){this.Zi();return true}var a=a||window.event,b=false;if(A){var c=gc(this.ad.Cm());b=c.contains(dd(a))}else{var d=a.explicitOriginalTarget;b=hn(this.ad.Cm(),d)}if(!b){this.ad.hide();this.Zi()}return true};xa.prototype.ju=function(a){if(!this.ad.$a()){this.Zi();return true}var b=gc(this.ad.Cm()),c=dd(a);if(!b.contains(c)){this.Zi();return true}return false};xa.prototype.ev=function(){var a=this.ad.getSelection();if(a){if(a.q<1970){alert(Lj);this.ad.oe(this.vc)}else{this.vc=
a;this.Yi();this.ul()}this.ad.hide()}};xa.prototype.Zi=function(){var a=this.sm.value,b=new Date,c=Qm(3,a,0,b,null);if(c>0){if(b.getFullYear()<1970){alert(Lj);this.Yi()}else{this.vc=Ak(b);this.ad.oe(this.vc);this.ul()}}else{this.Yi()}};xa.prototype.ul=function(){k(this.e.dayselect).value=this.vc.A;k(this.e.monthselect).value=this.vc.o-1;k(this.e.yearselect).value=this.vc.q;k("lhid_datefield").value=this.vc.o+"/"+this.vc.A+"/"+this.vc.q};xa.prototype.Yi=function(){var a=new Date(this.vc.q,this.vc.o-
1,this.vc.A);this.sm.value=Kg(nb.DATEFORMATS[3],a,null)};var sn=function(){var a="";for(var b=0;b<ke.length;b++){if(ke[b].length>a.length){a=ke[b]}}return a};function Ak(a){return xb(a.getFullYear(),a.getMonth()+1,a.getDate())}var ke=["January","February","March","April","May","June","July","August","September","October","November","December"],rn='<select id="{monthselect}" name="dateMonth" onchange="_d(\'{datefunc}\')"><option>'+sn()+'</option></select> <select id="{dayselect}" name="dateDay"><option>00</option></select> <select id="{yearselect}" name="dateYear" onchange="_d(\'{datefunc}\')"><option>0000</option></select><input type="hidden" id="lhid_datefield" name="date" />',
pn=function(a){var b=[];{b.push("<div>")}b.push('<h2>Title</h2><input type="hidden" name="aid" value="{id}" /><input type="hidden" name="albumop" value="{albumop}" /><input type="text" class="lhcl_input" id="{title_id}" name="title" value="{title}" maxlength="100"/><h2>Date</h2><div style="position:relative;">'+(a?'<div><input id="lhid_date" class="lhcl_input" type="text" autocomplete="off" /></div><div id="lhid_dp" style="position:absolute;width:20em;"></div><input type="hidden" id="lhid_datefield" name="date" /><input type="hidden" id="{dayselect}" name="dateDay" /><input type="hidden" id="{monthselect}" name="dateMonth" /><input type="hidden" id="{yearselect}" name="dateYear" />':
rn)+'</div><h2>Description <em>(optional)</em></h2><textarea class="lhcl_input" name="description" id="{desc_id}">{description}</textarea><h2>Place Taken <em>(optional)</em></h2>');{b.push('<input type="text" class="lhcl_input" name="location" id="{location_id}" value="{location}" maxlength="100" />')}b.push('<div id="lhid_access"><p><input type="radio" name="access" value="public" id="lhid_publicaccess" {publicChecked} /> <label for="lhid_publicaccess"><span class="lhcl_public{publicSearchable}_label">Public</span></label> <em>(default)</em> &#8211; For albums you want to show publicly.</p><p class="lhcl_mini_text">{public_desc}</p><p><input type="radio" name="access" value="private" id="lhid_unlistedaccess" {privateChecked} /> <label for="lhid_unlistedaccess"><span class="lhcl_unlisted_label">Unlisted</span></label> &#8211; For albums that you only want to share with select people</p></div></div>');
return b.join("")},nn='<div><input type="hidden" name="albumop" value="{albumop}" /><input id="{album_id}" type="hidden" name="aid" /><div class="lhcl_albumlist" id=\'{albumlist}\'>'+id+"</div></div>",qn="<p>"+eo("<a href=\"javascript:_d('{choosefunc}')\">","</a>")+"</p>",on="<p>"+$n("<a href=\"javascript:_d('{createfunc}')\">","</a>")+"</p>";function Jd(){K.Sa(this);this.Ua=q("div");this.Ua.className="lhcl_cover";document.body.appendChild(this.Ua);this.Wa();this.nc=this.Wa.bind(this);Qa(window,"resize",this.nc);window.scrollTo(0,0);Be();gb("hideVideo");this.e={close:m("func"),change:m("func"),changeCode:m("func")};o(this.e.close,this.ma.bind(this));o(this.e.change,this.ml.bind(this));o(this.e.changeCode,this.ml.bind(this));this.g=N(Gn,this.e);document.body.insertBefore(this.g,document.body.firstChild);this.ml();this.ej=_authuser;this.Ll=
_album;if(!Ge){k("lhid_widget_preview").innerHTML='<div class="lhcl_output" style="height:192px"><span>You need Adobe&reg; Flash&reg; Player 7 or higher to play slideshows.</span><br /><br /><a target="_blank" href="http://www.macromedia.com/go/getflashplayer">'+gh+"</a></div>"}}var In=new Image;Jd.prototype.r=function(){this.vb();K.Ta(this);Xa(window,"resize",this.nc);x(this.e.close);x(this.e.change);x(this.e.changeCode);for(var a in this)this[a]=null};Jd.prototype.ma=function(){if(this.g)z(this.g);
if(this.Ua)z(this.Ua);if(this.Kf)this.Kf();this.r()};Jd.prototype.Wa=function(){var a=Math.max(document.body.offsetHeight,document.body.scrollHeight);a=Math.max(a,document.body.clientHeight);a=Math.max(a,document.documentElement.clientHeight);this.Ua.style.height=a+"px"};var Kf=function(a,b,c){var d=window.location.port?"&port="+window.location.port:"",e=a.captions.checked?"&captions=1":"",f={flash_src:_flashPath+"/slideshow.swf",width:c,height:Math.round(c*2/3),url:b,host:window.location.hostname,
port:d,captions:e};return V('<embed type="application/x-shockwave-flash" src="{flash_src}" width="{width}" height="{height}" flashvars="host={host}{port}{captions}&RGB=0x000000&feed={url}" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed>',f)};Jd.prototype.ml=function(){var a=k("lhid_slideshow_options");this.OC=a.captions.checked;this.Vc=a.size.value;var b=encodeURIComponent(_album.photosRss);k("lhid_html").value=Kf(a,b,a.size.value);k("lhid_widget_preview").innerHTML=Kf(a,b,288)};
Jd.prototype.vb=function(){var a=_ajaxLoggingPath+"?"+this.ed().join("&");In.src=a};Jd.prototype.ed=function(){var a=["page=116","width="+this.Vc];if(this.OC){a.push("captions=1")}return a};var Hn=function(){var a="";for(var b=0;b<_user.albums.length;b++){if(_user.albums[b].count>0){a+='<option value="'+_user.albums[b].link+'">'+_user.albums[b].title+" ("+_user.albums[b].count+")</option>"}}if(a.length==0){return}var c={change:m("func"),changeCode:m("func"),options:a};o(c.change,Ej);o(c.changeCode,
Fj);document.getElementById("lhid_body").innerHTML=V(Jn,c);Ej()},Ej=function(){Fj();document.getElementById("lhid_embedPreview").innerHTML=Kf(document["Embed"],encodeURIComponent(document.Embed.album.value),288)},Fj=function(){var a=document.Embed.size.value;document.Embed.code.value=Kf(document["Embed"],encodeURIComponent(document.Embed.album.value),a)},Gj='<h2>Slideshow options</h2><div>Select slideshow size:</div><select name="size" onchange="_d(\'{changeCode}\')"><option value="144">Small '+Nc(144)+
'</option><option value="288" selected>Medium '+Nc(288)+'</option><option value="400">Large '+Nc(400)+'</option><option value="600">Extra large '+Nc(600)+'</option><option value="800">Extra-extra large '+Nc(800)+'</option></select><br /><input type="checkbox" name="captions" onclick="_d(\'{change}\')"/>Show captions<hr><h2>Embed slideshow</h2><div class="lhcl_copy">Copy and paste this into your website:</div><textarea name="code" id="lhid_html" onclick="this.select()" rows="4"></textarea>',Hj='<a href="http://picasa.google.com/support/bin/answer.py?answer=66969" target="_blank">Need help putting this slideshow on your website?</a>',
Gn='<div id="lhid_slideshow" class="lhcl_dialog"><div class="lhcl_dialog_body"><h1>'+$j+'</h1><table><tr><td style="vertical-align:top"><form id="lhid_slideshow_options">'+Gj+'</form></td><td><div class="lhcl_small">'+Xj+'</div><div id="lhid_widget_preview"></div><div class="lhcl_small">'+Hj+'</div></td></tr></table></div><div class="lhcl_buttons"><input type="button" onclick="_d(\'{close}\')" value="Done" class="lhcl_default" id="{submit_id}" /></div></div>',Jn='<p class="lhcl_h1">'+$j+'</p><table class="lhcl_slideshow"><tr><td><form name="Embed"><h2>Select an album</h2><select name="album" onchange="_d(\'{change}\')">{options}</select><br /><br />'+
Gj+'</form></td><td><span class="lhcl_frameblock" style="display:block;"><div class="lhcl_normal" style="text-align:center;">'+Xj+'</div><span id="lhid_embedPreview"></span></span><div  style="text-align:center;">'+Hj+"</div></td></tr></table>";function Zg(a,b,c,d,e){this.ff=a;this.wh=null;this.XE=null;this.zE=b;this.zv=c;this.IE=d;this.HE=e;o("sortAlbums",this.Mo.bind(this));this.Mo(Gf.param)}Zg.prototype.Mo=function(a){var b=[];if(a==Gf.param){this.ko(this.ff);b.push(Gf.label);b.push(V(Aj,$g))}else if(a==$g.param){if(this.wh==null){this.wh=[];this.wh.length=this.ff.length;for(var c=0;c<this.ff.length;c++){this.wh[c]=this.ff[c]}this.wh.sort(xn)}this.ko(this.wh);b.push(V(Aj,Gf));b.push($g.label)}var d='<span class="lhcl_notbold">Sort by:</span> '+
b.join(" | ");this.zE.innerHTML=d};Zg.prototype.ko=function(a){this.zv.innerHTML="";for(var b=0;b<a.length;b++){var c=a[b];c.width=this.IE;c.height=this.HE;c.photo_count=c.count;if(c.unlisted){c.listing='<span class="lhcl_status">Unlisted</span>'}c.i=b;var d=c.blogger?'<div class="lhcl_blogger lhcl_fakelink" style="background: url({src}) no-repeat left; width: {width}px; height: {height}px"><img src="img/blogger.gif" /></div>':'<img src="{src}" width="{width}" height="{height}"/>';c.image_html=V(d,
c);this.zv.appendChild(N('<div class="lhcl_album"><div class="lhcl_imagebox"><div class="lhcl_frame"><div class="lhcl_padding"><a href="{url}" onclick="_d(\'AlbumClearPaging\')">{image_html}</a></div></div></div><div class="lhcl_desc"><table class="lhcl_title" style="height:4em;"><tr><td><div class="lhcl_titlebox"><a href="{url}" id="url{i}"></a> <span class="lhcl_info">({photo_count})</span>{icon_html}</div><div class="lhcl_info">{date} {listing}</div></td></tr></table></div></div>',c));var e=k("url"+
b);yh(e,2,c.title,225)}};var Bj=function(a){ap("_lhmessageid",a?"INDEX_SET_ON":"INDEX_SET_OFF",-1,"/");window.location.reload()},xn=function(a,b){return b.upload_secs-a.upload_secs},Aj="<a href=\"javascript:_d('sortAlbums', '{param}');\">{label}</a>",Gf={param:"none",label:"Album date"},$g={param:"upload",label:"Upload date"};function Nn(){k("lhid_emailtofield").focus();o("CancelMail",Kn);if(_features.contactpicker){jg="/lh/ui/";n(k("lhid_pick"),ka,Mn);_initEmailAutocomplete(k("lhid_emailtofield"),"/lh/data/contacts",true)}else{_initEmailAutocomplete(k("lhid_emailtofield"),"/lh/contacts?out=js",true)}}function Mn(a){var b="toolbar=no,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,width=315,height=610,top="+a.screenY+",left="+a.screenX+",screenY="+a.screenY+",screenX="+a.screenX,c=ci("lhid_emailtofield",false).toString();
window.open(c,"_picker",b)}function On(){var a=k("lhid_emailtofield"),b=k("lhid_emailto");if(!(a&&b))return false;var c=bn(a.value),d=[];for(var e=0;e<c.length;e++){var f=c[e];if(!f)continue;var g=hk(c[e])[1];if(!g||!Gr(g)){alert(Xn(f));return false}d.push(f)}if(!d.length){alert("Please specify at least one recipient.");return false}b.value=d.join(",");return true}function Kn(a){var b=k("lhid_emailform");for(var c=0;c<b.elements.length;c++){var d=b.elements[c];if(d.type!="textarea")continue;if(Wc(d.value)!=
""){if(confirm('Your email has not been sent. Press "Okay" to discard your message, or "Cancel" to continue writing.')){break}else{return}}}window.location=a};function ln(a,b,c,d){L.Ga(a,Dn.bind(null,b,c))}function Dn(a,b,c){if(c.status>=400||c.text.indexOf("success")<0){alert(lh);return}k("lhid_addFav").style.display="none";k("lhid_inFav").style.display="";k("lhid_nolink").style.display="";gb("hideVideo");new Hd(a,b)}function Cn(a){if(a.status>=400||a.text.indexOf("success")<0){alert(lh);return}var b=k("lhid_nolink");b.style.display="none";b=k("lhid_link");b.style.display=""}function Hd(a,b){K.Sa(this);this.lE=a;var c={lhui_username:b,lhui_yes_func:m("func"),
lhui_no_func:m("func")};this.e=c;this.Ua=q("div");this.Ua.className="lhcl_cover";document.body.appendChild(this.Ua);this.Wa();this.nc=this.Wa.bind(this);Qa(window,"resize",this.nc);window.scrollTo(0,0);Be();this.g=N(tn,this.e);document.body.insertBefore(this.g,document.body.firstChild);o(this.e.lhui_yes_func,this.Rt.bind(this));o(this.e.lhui_no_func,this.Vu.bind(this));this.Gd=ib(this,this.ia);Qa(document,"keydown",this.Gd);this.$u()}Hd.prototype.r=function(){K.Ta(this);if(this.e){x(this.e.lhui_yes_func);
x(this.e.lhui_no_func)}Xa(document,"keydown",this.Gd);Xa(window,"resize",this.nc);for(var a in this)this[a]=null};Hd.prototype.ma=function(){if(this.g)z(this.g);if(this.Ua)z(this.Ua);gb("restoreVideo");this.r()};Hd.prototype.$u=function(){if(typeof L=="undefined"||!L.gg()){window.location=this.JF+"&redir="+encodeURIComponent(window.location);this.ma()}};Hd.prototype.Wa=function(){var a=Math.max(document.body.offsetHeight,document.body.scrollHeight);a=Math.max(a,document.body.clientHeight);a=Math.max(a,
document.documentElement.clientHeight);this.Ua.style.height=a+"px"};Hd.prototype.Vu=function(){this.ma()};Hd.prototype.Rt=function(){L.Ga(this.lE,Cn);this.ma()};var tn='<div class="lhcl_dialog"><div class="lhcl_dialog_body lhcl_addfavorite"><p><img src="img/favorites_checked.gif" />'+Rn("{lhui_username}")+"</p><br /><hr /><p>Now that this user is one of your favorites, you can link to their public gallery from your public gallery.</p><p>"+Wn("{lhui_username}")+'</p><br /><table><tr><td class="lhcl_halfwidth lhcl_align_right""><input type="button" value="Yes" onclick="_d(\'{lhui_yes_func}\')" /></td><td class="lhcl_halfwidth lhcl_dialog_button"><input type="button" value="No, Skip this" onclick="_d(\'{lhui_no_func}\')" /></td></tr><tr><td></td><td class="lhcl_dialog_button"><span class="lhcl_mini_text">(you can always do this later)</span></td></tr></table></div></div>';function gd(a,b,c){this.Ba=a;this.pb=b;this.Oc=c;this.ny=k("lhid_header");this.lv=k("lhid_activity");this.cA=k("lhid_favorites");this.FE=k("lhid_teaser");this.oF=k("lhid_lastshown");this.Ba.sort(this.jw);this.kA();this.es(false);var d=window.location.hash;if(d==""){this.Sk("")}else{this.Sk(d)}this.pd=this.Ni.bind(this);Vf(this.pd);o("call",vn);o("toggleNotify",this.lC.bind(this));o("toggleLink",this.jC.bind(this))}var vn=function(a){L.Ga(a,un)},un=function(a){if(a.status>=400||a.text.indexOf("success")<
0){alert(lh);window.location.reload()}};gd.prototype.Ni=function(){var a=window.location.hash;if(this.bD==a){return}this.Sk(a)};gd.prototype.kA=function(){var a=[];a.push('<table class="lhcl_fullwidth"><tr>');for(var b=0;b<this.pb.length;++b){if(null==this.pb[b]||this.pb[b].deleted){continue}a.push('<td class="lhcl_halfcol">',"<table><tr>",'<td><a href="',this.pb[b].link,'">','<img class="lhcl_activity" src="',this.pb[b].src,'"></a></td>','<td><a href="',this.pb[b].link,'" class="lhcl_plain">');var c=
this.pb[b].type;switch(this.pb[b].reason){case "starred":a.push('<div class="lhcl_title">',this.pb[b].album,"</div>",'<div class="lhcl_info">By ',this.pb[b].person,".</div>");break;case "photos_added":a.push('<div class="lhcl_title">',this.pb[b].album,"</div>",'<div class="lhcl_info">',Sn(this.pb[b].person,this.pb[b].photo_count),"</div>");break;case "email_notification":switch(c){case "album":a.push('<div class="lhcl_title">',this.pb[b].album,"</div>",'<div class="lhcl_info">',Do(this.pb[b].person),
"</div>");break;case "photo":a.push('<div class="lhcl_title">',this.pb[b].person,"</div>",'<div class="lhcl_info">',"Shared a photo with you.","</div>");break;case "account":a.push('<div class="lhcl_title">',this.pb[b].person,"</div>",'<div class="lhcl_info">',"Shared gallery with you.","</div>");break}break}a.push('<div class="lhcl_info">',this.pb[b].A,"</div>","</a></td></tr></table></td>");if((b+1)%2==0){a.push("</tr><tr>")}}a.push("</tr></table>");this.lv.innerHTML=a.join("")};gd.prototype.es=
function(a){ef("AddFavoriteId");if(this.up==a)return;this.up=a;var b=[];if(_features.contacts){b.push("<p>");if(a){b.push(ho('<a href="'+this.Oc+'#list">',"</a>"))}else{b.push(io('<a href="'+this.Oc+'#all">',"</a>"))}b.push("</p>")}b.push('<table class="lhcl_fullwidth">');var c=a?"#all":"#list",d=encodeURIComponent(this.Oc+c),e=false;for(var f=0;f<this.Ba.length;++f){if(!_features.contacts||a||this.Ba[f].notify){if(e){b.push('<tr><td colspan="2" class="lhcl_listEnd"></td></tr>')}else{e=true}b.push('<tr class="lhcl_favoritePersonListed">',
'<td class="lhcl_host"><a href="',this.Ba[f].link,'"><img class="lhcl_portrait" src="',this.Ba[f].src,'" ></a></td>','<td class="lhcl_data"><table><tr>','<td><table style="width:100%;"><tr><td><a href="',this.Ba[f].link,'">',this.Ba[f].name,"</a>");b.push("</td>");if(_features.contacts){b.push('<td class="lhcl_starProperty"><input type="checkbox" ');if(this.Ba[f].notify){b.push('checked="true"')}b.push("onclick=\"_d('toggleNotify', '",f,"'); ","_d('call', '",this.Ba[f].notifylink,"');\"/>","Receive updates",
"</td>")}b.push('<td class="lhcl_starProperty">');b.push('<div><input type="checkbox" ');b.push("onclick=\"_d('toggleLink', '",f,"'); _d('call', '");if(this.Ba[f].linked){b.push(this.Ba[f].removelink,'\');" checked="true" ')}else{b.push(this.Ba[f].addlink,"');\" ")}b.push("/>","show link on my gallery");b.push("</div></td></tr></table></td>");if(this.Ba[f].unstar){b.push('<td class="lhcl_starProperty">',"<a");b.push(" onclick=\"return confirm('",Yj,"');\"");b.push(' href="',this.Ba[f].unstar,"&redir=",
d,'">',"remove user","</a></td>")}else{b.push("<td>&nbsp;</td>")}b.push("</tr>");if(this.Ba[f].albums.length>0){b.push('<tr><td colspan="2"><div class="lhcl_unlistedListing">',"Unlisted albums you have seen",":</div></td></tr>");for(var g=0;g<this.Ba[f].albums.length;++g){var h="";if((g+1)%2){h=" lhcl_colorbar"}b.push('<tr><td class="lhcl_starred',h,'">');if(this.Ba[f].albums[g].deleted){b.push(this.Ba[f].albums[g].name," (deleted)")}else{b.push('<a href="',this.Ba[f].albums[g].link,'">',this.Ba[f].albums[g].name,
"</a>")}b.push('</td><td class="lhcl_starProperty',h,'">',"<a");b.push(" onclick=\"return confirm('",Yj,"');\"");b.push(' href="',this.Ba[f].albums[g].unstar,"&redir=",d,'">',"remove album","</a></td></tr>")}}b.push("</table>")}}b.push("</table>");this.cA.innerHTML=b.join("")};gd.prototype.Sk=function(a){this.bD=a;var b=a=="#activity",c=this.lv.style,d=this.cA.style,e=this.FE.style;c.display="none";d.display="none";e.display="none";if(b){(this.pb.length==0?e:c).display="";this.ny.innerHTML='<span class="lhcl_notbold">View:</span> <a href="'+
this.Oc+'#list">List</a> | Activity'}else{(this.Ba.length==0?e:d).display="";this.ny.innerHTML='<span class="lhcl_notbold">View:</span> List | <a href="'+this.Oc+'#activity">Activity</a>';if(_features.contacts){this.es(a=="#all")}}};gd.prototype.lC=function(a){this.Ba[a].notify=!this.Ba[a].notify;this.up=!this.up;this.Sk(window.location.hash)};gd.prototype.jC=function(a){this.Ba[a].linked=!this.Ba[a].linked};gd.prototype.jw=function(a,b){if(a.name<b.name){return-1}else if(a.name>b.name){return 1}return 0};function mn(a,b,c){var d=k(b);if(d){d.innerHTML='<object id="UploadListView" classid="CLSID:474F00F5-3853-492C-AC3A-476512BBC336" codebase="'+a+"uploader2.cab#version="+c+'" width="564" height="375"></OBJECT>'}};function Fa(a,b,c){K.Sa(this);this.U=a;this.wa={};this.pj="Click to add a caption";this.OE=b;this.b=c;this.rn="";this.F={lhui_nextfunc:m("func"),lhui_promptfunc:m("func"),lhui_savefunc:m("func"),lhui_undofunc:m("func"),lhui_checkfunc:m("func")};o(this.F.lhui_nextfunc,this.Wt.bind(this));o(this.F.lhui_promptfunc,this.Tt.bind(this));o(this.F.lhui_savefunc,this.cw.bind(this));o(this.F.lhui_undofunc,this.Hu.bind(this));o(this.F.lhui_checkfunc,this.av.bind(this));o("ReturnToAlbum",this.Do.bind(this));
this.Qt()}Fa.prototype.r=function(){K.Ta(this);if(this.fc)window.clearTimeout(this.fc);if(this.F){x(this.F.lhui_nextfunc);x(this.F.lhui_promptfunc);x(this.F.lhui_savefunc);x(this.F.lhui_undofunc);x(this.F.lhui_checkfunc);x("ReturnToAlbum")}for(var a in this)this[a]=null};Fa.prototype.Qt=function(){var a=Math.min(50,_album.photoCount);if(_album.photoCount>50){this.lo(0,50)}for(var b=0;b<a;b++){var c=this.U[b];this.wa[c.id]={};c.lhui_promptfunc=this.F.lhui_promptfunc;c.lhui_savefunc=this.F.lhui_savefunc;
c.lhui_checkfunc=this.F.lhui_checkfunc;c.index=b;c.tabindex=b+1;c.cid="lhid_caption_"+c.id;if(c.c){c.active="lhcl_active";c.caption=c.c}else{c.active="";this.wa[c.id].empty=true;c.caption=this.pj}var d=N(oj,c);this.b.appendChild(d);if(b<a-1){var e=q("div");e.className="lhcl_captionspacer";this.b.appendChild(e)}}};Fa.prototype.Wt=function(a,b){var c=ya(),d=["off="+a,"max="+b,"v="+c],e="http://"+document.domain+":"+document.location.port+"/data/feed/back_compat/user/"+_authuser.name+"/albumid/"+_album.id+
"?kind=photo&alt=rss&"+d.join("&"),f=Yb(this,this.vt,a,b);L.Ga(e,f)};Fa.prototype.Ti=function(a,b){var c=b,d=b.split(":");if(d.length>1){if(!A){c=d[1]}}var e=a.getElementsByTagName(c);for(var f=0;f<e.length;f++){if(e[f].nodeName!=b)continue;var g=e[f].firstChild;if(g!=null){var h=g.nodeValue;if(h!=null){return h}}}return null};Fa.prototype.yt=function(a){var b={};b.id=this.Ti(a,"gphoto:id");b.l=this.Ti(a,"link");b.c=this.Ti(a,"description");b.a=this.Ti(a,"title");return b};Fa.prototype.vt=function(a,
b,c){if(!c||c.status>=400){if(!c){alert(Nf+"\nPlease check your connection and try again.")}else{alert(Nf+"\n\n"+Of(c.status))}return}if(c.text.substring(0,5)!="<?xml"){alert(Nf);return}var d;if(A){try{d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;var e=d.loadXML(c.text);if(!e){alert(Nf+"\n\n"+Of(c.status))}}catch(f){}}else{d=c.xml}var g=d.getElementsByTagName("item");if(_album.photoCount>50){this.lo(a,g.length)}this.b.innerHTML="";window.scrollTo(0,0);for(var h=0;h<g.length;h++){var i=this.yt(g[h]);
this.wa[i.id]={};i.lhui_checkfunc=this.F.lhui_checkfunc;i.lhui_promptfunc=this.F.lhui_promptfunc;i.lhui_savefunc=this.F.lhui_savefunc;i.z=_album.photoCount-a-h;i.index=a+h;i.s=this.U[i.index].s;i.tabindex=h+1;i.selected=false;i.cid="lhid_caption_"+i.id;if(i.c){i.active="lhcl_active";i.caption=i.c}else{i.active="";this.wa[i.id].empty=true;i.caption=this.pj}var j=N(oj,i);this.b.appendChild(j);if(h<b-1){var l=q("div");l.className="lhcl_captionspacer";this.b.appendChild(l)}}};Fa.prototype.lo=function(a,
b){var c={};c.lhui_nextfunc=this.F.lhui_nextfunc;var d="",e="";if(a>0){c.offset=a-50;c.interval=50;d=V('<span><a id="lhid_previous" class="lhcl_navlink" href="javascript: _d(\'{lhui_nextfunc}\', {offset}, {interval})">&lt; Previous</a></span>',c)}if(_album.photoCount>a+50){c.offset=a+50;c.interval=Math.min(50,_album.photoCount-(a+50));c.tabindex=b+1;e=V('<span><a class="lhcl_navlink" href="javascript:_d(\'{lhui_nextfunc}\', {offset}, {interval})" tabindex="{tabindex}">Next&gt;</a></span>',c)}var f=
{};f.msg=_features.newStrings?Vj(a+1,a+b,_album.photoCount):so(a+1,a+b,_album.photoCount);var g=V("<span>&nbsp; {msg} &nbsp;</span>",f),h=[d,g,e].join("");k("lhid_batchnav_top").innerHTML=h;k("lhid_batchnav_bottom").innerHTML=h};Fa.prototype.Do=function(){if(this.rn){if(this.fc){window.clearTimeout(this.fc);this.fc=0}this.fc=Xf(this,this.Do,200)}else{window.location=_album.link}};Fa.prototype.Tt=function(a){var b=this.U[a].id;this.U[a].input=k("lhid_caption_"+b);if(this.wa[b].empty){this.U[a].input.className=
"lhcl_active";this.U[a].input.value=""}};Fa.prototype.Pt=function(a){var b=this.U[a].id,c=this.U[a].input,d=cr(c.value),e=this.U[a].c;c.value=d;if(e==Ql(d)){if(ze(d)){c.value=this.pj;c.className="";this.wa[b].state="default";this.Sd(a)}return false}if(ze(d)){this.wa[b].empty=true}else{this.wa[b].empty=false}if(d.length>1024){this.wa[b].state="error";this.Sd(a);return false}return true};Fa.prototype.Eo=function(a){var b=this.U[a].id,c=this.U[a].input,d=Wc(c.value),e=k("aid").value,f=this.OE+"&aid="+
e,g=Yb(this,this.Iu,a),h=["optgt=SAVE_PHOTO_CAPTIONS","noredir=true","caption_"+b+"="+Xc(d)];L.Ga(f,g,h.join("&"));this.rn=true;if(this.wa[b].state=="reverting"){this.wa[b].state="reverting"}else{this.wa[b].state="saving"}this.Sd(a)};Fa.prototype.Iu=function(a,b){if(this.db(b)||this.xb(b)){var c=this.U[a].id,d=this.U[a].input;d.className="";d.value=this.pj;this.wa[c].state="";this.Sd(a);this.rn=false;return}var c=this.U[a].id,d=this.U[a].input,e=d.value;this.wa[c].undo=this.U[a].c;this.U[a].c=Ql(e);
if(this.wa[c].empty){d.className="";d.value=this.pj}else{d.className="lhcl_active"}if(this.wa[c].state=="reverting"){this.wa[c].state="reverted";this.Sd(a)}else{this.wa[c].state="saved";this.Sd(a)}this.rn=false};Fa.prototype.Hu=function(a){var b=this.U[a].id,c=this.U[a].input,d=this.wa[b].undo;c.value=Va(d);if(ze(d)){this.wa[b].empty=true}else{this.wa[b].empty=false}this.wa[b].state="reverting";this.Eo(a)};Fa.prototype.av=function(a){var b=this.U[a].id,c=this.U[a].input,d=c.value,e=this.U[a].c;if(d!=
e&&this.wa[b].state!="prompt"&&!ze(d)){this.wa[b].state="prompt";this.Sd(a)}this.Dt(a)};Fa.prototype.Dt=function(a){var b=this.U[a].id,c=this.U[a].input,d=k("status_"+b);if(!(c&&d))return;if(c.value.length>992){this.wa[b].state="warning";this.Sd(a)}else if(this.wa[b].state=="error"){this.wa[b].state="prompt";this.Sd(a)}};Fa.prototype.Sd=function(a){var b=this.U[a].id,c=this.U[a].input,d=this.wa[b].state,e=k("status_"+b),f,g={};g.lhui_undofunc=this.F.lhui_undofunc;g.index=a;e.style.color="#666";switch(d){case "prompt":f=
'<span class="lhcl_statusdefault">Changes to captions are automatically saved.</span>';break;case "saving":f='<table><tr><td class="lhcl_status"><img src="img/progressanim.gif" class="lhcl_statusimg" /></td><td class="lhcl_status">Saving caption&#8230;</td></tr></table>';break;case "saved":f='<table><tr><td class="lhcl_status"><img src="img/check.gif" class="lhcl_statusimg" /></td><td class="lhcl_status">This caption has been saved.</td><td class="lhcl_undo"><a href="javascript:_d(\'{lhui_undofunc}\', \'{index}\')">Undo</a></td></tr></table>';
break;case "reverting":f='<table><tr><td class="lhcl_status"><img src="img/progressanim.gif" class="lhcl_statusimg" /></td><td class="lhcl_status">Reverting caption&#8230;</td></tr></table>';break;case "reverted":f='<table><tr><td class="lhcl_status"><img src="img/check.gif" class="lhcl_statusimg" /></td><td class="lhcl_status">This caption has been reverted.</td></tr></table>';break;case "warning":g.num=c.value.length;g.max=1024;if(g.num>g.max){e.style.color="#f00"}g.msg=_features.newStrings?Yn(g.num,
g.max):"";f="<span>{msg}</span>";break;case "error":f=an;break;default:f="<span> </span>";break}var h=N(f,g);xc(e,h)};Fa.prototype.cw=function(a){if(this.Pt(a)){this.Eo(a)}};var so=function(a,b,c){return a+" - "+b+" ( "+c+")"},an='<span class="lhcl_warning">'+Kj+"</span>",oj='<div><table class="lhcl_onebatchcaption"><tr><td class="lhcl_photo"><img src="{s}" alt="{a}"/></td><td class="lhcl_textbox"><textarea id="lhid_caption_{id}" name="caption_{id}" onkeydown="_d(\'{lhui_checkfunc}\', \'{index}\')" onfocus="_d(\'{lhui_promptfunc}\', \'{index}\')" onblur="_d(\'{lhui_savefunc}\', \'{index}\')" onkeyup="_d(\'{lhui_checkfunc}\', \'{index}\')" class="{active}" tabindex="{tabindex}">{caption}</textarea><div id="status_{id}" class="lhcl_statusbox"></div></td></tr></table></div>';
Fa.prototype.db=function(a){var b=a.status;if(b>=400){var c;if(b==403)c="403 "+Pj;else if(b==404)c="404 "+Rj;else if(b>=500)c="500 "+Zj;else c="unknown "+bk;alert(V(c,{status:b}));return true}return false};Fa.prototype.xb=function(a){if(a.text.indexOf("success")<0){var b=a.text.replace(/\<[^>]*\>/g,"");alert(b);return true}return false};function $(a,b,c,d){K.Sa(this);this.U=a;this.g=b;this.Zr=c;this.WA=d;this.zk=false;this.lastClicked=-1;this.shiftDown=false;this.Pr=0;this.Ah=_thumbSize;o("thumbClick",this.bv.bind(this));o("thumbHover",this.cv.bind(this));this.Gd=ib(this,this.ia);this.Wz=ib(this,this.yb);this.Xr=ib(this,this.Ao);this.Xz=this.vu.bind(this);this.Vm=new qb(this.Xr);Qa(document,"keydown",this.Gd);Qa(document,"keyup",this.Wz);Qa(window,"resize",this.Xr);Qa(window,"scroll",this.Xz);o("getSnippet",this.Su.bind(this));o("getLink",
this.Tu.bind(this));this.mo()}$.prototype.r=function(){K.Ta(this);x("thumbClick");x("thumbHover");Xa(document,"keydown",this.Gd);Xa(document,"keyup",this.Wz);Xa(window,"resize",this.Xr);Xa(window,"scroll",this.Xz);for(var a in this)this[a]=null};$.prototype.mo=function(){if(!this.g)return;if(!this.Jd){this.Jd=0;this.g.innerHTML="";this.iC=this.U.length}var a=this.Jd;this.Jd=Math.min(a+50,this.U.length);for(var b=a;b<this.Jd;b++){var c=this.U[b];if(c.c)c.caption='<p id="lhid_c'+b+'">'+c.c+"</p>";c.index=
b;c.selected=false;var d=N('<div class="lhcl_thumbnail" onclick="_d(\'thumbClick\', this, {index});" ondblclick="return false;" onmouseover="_d(\'thumbHover\', this, {index}, true)" onmouseout="_d(\'thumbHover\', this, {index}, false)"><div class="lhcl_thumb_row" id="lhid_t{index}"><div id="lhid_b{index}" class="lhcl_greybox"></div></div><div class="lhcl_thumb_row"><div class="lhcl_thumb_captionbox"><input type="checkbox" class="lhcl_checkbox" name="iid_{id}" />{caption}</div></div></div>',c);d.style.zIndex=
this.U.length-b;this.g.appendChild(d);c.div=k("lhid_t"+b);c.box=k("lhid_b"+b);this.so(c)}if(this.Jd<this.U.length){Xf(this,this.mo,0)}if(!this.Vm.Nm()){this.Vm.J(500)}};$.prototype.so=function(a){a.voff=-1;a.loaded=false;var b=xp(a.w,a.h,this.Ah);a.iw=b.w;a.ih=b.h;Qi(a.div,this.Ah+10,b.h+10);Qi(a.box,b.w,b.h);if(a.box.hasChildNodes())Qi(a.box.firstChild,b.w,b.h);var c=(this.Ah-b.w)/2;if(!A)a.box.style.left=c+"px";var d=k("lhid_c"+a.index);if(d){var e=this.Ah+10;d.style.width=e+"px";uk(d)}};$.prototype.Et=
function(a){if(a.loaded)return;var b=a.voff;if(b>this.Zz)return;var c=b+this.Ah;if(c<this.Yr)return;var d=N('<img src="{s}" style="width:{iw}px;height:{ih}px;">',a);a.loaded=true;a.box.innerHTML="";a.box.appendChild(d)};$.prototype.jo=function(){if(!this.bn)return;this.bn=false;for(var a=0;a<this.Jd;a++){if(this.bn)return;var b=this.U[a];if(!b.loaded){if(b.voff>this.Zz)return;this.Et(b)}}};$.prototype.Eu=function(a,b){this.Ah=b;this.iC=this.U.length;for(var c=0;c<this.Jd;c++){var d=this.U[c];this.so(d);
d.s=d.s.replace("imgmax="+a,"imgmax="+b)}this.Vm.J(500)};$.prototype.Uo=function(){this.bn=true;if(fc){this.Yr=document.body.scrollTop}else{this.Yr=Sb().scrollTop}this.Zz=2*Pd()+this.Yr};$.prototype.gv=function(){this.bn=true;for(var a=0;a<this.Jd;a++){var b=this.U[a];if(!b.loaded){b.voff=mg(b.div)}}};$.prototype.vu=function(){this.Uo();this.jo()};$.prototype.Ao=function(){this.Vm.reset();if(this.iC==0)return;this.Uo();this.gv();this.jo()};$.prototype.Tu=function(){var a=k("lhid_embed"),b=k("lhid_zippy");
if(a.className=="lhcl_embed_on"){a.className="lhcl_embed";k("lhid_embedform").style.display="none";b.src="img/triangle.gif"}else{a.className="lhcl_embed_on";k("lhid_embedform").style.display="";k("lhid_link").value=_album.link;var c=Uj(_album.count),d=_album.src.replace(/\/([^?\/]*)\?.*$/,"/s160-c/$1"),e={url:_album.link,src:d,title:_album.title_wb,info:_album.dateonly+" - "+_album.count+" "+c},f=V(Jj,e);k("lhid_snippet").value=f;b.src="img/opentriangle.gif"}};$.prototype.Su=function(a,b,c){var d=
a.style,e=k("lhid_zippy");if(d.display==""){d.display="none";b.style.display="none";e.src="img/triangle.gif"}else{d.display="";var f=Uj(c.count),g=c.src.replace(/\/([^?\/]*)\?.*$/,"/s160-c/$1"),h={url:c.link,src:g,title:c.title_wb,info:c.dateonly+" - "+c.count+" "+f},i=V(Jj,h);b.style.display="";b.value=i;b.focus();b.select();e.src="img/opentriangle.gif"}};$.prototype.Au=function(){this.zk=!this.zk;_album.organize=this.zk;var a="";if(this.zk){a="lhcl_organize_mode";this.lastClicked=-1}else{this.Go()}this.Zr.className=
a;this.Ao()};$.prototype.Ht=function(){var a=this.nl();if(!a)return;if(a.length>100){alert(kh(a.length,100));return}LH_copyDialog(a)};$.prototype.fu=function(){var a=this.nl();if(!a)return;if(a.length>100){alert(kh(a.length,100));return}LH_moveDialog(a)};$.prototype.Jt=function(){var a=this.nl();if(!a||!confirm("Are you sure you want to delete the selected items?"))return;var b=k("lhid_albumactionsform"),c=k("lhid_selectedphotos"),d=k("lhid_albumop");if(!(b&&c&&d))return;d.value="DELETE";b.action=
_selectedPhotosPath;c.value=a.join(",");b.submit();this.Si(false)};$.prototype.Kt=function(){if(!confirm("Are you sure you want to delete this album?"))return;var a=k("lhid_albumactionsform"),b=k("lhid_albumop");if(!(a&&b))return;b.value="DELETE";a.action=_deleteAlbumPath;a.submit();this.Si(false)};$.prototype.Ku=function(){this.sl(0,this.Jd-1,true)};$.prototype.Go=function(){this.sl(0,this.Jd-1,false)};$.prototype.Ho=function(a,b){if(this.U[a].selected==b)return;this.U[a].selected=b;var c=this.g.childNodes[a],
d=c.getElementsByTagName("input")[0];d.checked=b;var e="lhcl_thumbnail";if(b)e+=" lhcl_selected";c.className=e;this.Pr+=b?1:-1;if(this.Pr==0){this.xr=-1;this.Si(false)}else if(this.Pr==1){this.Si(true)}};$.prototype.sl=function(a,b,c){var d=Math.min(a,b),e=Math.max(a,b);for(var f=d;f<=e;f++)this.Ho(f,c)};$.prototype.nl=function(){var a=[];for(var b=0;b<this.Jd;b++){var c=this.U[b];if(c.selected)a.push(c.id)}return a};$.prototype.Si=function(a){for(var b=0;b<this.WA.length;b++){var c=this.WA[b];if(!c)continue;
c.disabled=!a}};$.prototype.bv=function(a,b){if(this.zk){var c=!this.U[b].selected;if(this.RB&&this.xr>=0){this.sl(b,this.xr,c)}else{this.Ho(b,c)}this.xr=b}else{window.location=this.U[b].l}};$.prototype.cv=function(a,b,c){var d="lhcl_thumbnail";if(this.U[b].selected)d+=" lhcl_selected";if(c)d+=" lhcl_hover";a.className=d};$.prototype.ia=function(a){this.RB=a.shiftKey};$.prototype.yb=function(a){this.RB=a.shiftKey};function Qi(a,b,c){a.style.width=b+"px";a.style.height=c+"px"}function xp(a,b,c){var d=
{};d.w=a;d.h=b;if(a>c||b>c){if(a<b){d.h=c;d.w=Math.round(a*c/b)}else{d.w=c;d.h=Math.round(b*c/a)}}return d}var Jj='<table style="width:194px;"><tr><td align="center" style="height:194px;background:url(http://picasaweb.google.com/f/img/transparent_album_background.gif) no-repeat left"><a href="{url}"><img src="{src}" width="160" height="160" style="margin:1px 0 0 4px;"></a></td></tr><tr><td style="text-align:center;font-family:arial,sans-serif;font-size:11px"><a href="{url}" style="color:#4D4D4D;font-weight:bold;text-decoration:none;">{title}</a></td></tr></table>';function Lf(a,b,c,d){this.aB=a;this.Dy=b;this.Nz=[];this.Jf=[];for(var e=0;e<Mf.length;e++){var f=e+1;this.Nz[e]=N(Ij,{s:e,size:Mf[e],src:"img/zoom"+f+"off.gif"});this.Jf[e]=N(Ij,{s:e,size:Mf[e],src:"img/zoom"+f+"on.gif"})}var g=vc("_thumbnail"),h=1;for(var e=0;e<ch.length;e++){if(g==ch[e]){h=e}}this.xo(h);fa(this.Dy,bh[h]);this.Yb=h;o("SetThumb",this.Nu.bind(this));for(var e=0;e<c.length;e++){c[e].s=c[e].s.replace(/(imgmax=)\d+/,"imgmax="+dh[h])}this.Ll=d}Lf.prototype.Nu=function(a){if(this.Yb==
a){return}Gc("_thumbnail",ch[a]);this.xo(a);this.Fu(this.Yb,a);this.Yb=a};Lf.prototype.xo=function(a){this.aB.innerHTML="";for(var b=0;b<Mf.length;b++){var c=a==b?this.Jf[b]:this.Nz[b];this.aB.appendChild(c)}};Lf.prototype.Fu=function(a,b){var c=dh[a],d=dh[b];this.Ll.Eu(c,d);Zp(this.Dy,bh[a],bh[b])};var Ij='<img src="{src}" width=18" height="18" alt="{size}" title="{size}" onclick="_d(\'SetThumb\', {s});" />',Mf=["Small thumbnails","Medium thumbnails","Large thumbnails"],bh=["lhcl_smallthumb","lhcl_mediumthumb",
"lhcl_largethumb"],ch=["SMALL","MEDIUM","LARGE"],dh=[72,144,288];var K=new zf,L=new Ac(1),mb=null,Ge=sg(Nl,"7")>=0;function Be(a){if(mb)mb.hide();if(a)mb=null}(function(){window._d=gb;function a(){var e=k("lhid_settingsform"),f=k("lhid_personaurl");if(!e||!f)return;var g=e["urlnick"];if(!g)return;if(g.length){for(var h=0;h<g.length;h++){if(g[h].checked){W(f,g[h].value);break}}}else{W(f,g.value)}}function b(){ij(nb);window._fd=function(e){return vp(e,2)};window._pd=function(e,f,g){Kr(e,f,g,2)}}window._fd=function(e){b();return window._fd(e)};window._pd=function(e,
f,g){b();window._pd(e,f,g)};window._ps=function(e){Wb.prototype.r=Wb.prototype.j;var f=e["foreign"];if(Q(f)){f.name=Pf(f.name)}window["LH_SEARCH_CONTEXT_INFO"]=e;K.Sa(new Wb(e))};window._sr=function(){o("setland",Yl);me();Ln()};window._st=function(){o("updateGalleryUrl",a);a();var e=function(f){u(k("lhid_publicalbumindexing_set"),true);u(k("lhid_publicalbumindexing_unset"),false);k("lhid_publicalbumindexing").checked=f};o("index",Jf.bind(null,e))};window._sl=function(){var e=function(f,g){f=f||"/home";
Gc("_lhmessageid",g?"INDEX_SET_ON":"INDEX_SET_OFF",-1,"/");window.location=f};o("index",Jf.bind(null,e.bind(null,document.referrer)))};window._g=function(){for(var e=0;e<_user.albums.length;e++){yh(k("title_"+_user.albums[e].id),2,_user.albums[e].title,225)}me();o("index",Jf.bind(null,Bj))};window._h=function(e,f){if(_user.albums.length>0){new Zg(_user.albums,k("lhid_albumsort"),k("lhid_albums"),e,f)}Cg();me();o("index",Jf.bind(null,Bj))};window._a=function(e){var f=[k("lhid_copybutton"),k("lhid_movebutton"),
k("lhid_deletebutton")],g=new $(e,k("lhid_test"),k("lhid_albummainbox"),f);if(e.length>0){new Lf(k("lhid_thumbnailsizechooser"),k("lhid_test"),e,g)}o("Organize",g.Au.bind(g));o("SelectAll",g.Ku.bind(g));o("DeselectAll",g.Go.bind(g));o("CopyPhotos",g.Ht.bind(g));o("MovePhotos",g.fu.bind(g));o("DeletePhotos",g.Jt.bind(g));o("DeleteAlbum",g.Kt.bind(g));o("slideshow",function(){var h=new Jd});qk(false);Cg();me()};window._b=function(){new Fa(_thumbnail,_updateCaptionsPath,k("lhid_captions"))};window._s=
function(){if(!L.gg())return _redirect();var e=new ed(nk);e.ag(v,/^#(\d+)$/);e.ag(aa,/^#s(\d+)$/);e.No();if(typeof _addStarPath!="undefined"){L.Ga(_addStarPath+"&redir=/",null)}me()};window._pc=function(e){if(!L.gg())return _redirect();var f=new ed(pk);if(_features.feedpage){if(!location.hash){location.replace(location.toString()+"#0+1")}f.ag(va,/^#(\d+)\+(\d+)$/,true);f.ag(la,/^#(\d+)$/,true);f.ag(va,/^#-.*$/,true)}else{Eg=e;if(!location.hash){location.hash="0"}var g=/^(?:#(\d*))?$/;f.ag(G,g)}f.No();
me()};window._f=function(e,f,g){var e=new gd(e,f,g)};window._vc=function(){window._selectProvider=Bn;window._sendToProvider=Xr;window._removeCart=Nr;new Yg};window._sp=function(e,f){if(rl(ah)){ef(ah);e.submit()}else{window.location=f}};window._onload=function(){if(Q(window["setup"])){window["setup"]()}Cg()};o("closeSetPref",function(){k("lhid_searchSettingWidget").style.display="none";L.Ga(_setPrefUrl,null,"pref=HIDE_SEARCHSETTINGS_WIDGET")});o("ProfilePicker",function(){if(mb==null){mb=new P(_selectedPhotosPath,
_user.name,_album.id,"PORTRAIT")}mb.Dn("PORTRAIT",false);gb("hideVideo");mb.show(function(){gb("restoreVideo")})});o("SettingsPicker",function(){if(mb==null){mb=new P(_selectedPhotosPath,_user.name,_album.id,"PORTRAIT")}mb.Dn("PORTRAIT",true);mb.show()});o("CoverPicker",function(){if(mb==null){mb=new P(_selectedPhotosPath,_user.name,_album.id,"BANNER")}mb.Dn("BANNER",false);mb.show()});window._reorganize=function(e){var f=k("lhid_edit_frame"),g=q("div");g.className="lhcl_lighttable";f.appendChild(g);
var h=[k("lhid_copy"),k("lhid_move"),k("lhid_delete")],i=new Y(g,k("lhid_done"),h);for(var j=0;j<e.length;j++){var l=e[j];i.wv(l.l,l.id,l.s,l.t,l.d)}};window._userSettingsForm=function(e){k("save").disabled=true;k("cancel").disabled=true;if(mb){return mb.OA(e)}return true};window._flag=function(e,f,g){var h=k("lhid_flagger");if(h)new mc(h,e,f,g)};window._hideWidget=function(e,f){u(k(e),false);if(L&&L.gg()){L.Ga(f,null,"POST")}};window._ef=Hn;window._setVisibility=Zr;window._addFavorite=ln;window._w=
Cg;window._e=Nn;window._v=On;window._setUpdateCartAction=En;window._setBackLink=Yr;var c=["BR_IsIE",function(){return A},"BR_IsMac",function(){return qi(qg,"Mac")},"BR_IsWin",function(){return qi(qg,"Win")},"DeleteArrayElement",od,"InsertArray",Hh,"SetCookie",Gc,"UrlEncode",Xc,"addWrangler",Qa,"get",k,"getWrangler",ib,"killEvent",Ad,"minmax",Ic,"offset",pa,"removeWrangler",Xa,"sortedInsert",Ri,"sortedRemove",$r,"squaredDistance",cs,"templatize",V,"LH_Dialog",xa,"DIALOG_CREATE",0,"DIALOG_UPLOAD_FIRST",
2,"DIALOG_UPLOAD",1,"DIALOG_EDIT",5,"DIALOG_COPY",3,"DIALOG_MOVE",4,"CL_callInsertNotes",Xi,"LH_CreateActiveXUploader",mn,"FlashRequest",gb.bind(null,"f")];for(var d=0;d<c.length;d+=2){fg(c[d],c[d+1])}fg("_xmlhttp",L);fg("xmlhttp",L);Tc(L,"Supported",L.gg);Tc(L,"Request",L.Ga)})();;var Jb={ERAS:["BC","AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:["J","F","M","A","M","J","J","A","S","O","N","D"],MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTMONTHS:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKDAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],SHORTWEEKDAYS:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],NARROWWEEKDAYS:["S","M","T",
"W","T","F","S"],SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, yyyy","MMMM d, yyyy","MMM d, yyyy","M/d/yy"],TIMEFORMATS:["h:mm:ss a v","h:mm:ss a z","h:mm:ss a","h:mm a"],ZONESTRINGS:null};Jb.STANDALONENARROWMONTHS=Jb.NARROWMONTHS;Jb.STANDALONEMONTHS=Jb.MONTHS;Jb.STANDALONESHORTMONTHS=Jb.SHORTMONTHS;Jb.STANDALONEWEEKDAYS=Jb.WEEKDAYS;Jb.STANDALONESHORTWEEKDAYS=Jb.SHORTWEEKDAYS;Jb.STANDALONENARROWWEEKDAYS=
Jb.NARROWWEEKDAYS;Mr(Jb,"en");

