\section{hn\_\-captcha\_\-X1 Klassenreferenz}
\label{classhn__captcha__X1}\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}}
Klassendiagramm für hn\_\-captcha\_\-X1::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{classhn__captcha__X1}
\end{center}
\end{figure}
\subsection*{Öffentliche Methoden}
\begin{CompactItemize}
\item 
{\bf hn\_\-captcha\_\-X1} (\$config, \$secure=TRUE)
\end{CompactItemize}
\subsection*{Öffentliche Attribute}
\begin{CompactItemize}
\item 
{\bf \$counter\_\-filename} = ''
\item 
{\bf \$prefix} = 'hn\_\-captcha\_\-'
\item 
{\bf \$collect\_\-garbage\_\-after} = 100
\item 
{\bf \$maxlifetime} = 600
\item 
{\bf \$garbage\_\-collector\_\-error} = FALSE
\end{CompactItemize}
\subsection*{Private Methoden}
\begin{CompactItemize}
\item 
{\bf txt\_\-counter} (\$filename, \$add=FALSE, \$fixvalue=FALSE)
\item 
{\bf collect\_\-garbage} ()
\item 
{\bf get\_\-filename} (\$public=\char`\"{}\char`\"{})
\item 
{\bf get\_\-filename\_\-url} (\$public=\char`\"{}\char`\"{})
\end{CompactItemize}
\subsection*{Private Attribute}
\begin{CompactItemize}
\item 
{\bf \$counter\_\-fn\_\-default\_\-basename} = 'hn\_\-captcha\_\-counter.txt'
\end{CompactItemize}


\subsection{Ausführliche Beschreibung}
PHP-Class \doxyref{hn\_\-captcha\_\-X1}{S.}{classhn__captcha__X1} Version 1.0, released 19-Apr-2004 is an extension for PHP-Class \doxyref{hn\_\-captcha}{S.}{classhn__captcha}. It adds a garbage-collector. (Useful, if you cannot use cronjobs.) Author: Horst Nogajski, {\tt horst@nogajski.de}

License: GNU GPL ({\tt http://www.opensource.org/licenses/gpl-license.html}) Download: {\tt http://hn273.users.phpclasses.org/browse/package/1569.html}

If you find it useful, you might rate it on {\tt http://www.phpclasses.org/rate.html} If you use this class in a productional environment, you might drop me a note, so I can add a link to the page. License: GNU GPL ({\tt http://www.opensource.org/licenses/gpl-license.html})

This program is free software;

you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA Tabsize: 4 This class is an extension for hn\_\-captcha-class. It adds a garbage-collector!

Normally all used images will be deleted automatically. But everytime a user doesn't finish a request one image stays as garbage in tempfolder. With this extension you can collect \& trash this.

You can specify:\begin{itemize}
\item when the garbage-collector should run, (default = after 100 calls)\item the maxlifetime for images, (default is 600, = 10 minutes)\item a filename-prefix for the captcha-images (default = 'hn\_\-captcha\_\-')\item absolute filename for a textfile which stores the current counter-value (default is \$tempfolder.'hn\_\-captcha\_\-counter.txt')\end{itemize}


The classextension needs the filename-prefix to identify lost images also if the tempfolder is shared with other scripts.

If an error occures (with counting or trash-file-deleting), the class sets the variable \$classhandle-$>$garbage\_\-collector\_\-error to TRUE. You can check this in your scripts and if is TRUE, you might execute an email-notification or something else.

Class that adds a garbage-collector to the class \doxyref{hn\_\-captcha}{S.}{classhn__captcha}

\begin{Desc}
\item[Autor:]Horst Nogajski, (mail: {\tt horst@nogajski.de}) \end{Desc}
\begin{Desc}
\item[Version:]1.0 \end{Desc}
\begin{Desc}
\item[Datum:]2004-April-19 \end{Desc}


Definiert in Zeile 75 der Datei hn\_\-captcha.class.x1.php.

\subsection{Dokumentation der Elementfunktionen}
\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}}
\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.hn\_\-captcha\_\-X1 (\$ {\em config}, \$ {\em secure} = {\tt TRUE})}\label{classhn__captcha__X1_1606074057fbbadcd924b1d057247820}


This calls the constructor of main-class for extracting the config array and generating all needed params. Additionally it control the garbage-collector.

void \begin{Desc}
\item[Rückgabe:]nothing \end{Desc}


Definiert in Zeile 148 der Datei hn\_\-captcha.class.x1.php.

Benutzt collect\_\-garbage(), hn\_\-captcha.hn\_\-captcha() und txt\_\-counter().\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!txt\_\-counter@{txt\_\-counter}}
\index{txt\_\-counter@{txt\_\-counter}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.txt\_\-counter (\$ {\em filename}, \$ {\em add} = {\tt FALSE}, \$ {\em fixvalue} = {\tt FALSE})\hspace{0.3cm}{\tt  [private]}}\label{classhn__captcha__X1_7bac34f7a942f6625cc9196ccaa968f0}


Store/Retrieve a counter-value in/from a textfile. Optionally count it up or store a (as third param) specified value.

integer \begin{Desc}
\item[Rückgabe:]counter-value \end{Desc}


Definiert in Zeile 207 der Datei hn\_\-captcha.class.x1.php.

Benutzt hn\_\-captcha.\$filename.

Wird benutzt von hn\_\-captcha\_\-X1().\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!collect\_\-garbage@{collect\_\-garbage}}
\index{collect\_\-garbage@{collect\_\-garbage}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.collect\_\-garbage ()\hspace{0.3cm}{\tt  [private]}}\label{classhn__captcha__X1_5502e0381955029c455d466df85a5360}


Scanns the tempfolder for jpeg-files with nameprefix used by the class and trash them if they are older than maxlifetime. 

Definiert in Zeile 256 der Datei hn\_\-captcha.class.x1.php.

Wird benutzt von hn\_\-captcha\_\-X1().\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!get\_\-filename@{get\_\-filename}}
\index{get\_\-filename@{get\_\-filename}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.get\_\-filename (\$ {\em public} = {\tt \char`\"{}\char`\"{}})\hspace{0.3cm}{\tt  [private]}}\label{classhn__captcha__X1_1dfdabc804a4c1c6b8ff0016a009bf87}




Definiert in Zeile 290 der Datei hn\_\-captcha.class.x1.php.\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!get\_\-filename\_\-url@{get\_\-filename\_\-url}}
\index{get\_\-filename\_\-url@{get\_\-filename\_\-url}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.get\_\-filename\_\-url (\$ {\em public} = {\tt \char`\"{}\char`\"{}})\hspace{0.3cm}{\tt  [private]}}\label{classhn__captcha__X1_411439a006cb0cb1329a2a856dd06f23}




Definiert in Zeile 298 der Datei hn\_\-captcha.class.x1.php.

\subsection{Dokumentation der Datenelemente}
\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!\$counter\_\-filename@{\$counter\_\-filename}}
\index{\$counter\_\-filename@{\$counter\_\-filename}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.\$counter\_\-filename = ''}\label{classhn__captcha__X1_fd4111d73955f886b634a587cb8962eb}


You optionally can specify an absolute filename for the counter. If is not specified, the class use the tempfolder and the default\_\-basename.

string 

Definiert in Zeile 89 der Datei hn\_\-captcha.class.x1.php.\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!\$prefix@{\$prefix}}
\index{\$prefix@{\$prefix}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.\$prefix = 'hn\_\-captcha\_\-'}\label{classhn__captcha__X1_ae0022989e94141baacd0508b4b580bf}


This is used as prefix for the picture filenames, so we can identify them also if we share the tempfolder with other programs.

string 

Definiert in Zeile 97 der Datei hn\_\-captcha.class.x1.php.\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!\$collect\_\-garbage\_\-after@{\$collect\_\-garbage\_\-after}}
\index{\$collect\_\-garbage\_\-after@{\$collect\_\-garbage\_\-after}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.\$collect\_\-garbage\_\-after = 100}\label{classhn__captcha__X1_9881790d05ecc047d53a9b0fd65fa46d}


The garbage-collector will started once when the class was called that number times.

integer 

Definiert in Zeile 105 der Datei hn\_\-captcha.class.x1.php.\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!\$maxlifetime@{\$maxlifetime}}
\index{\$maxlifetime@{\$maxlifetime}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.\$maxlifetime = 600}\label{classhn__captcha__X1_7ca7240f2708e7957dd77e722e7ad8bb}


Only trash files which are older than this number of seconds.

integer 

Definiert in Zeile 113 der Datei hn\_\-captcha.class.x1.php.\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!\$garbage\_\-collector\_\-error@{\$garbage\_\-collector\_\-error}}
\index{\$garbage\_\-collector\_\-error@{\$garbage\_\-collector\_\-error}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.\$garbage\_\-collector\_\-error = FALSE}\label{classhn__captcha__X1_beb30fc6d6c0bd718df2805f84284f7f}


This becomes TRUE if the counter doesn't work or if trashfiles couldn't be deleted.

boolean 

Definiert in Zeile 121 der Datei hn\_\-captcha.class.x1.php.\index{hn\_\-captcha\_\-X1@{hn\_\-captcha\_\-X1}!\$counter\_\-fn\_\-default\_\-basename@{\$counter\_\-fn\_\-default\_\-basename}}
\index{\$counter\_\-fn\_\-default\_\-basename@{\$counter\_\-fn\_\-default\_\-basename}!hn_captcha_X1@{hn\_\-captcha\_\-X1}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}hn\_\-captcha\_\-X1.\$counter\_\-fn\_\-default\_\-basename = 'hn\_\-captcha\_\-counter.txt'\hspace{0.3cm}{\tt  [private]}}\label{classhn__captcha__X1_6e0d1de1e81cbba0edd85236f869eae2}




Definiert in Zeile 131 der Datei hn\_\-captcha.class.x1.php.

Die Dokumentation für diese Klasse wurde erzeugt aufgrund der Datei:\begin{CompactItemize}
\item 
{\bf hn\_\-captcha.class.x1.php}\end{CompactItemize}
