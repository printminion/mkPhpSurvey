<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>mkSurvey: class.User.php Quellcode</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Erzeugt von Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Hauptseite</span></a></li>
    <li><a href="namespaces.html"><span>Pakete</span></a></li>
    <li><a href="annotated.html"><span>Klassen</span></a></li>
    <li class="current"><a href="files.html"><span>Dateien</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>uchen&nbsp;nach&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul>
</div>
<h1>class.User.php</h1><a href="class_8User_8php.html">gehe zur Dokumentation dieser Datei</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">//error_reporting(E_ALL);</span>
<a name="l00012"></a><a class="code" href="class_8User_8php.html#4569193c2d65adce885695208c0bcb1e">00012</a> <span class="comment"></span>define('<a class="code" href="class_8User_8php.html#4569193c2d65adce885695208c0bcb1e">TABLE_USERS</a>',DB_PREFIX.'users');
<a name="l00013"></a><a class="code" href="class_8User_8php.html#6dc2f0c5d79da161af45508d0924b14e">00013</a> define('<a class="code" href="class_8User_8php.html#6dc2f0c5d79da161af45508d0924b14e">TABLE_USERS_INCOMING</a>',DB_PREFIX.'users_incoming');
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 
<a name="l00016"></a><a class="code" href="classUser.html">00016</a> <span class="keyword">class </span><a class="code" href="classUser.html">User</a> <span class="keyword">extends</span> <a class="code" href="classObjectLogger.html">ObjectLogger</a> {
<a name="l00017"></a>00017 
<a name="l00018"></a><a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">00018</a>    var <a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a>;        <span class="comment">// KEY ATTR. WITH AUTOINCREMENT</span>
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="classUser.html#db68aef27f11f7386889fa3df94fdb46">00020</a>    var <a class="code" href="classUser.html#db68aef27f11f7386889fa3df94fdb46">$name</a>;                 <span class="comment">//varchar(50)</span>
<a name="l00021"></a><a class="code" href="classUser.html#d3f7392a7745e6a0ce197fcfd83b7842">00021</a>    var <a class="code" href="classUser.html#d3f7392a7745e6a0ce197fcfd83b7842">$username</a>;                 <span class="comment">//varchar(25)</span>
<a name="l00022"></a><a class="code" href="classUser.html#7f2132d341ce906f2d42787b839069b4">00022</a>    var <a class="code" href="classUser.html#7f2132d341ce906f2d42787b839069b4">$email</a>;                 <span class="comment">//varchar(100)</span>
<a name="l00023"></a><a class="code" href="classUser.html#d96d7565365c2b90dc125d715e90ba17">00023</a>    var <a class="code" href="classUser.html#d96d7565365c2b90dc125d715e90ba17">$password</a>;                 <span class="comment">//varchar(100)</span>
<a name="l00024"></a><a class="code" href="classUser.html#cc6f1e0923d0db4b1ef06e3eadd88892">00024</a>    var <a class="code" href="classUser.html#cc6f1e0923d0db4b1ef06e3eadd88892">$usertype</a> = 'user';                 <span class="comment">//enum('administrator','superadministrator','user')</span>
<a name="l00025"></a><a class="code" href="classUser.html#96b8da25e50fc2c2b22198e3e6f2a88f">00025</a>    var <a class="code" href="classUser.html#96b8da25e50fc2c2b22198e3e6f2a88f">$block</a>;                 <span class="comment">//tinyint(4)</span>
<a name="l00026"></a><a class="code" href="classUser.html#bbb6f0039fab8773d35281412a2e055a">00026</a>    var <a class="code" href="classUser.html#bbb6f0039fab8773d35281412a2e055a">$sendEmail</a>;                 <span class="comment">//tinyint(4)</span>
<a name="l00027"></a><a class="code" href="classUser.html#f9e998271192f9af6cfa30fec3eff6ce">00027</a>    var <a class="code" href="classUser.html#f9e998271192f9af6cfa30fec3eff6ce">$gid</a> = 1;                 <span class="comment">//tinyint(3) unsigned</span>
<a name="l00028"></a><a class="code" href="classUser.html#6b5dea3b5984e7618ef71a82b10f0ac0">00028</a>    var <a class="code" href="classUser.html#6b5dea3b5984e7618ef71a82b10f0ac0">$initPassword</a>; <span class="comment">//uncoded pass</span>
<a name="l00029"></a>00029 
<a name="l00030"></a><a class="code" href="classUser.html#296d9fcdc74c039c8c78341dbe1bb2d3">00030</a>    var <a class="code" href="classUser.html#296d9fcdc74c039c8c78341dbe1bb2d3">$register_date</a>; <span class="comment">//needed for while regisration</span>
<a name="l00031"></a><a class="code" href="classUser.html#aa9f1308d5c43c3dcf0cf328036fcf8b">00031</a>    var <a class="code" href="classUser.html#aa9f1308d5c43c3dcf0cf328036fcf8b">$optin</a>;         <span class="comment">//needed for while regisration</span>
<a name="l00032"></a>00032    
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="classUser.html#8cb8b810dfbc2ff4fb9ef61ddb78e069">00034</a>    function <a class="code" href="classUser.html#8cb8b810dfbc2ff4fb9ef61ddb78e069">User</a>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a> = null,$table = <a class="code" href="class_8User_8php.html#4569193c2d65adce885695208c0bcb1e">TABLE_USERS</a>){
<a name="l00035"></a>00035 
<a name="l00036"></a>00036       <span class="keywordflow">if</span> (<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a>==null){
<a name="l00037"></a>00037 
<a name="l00038"></a>00038       }<span class="keywordflow">else</span>{
<a name="l00039"></a>00039          $this-&gt;<a class="code" href="classUser.html#6f4d81cb76f7d868f5f4e4f4e0051a07">_loadDataById</a>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a>,$table);
<a name="l00040"></a>00040       }
<a name="l00041"></a>00041 
<a name="l00042"></a>00042    }
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">   #######################################################################</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">   # GETTER</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 
<a name="l00053"></a><a class="code" href="classUser.html#0d5aa57d1c73c5498c1ff62f23bb85b3">00053</a>    function <a class="code" href="classUser.html#0d5aa57d1c73c5498c1ff62f23bb85b3">getId</a>(){
<a name="l00054"></a>00054       <span class="keywordflow">return</span> $this-&gt;id;
<a name="l00055"></a>00055    }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00063"></a><a class="code" href="classUser.html#b877a031b66404c08986dee0764bd5f2">00063</a>    function <a class="code" href="classUser.html#b877a031b66404c08986dee0764bd5f2">getName</a>(){
<a name="l00064"></a>00064       <span class="keywordflow">return</span> $this-&gt;name;
<a name="l00065"></a>00065    }
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 
<a name="l00073"></a><a class="code" href="classUser.html#135881c0513936b26ac44821ac496810">00073</a>    function <a class="code" href="classUser.html#135881c0513936b26ac44821ac496810">getUsername</a>(){
<a name="l00074"></a>00074       <span class="keywordflow">return</span> $this-&gt;username;
<a name="l00075"></a>00075    }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 
<a name="l00083"></a><a class="code" href="classUser.html#e9a00512504a8e547274eacac8bd8d80">00083</a>    function <a class="code" href="classUser.html#e9a00512504a8e547274eacac8bd8d80">getEmail</a>(){
<a name="l00084"></a>00084       <span class="keywordflow">return</span> $this-&gt;email;
<a name="l00085"></a>00085    }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 
<a name="l00093"></a><a class="code" href="classUser.html#459571417cf0574378998d7b14db61a5">00093</a>    function <a class="code" href="classUser.html#459571417cf0574378998d7b14db61a5">getPassword</a>(){
<a name="l00094"></a>00094       <span class="keywordflow">return</span> $this-&gt;password;
<a name="l00095"></a>00095    }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 
<a name="l00103"></a><a class="code" href="classUser.html#996685220ddd7ac45b12b1dfcbb22b9d">00103</a>    function <a class="code" href="classUser.html#996685220ddd7ac45b12b1dfcbb22b9d">getInitPassword</a>(){
<a name="l00104"></a>00104       <span class="keywordflow">return</span> $this-&gt;initPassword;
<a name="l00105"></a>00105    }
<a name="l00111"></a><a class="code" href="classUser.html#5c15c2e10f2e6d3100c476673e48be7f">00111</a>    function <a class="code" href="classUser.html#5c15c2e10f2e6d3100c476673e48be7f">getUsertype</a>(){
<a name="l00112"></a>00112       <span class="keywordflow">return</span> $this-&gt;usertype;
<a name="l00113"></a>00113    }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 
<a name="l00121"></a><a class="code" href="classUser.html#2c263ed380baa9a0fe1809b7b59522ea">00121</a>    function <a class="code" href="classUser.html#2c263ed380baa9a0fe1809b7b59522ea">getBlock</a>(){
<a name="l00122"></a>00122       <span class="keywordflow">return</span> $this-&gt;block;
<a name="l00123"></a>00123    }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 
<a name="l00131"></a><a class="code" href="classUser.html#083803b3b60ad647666591c9b20bf3ec">00131</a>    function <a class="code" href="classUser.html#083803b3b60ad647666591c9b20bf3ec">getSendEmail</a>(){
<a name="l00132"></a>00132       <span class="keywordflow">return</span> $this-&gt;sendEmail;
<a name="l00133"></a>00133    }
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00141"></a><a class="code" href="classUser.html#607add86a659ef81a0c3a1e607deae7d">00141</a>    function <a class="code" href="classUser.html#607add86a659ef81a0c3a1e607deae7d">getGid</a>(){
<a name="l00142"></a>00142       <span class="keywordflow">return</span> $this-&gt;gid;
<a name="l00143"></a>00143    }
<a name="l00144"></a>00144 
<a name="l00153"></a><a class="code" href="classUser.html#c2b84a5521f852a6d635c2c536c30879">00153</a>    function <a class="code" href="classUser.html#c2b84a5521f852a6d635c2c536c30879">setOptin</a>(<a class="code" href="classUser.html#aa9f1308d5c43c3dcf0cf328036fcf8b">$optin</a> = null){
<a name="l00154"></a>00154 
<a name="l00155"></a>00155          $this-&gt;optin = <a class="code" href="classUser.html#aa9f1308d5c43c3dcf0cf328036fcf8b">$optin</a>;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157    }
<a name="l00158"></a>00158 
<a name="l00166"></a><a class="code" href="classUser.html#e27046d9d561e64155ba56d2dc5a2f44">00166</a>    function <a class="code" href="classUser.html#e27046d9d561e64155ba56d2dc5a2f44">getOptin</a>(){
<a name="l00167"></a>00167       <span class="keywordflow">return</span> $this-&gt;optin;
<a name="l00168"></a>00168    }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 <span class="preprocessor">   #######################################################################</span>
<a name="l00171"></a>00171 <span class="preprocessor"></span><span class="preprocessor">   # SETTER</span>
<a name="l00172"></a>00172 <span class="preprocessor"></span>
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 
<a name="l00181"></a><a class="code" href="classUser.html#41af9098c8081da24ac2d00719808f75">00181</a>    function <a class="code" href="classUser.html#41af9098c8081da24ac2d00719808f75">setId</a>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a>){
<a name="l00182"></a>00182       $this-&gt;_lastError = null;
<a name="l00183"></a>00183 
<a name="l00184"></a>00184       <span class="comment">/*</span>
<a name="l00185"></a>00185 <span class="comment">       //add your validation here</span>
<a name="l00186"></a>00186 <span class="comment">       if($id == "") {</span>
<a name="l00187"></a>00187 <span class="comment">       $this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_IS_NULL;</span>
<a name="l00188"></a>00188 <span class="comment">       return false;</span>
<a name="l00189"></a>00189 <span class="comment">       }*/</span>
<a name="l00190"></a>00190 
<a name="l00191"></a>00191       $this-&gt;<span class="keywordtype">id</span> = <a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a>;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00194"></a>00194    }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00203"></a><a class="code" href="classUser.html#e508a1c37100a2d216ebd486c959994c">00203</a>    function <a class="code" href="classUser.html#e508a1c37100a2d216ebd486c959994c">setName</a>(<a class="code" href="classUser.html#db68aef27f11f7386889fa3df94fdb46">$name</a>){
<a name="l00204"></a>00204       $this-&gt;_lastError = null;
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 
<a name="l00207"></a>00207       <span class="comment">//add your validation here</span>
<a name="l00208"></a>00208       <span class="keywordflow">if</span>(<a class="code" href="classUser.html#db68aef27f11f7386889fa3df94fdb46">$name</a> == '') {
<a name="l00209"></a>00209          $this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_NAME_IS_NULL;
<a name="l00210"></a>00210          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00211"></a>00211       }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213       $this-&gt;name = <a class="code" href="classUser.html#db68aef27f11f7386889fa3df94fdb46">$name</a>;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00216"></a>00216    }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218 
<a name="l00225"></a><a class="code" href="classUser.html#eab8e44f4b63db233aba6b538d1bcf3f">00225</a>    function <a class="code" href="classUser.html#eab8e44f4b63db233aba6b538d1bcf3f">setUsername</a>(<a class="code" href="classUser.html#d3f7392a7745e6a0ce197fcfd83b7842">$username</a>){
<a name="l00226"></a>00226       $this-&gt;_lastError = null;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228       <span class="comment">/*</span>
<a name="l00229"></a>00229 <span class="comment">       //add your validation here</span>
<a name="l00230"></a>00230 <span class="comment">       if($username == "") {</span>
<a name="l00231"></a>00231 <span class="comment">       $this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_IS_NULL;</span>
<a name="l00232"></a>00232 <span class="comment">       return false;</span>
<a name="l00233"></a>00233 <span class="comment">       }*/</span>
<a name="l00234"></a>00234 
<a name="l00235"></a>00235       $this-&gt;username = <a class="code" href="classUser.html#d3f7392a7745e6a0ce197fcfd83b7842">$username</a>;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00238"></a>00238    }
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 
<a name="l00247"></a><a class="code" href="classUser.html#607842ff1a9e5c1ba83858ce232b7f57">00247</a>    function <a class="code" href="classUser.html#607842ff1a9e5c1ba83858ce232b7f57">setEmail</a>(<a class="code" href="classUser.html#7f2132d341ce906f2d42787b839069b4">$email</a>){
<a name="l00248"></a>00248       <span class="comment">//$this-&gt;_lastError = null;</span>
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 
<a name="l00251"></a>00251       <span class="comment">//add your validation here</span>
<a name="l00252"></a>00252       <span class="keywordflow">if</span>(<a class="code" href="classUser.html#7f2132d341ce906f2d42787b839069b4">$email</a> == '') {
<a name="l00253"></a>00253          <span class="comment">//$this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_EMAIL_IS_NULL;</span>
<a name="l00254"></a>00254          $this-&gt;<a class="code" href="classObjectLogger.html#80da39713b2275b8a78d4d9a3f43b34f">_addError</a>(<a class="code" href="lang__register_8php.html#6bac24cab02b039e6112b368e90f7226">ERROR_REQUIRED_SETPARAMETER_EMAIL_IS_NULL</a>);
<a name="l00255"></a>00255          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00256"></a>00256       }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258       $this-&gt;email = <a class="code" href="classUser.html#7f2132d341ce906f2d42787b839069b4">$email</a>;
<a name="l00259"></a>00259 
<a name="l00260"></a>00260       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00261"></a>00261    }
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 
<a name="l00270"></a><a class="code" href="classUser.html#0bcd62a50053f97d9f1531c4b2d9ab57">00270</a>    function <a class="code" href="classUser.html#0bcd62a50053f97d9f1531c4b2d9ab57">setPassword</a>(<a class="code" href="classUser.html#d96d7565365c2b90dc125d715e90ba17">$password</a>){
<a name="l00271"></a>00271       <span class="comment">//$this-&gt;_lastError = null;</span>
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 
<a name="l00274"></a>00274       <span class="comment">//add your validation here</span>
<a name="l00275"></a>00275       <span class="keywordflow">if</span>(<a class="code" href="classUser.html#d96d7565365c2b90dc125d715e90ba17">$password</a> == <span class="stringliteral">""</span>) {
<a name="l00276"></a>00276          <span class="comment">//$this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_PASSWORD_IS_NULL;</span>
<a name="l00277"></a>00277          $this-&gt;<a class="code" href="classObjectLogger.html#80da39713b2275b8a78d4d9a3f43b34f">_addError</a>(ERROR_REQUIRED_SETPARAMETER_PASSWORD_IS_NULL);
<a name="l00278"></a>00278          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00279"></a>00279       }
<a name="l00280"></a>00280 
<a name="l00281"></a>00281       $this-&gt;password = <a class="code" href="classUser.html#d96d7565365c2b90dc125d715e90ba17">$password</a>;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00284"></a>00284    }
<a name="l00285"></a>00285 
<a name="l00292"></a><a class="code" href="classUser.html#526189d24345a0f87d5303c11af4fb3d">00292</a>    function <a class="code" href="classUser.html#526189d24345a0f87d5303c11af4fb3d">setInitPassword</a>(<a class="code" href="classUser.html#6b5dea3b5984e7618ef71a82b10f0ac0">$initPassword</a>){
<a name="l00293"></a>00293       $this-&gt;initPassword = <a class="code" href="classUser.html#6b5dea3b5984e7618ef71a82b10f0ac0">$initPassword</a>;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00296"></a>00296    }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 
<a name="l00305"></a><a class="code" href="classUser.html#87ac340ca50fe578547717cb75d01556">00305</a>    function <a class="code" href="classUser.html#87ac340ca50fe578547717cb75d01556">setUsertype</a>(<a class="code" href="classUser.html#cc6f1e0923d0db4b1ef06e3eadd88892">$usertype</a>){
<a name="l00306"></a>00306       $this-&gt;_lastError = null;
<a name="l00307"></a>00307 
<a name="l00308"></a>00308       <span class="comment">/*</span>
<a name="l00309"></a>00309 <span class="comment">       //add your validation here</span>
<a name="l00310"></a>00310 <span class="comment">       if($usertype == "") {</span>
<a name="l00311"></a>00311 <span class="comment">       $this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_IS_NULL;</span>
<a name="l00312"></a>00312 <span class="comment">       return false;</span>
<a name="l00313"></a>00313 <span class="comment">       }*/</span>
<a name="l00314"></a>00314 
<a name="l00315"></a>00315       $this-&gt;usertype = <a class="code" href="classUser.html#cc6f1e0923d0db4b1ef06e3eadd88892">$usertype</a>;
<a name="l00316"></a>00316 
<a name="l00317"></a>00317       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00318"></a>00318    }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 
<a name="l00327"></a><a class="code" href="classUser.html#923b69dd33e5d2d679f42bc0120d910f">00327</a>    function <a class="code" href="classUser.html#923b69dd33e5d2d679f42bc0120d910f">setBlock</a>(<a class="code" href="classUser.html#96b8da25e50fc2c2b22198e3e6f2a88f">$block</a>){
<a name="l00328"></a>00328       $this-&gt;_lastError = null;
<a name="l00329"></a>00329 
<a name="l00330"></a>00330       <span class="comment">/*</span>
<a name="l00331"></a>00331 <span class="comment">       //add your validation here</span>
<a name="l00332"></a>00332 <span class="comment">       if($block == "") {</span>
<a name="l00333"></a>00333 <span class="comment">       $this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_IS_NULL;</span>
<a name="l00334"></a>00334 <span class="comment">       return false;</span>
<a name="l00335"></a>00335 <span class="comment">       }*/</span>
<a name="l00336"></a>00336 
<a name="l00337"></a>00337       $this-&gt;block = <a class="code" href="classUser.html#96b8da25e50fc2c2b22198e3e6f2a88f">$block</a>;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00340"></a>00340    }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 
<a name="l00349"></a><a class="code" href="classUser.html#b0ae72341d603e95a64c3c3b4fd8fc5b">00349</a>    function <a class="code" href="classUser.html#b0ae72341d603e95a64c3c3b4fd8fc5b">setSendEmail</a>(<a class="code" href="classUser.html#bbb6f0039fab8773d35281412a2e055a">$sendEmail</a>){
<a name="l00350"></a>00350       $this-&gt;_lastError = null;
<a name="l00351"></a>00351 
<a name="l00352"></a>00352       <span class="comment">/*</span>
<a name="l00353"></a>00353 <span class="comment">       //add your validation here</span>
<a name="l00354"></a>00354 <span class="comment">       if($sendEmail == "") {</span>
<a name="l00355"></a>00355 <span class="comment">       $this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_IS_NULL;</span>
<a name="l00356"></a>00356 <span class="comment">       return false;</span>
<a name="l00357"></a>00357 <span class="comment">       }*/</span>
<a name="l00358"></a>00358 
<a name="l00359"></a>00359       $this-&gt;sendEmail = <a class="code" href="classUser.html#bbb6f0039fab8773d35281412a2e055a">$sendEmail</a>;
<a name="l00360"></a>00360 
<a name="l00361"></a>00361       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00362"></a>00362    }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 
<a name="l00371"></a><a class="code" href="classUser.html#b2dfa6c1098ecd1fc24738d650ca2468">00371</a>    function <a class="code" href="classUser.html#b2dfa6c1098ecd1fc24738d650ca2468">setGid</a>(<a class="code" href="classUser.html#f9e998271192f9af6cfa30fec3eff6ce">$gid</a>){
<a name="l00372"></a>00372       $this-&gt;_lastError = null;
<a name="l00373"></a>00373 
<a name="l00374"></a>00374       <span class="comment">/*</span>
<a name="l00375"></a>00375 <span class="comment">       //add your validation here</span>
<a name="l00376"></a>00376 <span class="comment">       if($gid == "") {</span>
<a name="l00377"></a>00377 <span class="comment">       $this-&gt;_lastError = ERROR_REQUIRED_SETPARAMETER_IS_NULL;</span>
<a name="l00378"></a>00378 <span class="comment">       return false;</span>
<a name="l00379"></a>00379 <span class="comment">       }*/</span>
<a name="l00380"></a>00380 
<a name="l00381"></a>00381       $this-&gt;gid = <a class="code" href="classUser.html#f9e998271192f9af6cfa30fec3eff6ce">$gid</a>;
<a name="l00382"></a>00382 
<a name="l00383"></a>00383       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00384"></a>00384    }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 <span class="preprocessor">   #######################################################################</span>
<a name="l00387"></a>00387 <span class="preprocessor"></span><span class="preprocessor">   # SELECT</span>
<a name="l00388"></a>00388 <span class="preprocessor"></span>
<a name="l00389"></a><a class="code" href="classUser.html#6f4d81cb76f7d868f5f4e4f4e0051a07">00389</a>    function <a class="code" href="classUser.html#6f4d81cb76f7d868f5f4e4f4e0051a07">_loadDataById</a>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a>,$table = <a class="code" href="class_8User_8php.html#4569193c2d65adce885695208c0bcb1e">TABLE_USERS</a>){
<a name="l00390"></a>00390       $this-&gt;_lastError = null;
<a name="l00391"></a>00391 
<a name="l00392"></a>00392       <span class="keywordflow">if</span>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a> == <span class="stringliteral">""</span>) {
<a name="l00393"></a>00393          $this-&gt;_lastError = ERROR_REQUIRED_PARAMETER_IS_NULL;
<a name="l00394"></a>00394          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00395"></a>00395       }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397       $sqlQuery = <span class="stringliteral">"SELECT * FROM "</span>.$table.<span class="stringliteral">"</span>
<a name="l00398"></a>00398 <span class="stringliteral">                            WHERE id = $id;"</span>;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400       $sqlQueryResult = <a class="code" href="database__wrapper_8php.html#b8549d8a4736dd32c005b636a741f91b">tep_db_reader_query</a>($sqlQuery);
<a name="l00401"></a>00401        
<a name="l00402"></a>00402       <span class="keywordflow">if</span>(<a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a> = <a class="code" href="database__wrapper_8php.html#801e3ae24b9c3f76a5566142c4fc67ca">tep_db_fetch_array</a>($sqlQueryResult)){
<a name="l00403"></a>00403          $this-&gt;<span class="keywordtype">id</span> = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['<span class="keywordtype">id</span>'];
<a name="l00404"></a>00404          $this-&gt;name = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['name'];
<a name="l00405"></a>00405          $this-&gt;username = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['username'];
<a name="l00406"></a>00406          $this-&gt;email = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['email'];
<a name="l00407"></a>00407          $this-&gt;password = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['password'];
<a name="l00408"></a>00408          $this-&gt;usertype = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['usertype'];
<a name="l00409"></a>00409          $this-&gt;block = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['block'];
<a name="l00410"></a>00410          $this-&gt;sendEmail = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['sendEmail'];
<a name="l00411"></a>00411          $this-&gt;gid = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['gid'];
<a name="l00412"></a>00412          $this-&gt;register_date = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['register_date'];
<a name="l00413"></a>00413          $this-&gt;optin = <a class="code" href="SessionCookie_8php.html#112ef069ddc0454086e3d1e6d8d55d07">$result</a>['optin'];
<a name="l00414"></a>00414          <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00415"></a>00415       }
<a name="l00416"></a>00416    }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 <span class="preprocessor">   #######################################################################</span>
<a name="l00419"></a>00419 <span class="preprocessor"></span><span class="preprocessor">   # DELETE</span>
<a name="l00420"></a>00420 <span class="preprocessor"></span>
<a name="l00421"></a><a class="code" href="classUser.html#09090564766ca96b672c48161fba7373">00421</a>    function <a class="code" href="classUser.html#09090564766ca96b672c48161fba7373">_delete</a>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a>,$table = <a class="code" href="class_8User_8php.html#4569193c2d65adce885695208c0bcb1e">TABLE_USERS</a>){
<a name="l00422"></a>00422       $this-&gt;_lastError = null;
<a name="l00423"></a>00423 
<a name="l00424"></a>00424       <span class="keywordflow">if</span>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a> == <span class="stringliteral">""</span>) {
<a name="l00425"></a>00425          $this-&gt;_lastError = ERROR_REQUIRED_PARAMETER_IS_NULL;
<a name="l00426"></a>00426          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00427"></a>00427       }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 
<a name="l00430"></a>00430       $sqlQuery = <span class="stringliteral">"DELETE FROM "</span>.$table.<span class="stringliteral">"</span>
<a name="l00431"></a>00431 <span class="stringliteral">                                    WHERE id = $id;"</span>;
<a name="l00432"></a>00432       $sqlQueryResult = <a class="code" href="database__wrapper_8php.html#b8549d8a4736dd32c005b636a741f91b">tep_db_reader_query</a>($sqlQuery);
<a name="l00433"></a>00433 
<a name="l00434"></a>00434       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436    }
<a name="l00437"></a>00437 
<a name="l00438"></a>00438 <span class="preprocessor">   #######################################################################</span>
<a name="l00439"></a>00439 <span class="preprocessor"></span><span class="preprocessor">   # INSERT</span>
<a name="l00440"></a>00440 <span class="preprocessor"></span>
<a name="l00447"></a><a class="code" href="classUser.html#3e543a2d92f783c7ee1500046de1f31d">00447</a>    function <a class="code" href="classUser.html#3e543a2d92f783c7ee1500046de1f31d">_insert</a>($table = <a class="code" href="class_8User_8php.html#4569193c2d65adce885695208c0bcb1e">TABLE_USERS</a>){
<a name="l00448"></a>00448       $this-&gt;<span class="keywordtype">id</span> = <span class="stringliteral">""</span>; <span class="comment">// clear key for autoincrement</span>
<a name="l00449"></a>00449 
<a name="l00450"></a>00450       <span class="keywordflow">if</span> ($table == <a class="code" href="class_8User_8php.html#4569193c2d65adce885695208c0bcb1e">TABLE_USERS</a>){
<a name="l00451"></a>00451       $sqlQuery = <span class="stringliteral">"INSERT INTO "</span>.$table.<span class="stringliteral">" (</span>
<a name="l00452"></a>00452 <span class="stringliteral">                               id,</span>
<a name="l00453"></a>00453 <span class="stringliteral">                               name,</span>
<a name="l00454"></a>00454 <span class="stringliteral">                               username,</span>
<a name="l00455"></a>00455 <span class="stringliteral">                               email,</span>
<a name="l00456"></a>00456 <span class="stringliteral">                               password,</span>
<a name="l00457"></a>00457 <span class="stringliteral">                               usertype,</span>
<a name="l00458"></a>00458 <span class="stringliteral">                               block,</span>
<a name="l00459"></a>00459 <span class="stringliteral">                               sendEmail,</span>
<a name="l00460"></a>00460 <span class="stringliteral">                               gid </span>
<a name="l00461"></a>00461 <span class="stringliteral">                               )</span>
<a name="l00462"></a>00462 <span class="stringliteral">                               VALUES ( </span>
<a name="l00463"></a>00463 <span class="stringliteral">                               '$this-&gt;id',</span>
<a name="l00464"></a>00464 <span class="stringliteral">                               '$this-&gt;name',</span>
<a name="l00465"></a>00465 <span class="stringliteral">                               '$this-&gt;username',</span>
<a name="l00466"></a>00466 <span class="stringliteral">                               '$this-&gt;email',</span>
<a name="l00467"></a>00467 <span class="stringliteral">                               '$this-&gt;password',</span>
<a name="l00468"></a>00468 <span class="stringliteral">                               '$this-&gt;usertype',</span>
<a name="l00469"></a>00469 <span class="stringliteral">                               '$this-&gt;block',</span>
<a name="l00470"></a>00470 <span class="stringliteral">                               '$this-&gt;sendEmail',</span>
<a name="l00471"></a>00471 <span class="stringliteral">                               '$this-&gt;gid')"</span>;
<a name="l00472"></a>00472       }<span class="keywordflow">else</span>{
<a name="l00473"></a>00473             $this-&gt;optin = md5(mktime());
<a name="l00474"></a>00474             
<a name="l00475"></a>00475                $sqlQuery = <span class="stringliteral">"INSERT INTO "</span>.$table.<span class="stringliteral">" (</span>
<a name="l00476"></a>00476 <span class="stringliteral">                               id,</span>
<a name="l00477"></a>00477 <span class="stringliteral">                               name,</span>
<a name="l00478"></a>00478 <span class="stringliteral">                               username,</span>
<a name="l00479"></a>00479 <span class="stringliteral">                               email,</span>
<a name="l00480"></a>00480 <span class="stringliteral">                               password,</span>
<a name="l00481"></a>00481 <span class="stringliteral">                               usertype,</span>
<a name="l00482"></a>00482 <span class="stringliteral">                               block,</span>
<a name="l00483"></a>00483 <span class="stringliteral">                               sendEmail,</span>
<a name="l00484"></a>00484 <span class="stringliteral">                               gid,</span>
<a name="l00485"></a>00485 <span class="stringliteral">                               register_date,</span>
<a name="l00486"></a>00486 <span class="stringliteral">                               optin</span>
<a name="l00487"></a>00487 <span class="stringliteral">                               )</span>
<a name="l00488"></a>00488 <span class="stringliteral">                               VALUES ( </span>
<a name="l00489"></a>00489 <span class="stringliteral">                               '$this-&gt;id',</span>
<a name="l00490"></a>00490 <span class="stringliteral">                               '$this-&gt;name',</span>
<a name="l00491"></a>00491 <span class="stringliteral">                               '$this-&gt;username',</span>
<a name="l00492"></a>00492 <span class="stringliteral">                               '$this-&gt;email',</span>
<a name="l00493"></a>00493 <span class="stringliteral">                               '$this-&gt;password',</span>
<a name="l00494"></a>00494 <span class="stringliteral">                               '$this-&gt;usertype',</span>
<a name="l00495"></a>00495 <span class="stringliteral">                               '$this-&gt;block',</span>
<a name="l00496"></a>00496 <span class="stringliteral">                               '$this-&gt;sendEmail',</span>
<a name="l00497"></a>00497 <span class="stringliteral">                               '$this-&gt;gid',</span>
<a name="l00498"></a>00498 <span class="stringliteral">                               NOW(),</span>
<a name="l00499"></a>00499 <span class="stringliteral">                               '$this-&gt;optin')"</span>;
<a name="l00500"></a>00500       
<a name="l00501"></a>00501       }
<a name="l00502"></a>00502       <span class="comment">//debug_sql($sqlQuery);</span>
<a name="l00503"></a>00503       <span class="comment">//return true;</span>
<a name="l00504"></a>00504 
<a name="l00505"></a>00505       <a class="code" href="database__wrapper_8php.html#7e851a57c051f87c2f623e41b8658d54">tep_db_writer_query</a>($sqlQuery);
<a name="l00506"></a>00506       $this-&gt;<span class="keywordtype">id</span> = <a class="code" href="database__wrapper_8php.html#6d68b3353ab90af95e317cea4b008bb4">tep_db_insert_id</a>();
<a name="l00507"></a>00507 
<a name="l00508"></a>00508       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00509"></a>00509    }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511 <span class="preprocessor">   #######################################################################</span>
<a name="l00512"></a>00512 <span class="preprocessor"></span><span class="preprocessor">   # UPDATE</span>
<a name="l00513"></a>00513 <span class="preprocessor"></span>
<a name="l00514"></a><a class="code" href="classUser.html#6b2eef984072da08f955986be2c05158">00514</a>    function <a class="code" href="classUser.html#6b2eef984072da08f955986be2c05158">_update</a>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a>,$table = <a class="code" href="class_8User_8php.html#4569193c2d65adce885695208c0bcb1e">TABLE_USERS</a>){
<a name="l00515"></a>00515       $this-&gt;_lastError = null;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517       <span class="keywordflow">if</span>(<a class="code" href="classUser.html#0528a48d0f8d4f11a48fe3b201a9bd06">$id</a> == <span class="stringliteral">""</span>) {
<a name="l00518"></a>00518          $this-&gt;_lastError = ERROR_REQUIRED_PARAMETER_IS_NULL;
<a name="l00519"></a>00519          <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00520"></a>00520       }
<a name="l00521"></a>00521 
<a name="l00522"></a>00522       $sqlQuery = <span class="stringliteral">" UPDATE "</span>.$table.<span class="stringliteral">" SET</span>
<a name="l00523"></a>00523 <span class="stringliteral">                           id = '$this-&gt;id',</span>
<a name="l00524"></a>00524 <span class="stringliteral">                           name = '$this-&gt;name',</span>
<a name="l00525"></a>00525 <span class="stringliteral">                           username = '$this-&gt;username',</span>
<a name="l00526"></a>00526 <span class="stringliteral">                           email = '$this-&gt;email',</span>
<a name="l00527"></a>00527 <span class="stringliteral">                           password = '$this-&gt;password',</span>
<a name="l00528"></a>00528 <span class="stringliteral">                           usertype = '$this-&gt;usertype',</span>
<a name="l00529"></a>00529 <span class="stringliteral">                           block = '$this-&gt;block',</span>
<a name="l00530"></a>00530 <span class="stringliteral">                           sendEmail = '$this-&gt;sendEmail',</span>
<a name="l00531"></a>00531 <span class="stringliteral">                           gid = '$this-&gt;gid'</span>
<a name="l00532"></a>00532 <span class="stringliteral">                     WHERE id = $id "</span>;
<a name="l00533"></a>00533 
<a name="l00534"></a>00534       <a class="code" href="database__wrapper_8php.html#7e851a57c051f87c2f623e41b8658d54">tep_db_writer_query</a>($sqlQuery);;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 
<a name="l00537"></a>00537 
<a name="l00538"></a>00538       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00539"></a>00539    }
<a name="l00540"></a>00540 }
<a name="l00541"></a>00541 
<a name="l00542"></a>00542 ?&gt;
</pre></div><hr size="1"><address style="text-align: right;"><small>Erzeugt am Fri Dec 7 10:25:12 2007 für mkSurvey von&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
